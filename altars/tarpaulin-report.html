<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>html, body {
  margin: 0;
  padding: 0;
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: #ddd;
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: #ccf;
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: #fcc;
}
.files-list__file_medium {
  background: #ffc;
}
.files-list__file_high {
  background: #cfc;
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: #338;
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
}

.code-line {
  margin: 0;
  padding: 0.3em;
  height: 1em;
}
.code-line_covered {
  background: #cfc;
}
.code-line_uncovered {
  background: #fcc;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","ast.rs"],"content":"//! Datatypes that are present inside our generated ASTs.\nuse std::fmt::{self, Display};\n\nuse crate::literals::Literal;\nuse crate::nativefn::NativeFn;\nuse crate::token::Token;\nuse crate::userfunction::UserFunction;\n\n/// Wraps either an Expr or an Stmt in one type so that we can treat them generically\n/// until we actually have to destructure the type for Interpretation.\n#[derive(Clone, Debug, PartialEq)]\npub enum ASTNode {\n    ExprNode(Expr),\n    StmtNode(Stmt),\n}\n\n/// Each statement or expression is represented as an algebraic variant that\n/// contains it's constituent parts.\n#[derive(Clone, Debug, PartialEq)]\npub enum Stmt {\n    Block(Vec\u003cStmt\u003e),\n    //Class(Token, Vec\u003cStmt\u003e),\n    Expression(Expr),\n    Function(Token, Vec\u003cToken\u003e, Vec\u003cStmt\u003e),\n    // GlobalFunction.\n    //Function(Token, Vec\u003cStmt\u003e),\n    If(Expr, Box\u003cStmt\u003e, Box\u003cOption\u003cStmt\u003e\u003e),\n    Return(Token, Option\u003cExpr\u003e),\n    Var(Token, Option\u003cExpr\u003e),\n    While(Expr, Box\u003cStmt\u003e),\n    Print(Expr),\n}\n\n/// Simmilar to the Stmt, we treat each Expression as an algebraic variant of this\n/// enum.\n#[derive(Clone, Debug, PartialEq)]\npub enum Expr {\n    Assign(Token, Box\u003cExpr\u003e),\n    Binary(Box\u003cExpr\u003e, Token, Box\u003cExpr\u003e),\n    //Call(Box\u003cExpr\u003e, Token),\n    Call(Box\u003cExpr\u003e, Token, Vec\u003cExpr\u003e),\n    //Get(Box\u003cExpr\u003e, Token),\n    Grouping(Box\u003cExpr\u003e),\n    Literal(Literal),\n    Logic(Box\u003cExpr\u003e, Token, Box\u003cExpr\u003e),\n    //Set(Box\u003cExpr\u003e, Token, Box\u003cExpr\u003e),\n    //This(Token),\n    Unary(Token, Box\u003cExpr\u003e),\n    Variable(Token),\n}\n\n/// We need some way to store state inside the interpreter. This is how.\n///\n/// Once again, we use ADTs in order to define the possible variants of a Value.\n/// This can be many things from stuff exposed to the user, such as numbers, booleans\n/// and strings, to the Empty type (No nulls here!), or the internal representations\n/// of how we move about and store functions.\n///\n/// If it's data, and it's (nominally) mutable at runtime, it's probably a Value.\n#[derive(Clone, Debug, PartialEq)]\npub enum Value {\n    Number(f64),\n    Bool(bool),\n    String(String),\n    NativeFn(NativeFn),\n    UserFn(UserFunction),\n    Empty,\n}\n\n/// This allows us to convert from Literals to values.\nimpl From\u003cLiteral\u003e for Value {\n    fn from(lit: Literal) -\u003e Self {\n        match lit {\n            Literal::Number(v) =\u003e {\n                return Value::Number(v);\n            }\n            Literal::StrLit(v) =\u003e {\n                return Value::String(v);\n            }\n            Literal::Bool(v) =\u003e {\n                return Value::Bool(v);\n            }\n            Literal::Empty =\u003e {\n                return Value::Empty;\n            }\n        }\n    }\n}\n\nimpl Display for Value {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            Value::Number(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Value::Bool(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Value::String(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Value::Empty =\u003e {\n                write!(f, \"Empty\")\n            }\n            Value::NativeFn(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Value::UserFn(x) =\u003e {\n                write!(f, \"{:?}\", x)\n            } //Value::Symbol(n, v) =\u003e {\n              //write!(f, \"{} = {}\", n, *v)\n              //}\n        }\n    }\n}\n\nimpl Display for Stmt {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            Stmt::Block(stmts) =\u003e {\n                let mut rv = String::from(\"BLOCK:( \");\n                for stmt in stmts {\n                    rv = format!(\"{} {}\", rv, stmt);\n                }\n                write!(f, \"{} )\", rv)\n            }\n            Stmt::Expression(expr) =\u003e {\n                write!(f, \"EXPR: ( {} )\", expr)\n            }\n            Stmt::Function(name, body, params) =\u003e {\n                let mut rv = format!(\"Fn {} ({:?}): Body: {{\", name, params);\n                for stmt in body {\n                    rv = format!(\"{} {}\", rv, stmt);\n                }\n                rv = format!(\"{} }}\", rv);\n                write!(f, \"{}\", rv)\n            }\n            Stmt::If(_, _, _) =\u003e todo!(),\n            Stmt::Return(_, _) =\u003e todo!(),\n            Stmt::Var(_, _) =\u003e todo!(),\n            Stmt::While(_, _) =\u003e todo!(),\n            Stmt::Print(_) =\u003e todo!(),\n        }\n    }\n}\n\nimpl Display for Expr {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            Expr::Assign(_, _) =\u003e todo!(),\n            Expr::Binary(_, _, _) =\u003e todo!(),\n            Expr::Call(_, _, _) =\u003e todo!(),\n            Expr::Grouping(_) =\u003e todo!(),\n            Expr::Literal(x) =\u003e {\n                write!(f, \"\\\"{}\\\"\", x)\n            }\n            Expr::Logic(_, _, _) =\u003e todo!(),\n            Expr::Unary(_, _) =\u003e todo!(),\n            Expr::Variable(_) =\u003e todo!(),\n        }\n    }\n}\n\nimpl Display for ASTNode {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            ASTNode::ExprNode(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            ASTNode::StmtNode(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n        }\n    }\n}\n","traces":[{"line":72,"address":[589600],"length":1,"stats":{"Line":0},"fn_name":"from"},{"line":73,"address":[589618],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[589658],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[589669],"length":1,"stats":{"Line":0},"fn_name":null},{"line":77,"address":[589691],"length":1,"stats":{"Line":0},"fn_name":null},{"line":78,"address":[589718],"length":1,"stats":{"Line":0},"fn_name":null},{"line":80,"address":[589789],"length":1,"stats":{"Line":0},"fn_name":null},{"line":81,"address":[589801],"length":1,"stats":{"Line":0},"fn_name":null},{"line":84,"address":[589817],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[589840],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":92,"address":[589873],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[589909],"length":1,"stats":{"Line":0},"fn_name":null},{"line":94,"address":[589918,590734],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[589979],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[590641,589991],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[590055],"length":1,"stats":{"Line":0},"fn_name":null},{"line":100,"address":[590548,590067],"length":1,"stats":{"Line":0},"fn_name":null},{"line":103,"address":[590276],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[590132],"length":1,"stats":{"Line":0},"fn_name":null},{"line":106,"address":[590144,590455],"length":1,"stats":{"Line":0},"fn_name":null},{"line":108,"address":[590208],"length":1,"stats":{"Line":0},"fn_name":null},{"line":109,"address":[590220,590365],"length":1,"stats":{"Line":0},"fn_name":null},{"line":118,"address":[592740,590832],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":119,"address":[590871],"length":1,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[590916],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[590936],"length":1,"stats":{"Line":0},"fn_name":null},{"line":122,"address":[592887,592981,593094,593473],"length":1,"stats":{"Line":0},"fn_name":null},{"line":123,"address":[593118,593478],"length":1,"stats":{"Line":0},"fn_name":null},{"line":125,"address":[593039,593563],"length":1,"stats":{"Line":0},"fn_name":null},{"line":127,"address":[590974],"length":1,"stats":{"Line":0},"fn_name":null},{"line":128,"address":[590986,592791],"length":1,"stats":{"Line":0},"fn_name":null},{"line":130,"address":[591059],"length":1,"stats":{"Line":0},"fn_name":null},{"line":131,"address":[591109,591372],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[591671,591796,591565,592217],"length":1,"stats":{"Line":0},"fn_name":null},{"line":133,"address":[591820,592222],"length":1,"stats":{"Line":0},"fn_name":null},{"line":135,"address":[591735,592313,592540],"length":1,"stats":{"Line":0},"fn_name":null},{"line":136,"address":[592488,592625],"length":1,"stats":{"Line":0},"fn_name":null},{"line":148,"address":[593696],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":149,"address":[593729],"length":1,"stats":{"Line":0},"fn_name":null},{"line":154,"address":[593885],"length":1,"stats":{"Line":0},"fn_name":null},{"line":155,"address":[593894,594041],"length":1,"stats":{"Line":0},"fn_name":null},{"line":165,"address":[594128],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":166,"address":[594161],"length":1,"stats":{"Line":0},"fn_name":null},{"line":167,"address":[594180],"length":1,"stats":{"Line":0},"fn_name":null},{"line":168,"address":[594429,594189],"length":1,"stats":{"Line":0},"fn_name":null},{"line":170,"address":[594250],"length":1,"stats":{"Line":0},"fn_name":null},{"line":171,"address":[594262],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":47},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","callable.rs"],"content":"use crate::{ast::Value, interpreter::Interpreter};\n\npub trait Callable {\n    fn arity(\u0026self, interpeter: \u0026Interpreter) -\u003e usize;\n    fn call(\u0026self, interpeter: \u0026mut Interpreter, args: Vec\u003cValue\u003e) -\u003e Result\u003cValue, String\u003e;\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","environment.rs"],"content":"//! State, Binding, Scope and name tracking.\nuse std::collections::HashMap;\n\nuse crate::{ast::Value, token::Token};\n\n#[derive(Clone, Debug)]\npub struct Environment {\n    pub parent: Option\u003cBox\u003cEnvironment\u003e\u003e,\n    pub values: HashMap\u003cString, Option\u003cValue\u003e\u003e,\n}\n\nimpl Environment {\n    pub fn new() -\u003e Environment {\n        Environment {\n            parent: None,\n            values: HashMap::new(),\n        }\n    }\n\n    pub fn from(e: Environment) -\u003e Environment {\n        Environment {\n            parent: None,\n            values: e.values.clone(),\n        }\n    }\n\n    pub fn from_ht(other: HashMap\u003cString, Option\u003cValue\u003e\u003e) -\u003e Environment {\n        Environment {\n            parent: None,\n            values: other.clone(),\n        }\n    }\n\n    pub fn with_parent(parent: Environment) -\u003e Environment {\n        Environment {\n            parent: Some(Box::new(parent)),\n            values: HashMap::new(),\n        }\n    }\n\n    pub fn from_with_parent(e: Environment, parent: Environment) -\u003e Environment {\n        Environment {\n            parent: Some(Box::new(parent)),\n            values: e.values.clone(),\n        }\n    }\n\n    pub fn from_ht_with_parent(\n        other: HashMap\u003cString, Option\u003cValue\u003e\u003e,\n        parent: Environment,\n    ) -\u003e Environment {\n        Environment {\n            parent: Some(Box::new(parent)),\n            values: other.clone(),\n        }\n    }\n\n    pub fn define(\u0026mut self, name: String, val: Option\u003cValue\u003e) {\n        self.values.insert(name, val);\n    }\n\n    pub fn get(\u0026self, name: Token) -\u003e Option\u003cValue\u003e {\n        let symbol = name.lexeme.clone();\n        match self.values.get(\u0026symbol) {\n            Some(val) =\u003e {\n                return val.clone();\n            }\n            None =\u003e {\n                return None;\n            }\n        }\n    }\n\n    pub fn assign(\u0026mut self, name: Token, val: \u0026Value) -\u003e Result\u003c(), String\u003e {\n        if self.values.contains_key(\u0026name.lexeme) {\n            self.define(name.lexeme, Some(val.clone()));\n            return Ok(());\n        } else {\n            let emsg = format!(\n                \"Error: Tried to assign value {} to undefined variable {}\",\n                name.lexeme,\n                val.clone()\n            );\n            return Err(emsg);\n        }\n    }\n\n    pub fn merge_defs(\u0026self, other: HashMap\u003cString, Option\u003cValue\u003e\u003e) -\u003e Environment {\n        let mut new = self.clone();\n        new.values.extend(other);\n        new\n    }\n\n    pub fn merge_envs(\u0026self, other: Environment) -\u003e Environment {\n        let other = other.values.clone();\n        self.merge_defs(other)\n    }\n}\n","traces":[{"line":13,"address":[864128,864231],"length":1,"stats":{"Line":0},"fn_name":"new"},{"line":16,"address":[864155],"length":1,"stats":{"Line":0},"fn_name":null},{"line":20,"address":[864256,864382],"length":1,"stats":{"Line":0},"fn_name":"from"},{"line":23,"address":[864284],"length":1,"stats":{"Line":0},"fn_name":null},{"line":27,"address":[864538,864416],"length":1,"stats":{"Line":1},"fn_name":"from_ht"},{"line":30,"address":[864449],"length":1,"stats":{"Line":1},"fn_name":null},{"line":34,"address":[864809,864560],"length":1,"stats":{"Line":0},"fn_name":"with_parent"},{"line":36,"address":[864713,864577],"length":1,"stats":{"Line":0},"fn_name":null},{"line":37,"address":[864723],"length":1,"stats":{"Line":0},"fn_name":null},{"line":41,"address":[864848,865174],"length":1,"stats":{"Line":0},"fn_name":"from_with_parent"},{"line":43,"address":[864870,865021],"length":1,"stats":{"Line":0},"fn_name":null},{"line":44,"address":[865026],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[865216,865538],"length":1,"stats":{"Line":0},"fn_name":"from_ht_with_parent"},{"line":53,"address":[865238,865389],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[865399],"length":1,"stats":{"Line":0},"fn_name":null},{"line":58,"address":[865568],"length":1,"stats":{"Line":1},"fn_name":"define"},{"line":59,"address":[865596],"length":1,"stats":{"Line":1},"fn_name":null},{"line":62,"address":[865712,865943],"length":1,"stats":{"Line":1},"fn_name":"get"},{"line":63,"address":[865749],"length":1,"stats":{"Line":1},"fn_name":null},{"line":64,"address":[865879,865770,865825],"length":1,"stats":{"Line":2},"fn_name":null},{"line":65,"address":[865896],"length":1,"stats":{"Line":1},"fn_name":null},{"line":66,"address":[865906],"length":1,"stats":{"Line":1},"fn_name":null},{"line":69,"address":[865886],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[865968,866996],"length":1,"stats":{"Line":1},"fn_name":"assign"},{"line":75,"address":[866032],"length":1,"stats":{"Line":1},"fn_name":null},{"line":76,"address":[866436,866165],"length":1,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[866427],"length":1,"stats":{"Line":1},"fn_name":null},{"line":79,"address":[866926,866476],"length":1,"stats":{"Line":0},"fn_name":null},{"line":82,"address":[866145],"length":1,"stats":{"Line":0},"fn_name":null},{"line":84,"address":[866838],"length":1,"stats":{"Line":0},"fn_name":null},{"line":88,"address":[867104,867268],"length":1,"stats":{"Line":0},"fn_name":"merge_defs"},{"line":89,"address":[867131],"length":1,"stats":{"Line":0},"fn_name":null},{"line":90,"address":[867158],"length":1,"stats":{"Line":0},"fn_name":null},{"line":94,"address":[867296,867449],"length":1,"stats":{"Line":0},"fn_name":"merge_envs"},{"line":95,"address":[867337],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[867363],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":13,"coverable":36},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","interpreter.rs"],"content":"//! A Tree Walk Interpreter for the Daemonica Language\nuse crate::ast::ASTNode;\nuse crate::ast::Expr;\nuse crate::ast::Stmt;\nuse crate::ast::Value;\nuse crate::environment::Environment;\nuse crate::literals::Literal;\nuse crate::nativefn;\nuse crate::token::Token;\nuse crate::tokentype::TokenType;\nuse crate::userfunction::UserFunction;\n\n#[derive(Debug)]\npub struct Interpreter {\n    pub environment: Environment,\n    pub retval: Option\u003cValue\u003e,\n}\n\n//impl\u003cT\u003e Visitor\u003cT\u003e for Interpreter {\nimpl Interpreter {\n    pub fn new() -\u003e Interpreter {\n        let environment = Environment::from_ht(nativefn::generate_native_functions());\n        return Interpreter {\n            environment,\n            retval: None,\n        };\n    }\n\n    pub fn interpret(\u0026mut self, nodes: Vec\u003cASTNode\u003e) -\u003e Result\u003cVec\u003cValue\u003e, String\u003e {\n        let mut results: Vec\u003cValue\u003e = Vec::new();\n        for node in nodes {\n            match node {\n                ASTNode::StmtNode(x) =\u003e match self.interpret_stmt(x) {\n                    Ok(y) =\u003e {\n                        results.push(y);\n                    }\n                    Err(y) =\u003e {\n                        println!(\"Encountered an error {}\", y);\n                        println!(\"Environment at this state was {:#?}\", self.environment);\n                        return Err(y);\n                    }\n                },\n                ASTNode::ExprNode(x) =\u003e match self.interpret_expr(x) {\n                    Ok(y) =\u003e {\n                        results.push(y);\n                    }\n                    Err(y) =\u003e {\n                        println!(\"Encountered an error {}\", y);\n                        println!(\"Environment at this state was {:#?}\", self.environment);\n                        return Err(y);\n                    }\n                },\n            }\n        }\n\n        return Ok(results);\n    }\n\n    pub fn interpret_expr(\u0026mut self, expr: Expr) -\u003e Result\u003cValue, String\u003e {\n        match expr {\n            Expr::Assign(name, value) =\u003e {\n                return self.interpret_assignment(name, *value);\n            }\n            Expr::Binary(left, oper, right) =\u003e {\n                return self.interpret_binary(*left, oper, *right);\n            }\n            Expr::Call(callee, paren, args) =\u003e self.interpret_call(*callee, paren, args),\n            Expr::Grouping(expression) =\u003e {\n                return self.interpret_expr(*expression);\n            }\n            Expr::Literal(value) =\u003e {\n                return self.interpret_literal(value);\n            }\n            Expr::Logic(left, operator, right) =\u003e {\n                return self.interpret_logical(*left, operator, *right);\n            }\n            Expr::Unary(operator, right) =\u003e {\n                return self.interpret_unary(operator, *right);\n            }\n            Expr::Variable(name) =\u003e self.interpret_var_expr(name),\n        }\n    }\n\n    pub fn interpret_stmt(\u0026mut self, stmt: Stmt) -\u003e Result\u003cValue, String\u003e {\n        match stmt {\n            Stmt::Block(stmts) =\u003e self.interpret_block(stmts, self.environment.clone()),\n            Stmt::Expression(expr) =\u003e self.interpret_expr(expr),\n            Stmt::Function(name, params, body) =\u003e self.interpret_function(name, body, params),\n            Stmt::If(cond, thenb, elseb) =\u003e self.interpret_if(cond, thenb, elseb),\n            Stmt::Return(tok, val) =\u003e self.interpret_return(tok, val),\n            Stmt::Var(tok, initializer) =\u003e self.interpret_var_stmt(tok, initializer),\n            Stmt::While(cond, body) =\u003e self.interpret_while(\u0026cond, body),\n            Stmt::Print(expr) =\u003e self.interpret_print(expr),\n        }\n    }\n\n    fn interpret_function(\n        \u0026mut self,\n        name: Token,\n        body: Vec\u003cStmt\u003e,\n        params: Vec\u003cToken\u003e,\n    ) -\u003e Result\u003cValue, String\u003e {\n        let fun = Value::UserFn(UserFunction::new(name.clone(), body, params));\n        self.environment.define(name.lexeme, Some(fun.clone()));\n        Ok(Value::Empty)\n    }\n\n    fn interpret_return(\u0026mut self, tok: Token, val: Option\u003cExpr\u003e) -\u003e Result\u003cValue, String\u003e {\n        match val {\n            Some(x) =\u003e {\n                let evaled = self.interpret_expr(x)?;\n                let val: Value = evaled.into();\n                self.retval = Some(val.clone());\n                return Ok(val.clone());\n            }\n            None =\u003e {\n                self.retval = None;\n                return Ok(Value::Empty);\n            }\n        }\n    }\n\n    fn interpret_print(\u0026mut self, expr: Expr) -\u003e Result\u003cValue, String\u003e {\n        let val = self.interpret_expr(expr)?;\n        println!(\"{}\", val);\n        return Ok(Value::Empty);\n    }\n\n    pub fn interpret_block(\u0026mut self, stmts: Vec\u003cStmt\u003e, env: Environment) -\u003e Result\u003cValue, String\u003e {\n        let prevenv = self.environment.clone();\n        self.environment = env;\n        for stmt in stmts {\n            match self.interpret_stmt(stmt) {\n                Ok(_) =\u003e {}\n                Err(x) =\u003e {\n                    self.environment = prevenv;\n                    return Err(x);\n                }\n            }\n        }\n        Ok(Value::Empty)\n    }\n\n    fn interpret_var_stmt(\n        \u0026mut self,\n        tok: Token,\n        initializer: Option\u003cExpr\u003e,\n    ) -\u003e Result\u003cValue, String\u003e {\n        let value = match initializer {\n            Some(x) =\u003e Some(self.interpret_expr(x).unwrap()),\n            None =\u003e None,\n        };\n        self.environment.define(tok.lexeme, value);\n        return Ok(Value::Empty);\n    }\n\n    fn interpret_while(\u0026mut self, cond: \u0026Expr, body: Box\u003cStmt\u003e) -\u003e Result\u003cValue, String\u003e {\n        while Interpreter::is_truthy(self.interpret_expr(cond.clone())?) {\n            self.interpret_stmt(*body.clone())?;\n        }\n        Ok(Value::Empty)\n    }\n\n    fn interpret_if(\n        \u0026mut self,\n        cond: Expr,\n        thenb: Box\u003cStmt\u003e,\n        elseb: Box\u003cOption\u003cStmt\u003e\u003e,\n    ) -\u003e Result\u003cValue, String\u003e {\n        // If our condition is truthy, evaluate the then branch\n        if Interpreter::is_truthy(self.interpret_expr(cond)?) {\n            return self.interpret_stmt(*thenb);\n        } else {\n            // If our condition is falsy, then if we have Some else branch eval\n            // that, otherwise return an empty value as we fell through.\n            match *elseb {\n                Some(elsebranch) =\u003e return self.interpret_stmt(elsebranch),\n                None =\u003e {\n                    return Ok(Value::Empty);\n                }\n            }\n        }\n    }\n\n    fn interpret_assignment(\u0026mut self, name: Token, value: Expr) -\u003e Result\u003cValue, String\u003e {\n        let val = self.interpret_expr(value)?;\n        self.environment.assign(name, \u0026val)?;\n        Ok(val)\n    }\n\n    fn interpret_binary(\u0026mut self, left: Expr, oper: Token, right: Expr) -\u003e Result\u003cValue, String\u003e {\n        let left = self.interpret_expr(left)?;\n        let right = self.interpret_expr(right)?;\n\n        let l = match left {\n            Value::Number(x) =\u003e x,\n            // String concatenation is done with + because that's what everything\n            // else uses. As such we need to handle this without tying ourselves\n            // in knots or making rustc angry about types, so we do it here.\n            Value::String(ref x) =\u003e match right {\n                Value::String(y) =\u003e {\n                    return Ok(Value::String(format!(\"{}{}\", x, y)));\n                }\n                _ =\u003e {\n                    let emsg = format!(\"Attempted to concatenate values of incompatable types. left: {:?} right {:?}\", x, left);\n                    return Err(emsg);\n                }\n            },\n            _ =\u003e {\n                let emsg = format!(\"Attempted to apply a binary operation {:?} to {:?} and {:?} but lvalue ({:?}) is not a number!\",\n                                   oper, left, right, left);\n                return Err(emsg);\n            }\n        };\n\n        let r = match right {\n            Value::Number(x) =\u003e x,\n            _ =\u003e {\n                let emsg = format!(\"Attempted to apply a binary operation {:?} to {:?} and {:?} but rvalue ({:?}) is not a number!\",\n                                   oper, left, right, right);\n                return Err(emsg);\n            }\n        };\n\n        match oper.ttype {\n            TokenType::Minus =\u003e {\n                return Ok(Value::Number(l - r));\n            }\n            TokenType::Slash =\u003e {\n                if l == 0.0 || r == 0.0 {\n                    let emsg =\n                        format!(\"Attempted to divide by zero!. Expression was {} / {}\", l, r);\n                    return Err(emsg);\n                } else {\n                    return Ok(Value::Number(l / r));\n                }\n            }\n            TokenType::Star =\u003e {\n                return Ok(Value::Number(l * r));\n            }\n            TokenType::Plus =\u003e {\n                return Ok(Value::Number(l + r));\n            }\n            TokenType::EqualEqual =\u003e {\n                return Ok(Value::Bool(self.is_equal(left, right)));\n            }\n            TokenType::BangEqual =\u003e {\n                return Ok(Value::Bool(!self.is_equal(left, right)));\n            }\n            TokenType::Greater =\u003e {\n                return Ok(Value::Bool(l \u003e r));\n            }\n            TokenType::GreaterEqual =\u003e {\n                return Ok(Value::Bool(l \u003e= r));\n            }\n            TokenType::Less =\u003e {\n                return Ok(Value::Bool(l \u003c r));\n            }\n            TokenType::LessEqual =\u003e {\n                return Ok(Value::Bool(l \u003c= r));\n            }\n            _ =\u003e {\n                let msg = format!(\n                    \"Attempted to evaluate an invalid binary expression. {:?} {:?} {:?}\",\n                    left, oper, right\n                );\n                return Err(msg);\n            }\n        }\n    }\n\n    /// Interprets function calls.\n    /// Any returned Value will be evaluated as an RHS in the case of a variable\n    /// definition statement.\n    ///\n    /// # Example\n    /// ```\n    /// ligamen a = horologium();\n    /// scribo a;\n    /// ```\n    /// In this case, a will contain the current unix time stamp.\n    fn interpret_call(\n        \u0026mut self,\n        callee: Expr,\n        _paren: Token,\n        args: Vec\u003cExpr\u003e,\n    ) -\u003e Result\u003cValue, String\u003e {\n        let evaled = match callee {\n            Expr::Variable(ref v) =\u003e match self.environment.get(v.clone()) {\n                Some(f) =\u003e f,\n                None =\u003e {\n                    let emsg = format!(\"Tried to call undefined function {}\", v.lexeme);\n                    return Err(emsg);\n                }\n            },\n            _ =\u003e {\n                let emsg = format!(\n                    \"Tried to call {} as a function, when it is a {}.\",\n                    callee.clone(),\n                    callee\n                );\n                return Err(emsg);\n            }\n        };\n        let mut evaledArgs: Vec\u003cValue\u003e = Vec::new();\n        for arg in args {\n            evaledArgs.push(self.interpret_expr(arg)?);\n        }\n        match evaled {\n            Value::NativeFn(f) =\u003e match f.call(self, evaledArgs) {\n                Ok(retval) =\u003e {\n                    //dbg!(self.environment.clone());\n                    self.retval = retval.clone();\n                    match retval {\n                        Some(rv) =\u003e {\n                            return Ok(rv)\n                        },\n                        None =\u003e {\n                            return Ok(Value::Empty)\n                        },\n                    }\n                }\n                Err(e) =\u003e {\n                    return Err(e);\n                }\n            },\n            Value::UserFn(f) =\u003e match f.call(self, evaledArgs) {\n                Ok((mutated, retval)) =\u003e {\n                    self.environment = mutated;\n                    self.retval = retval.clone();\n                    match retval {\n                        Some(rv) =\u003e {\n                            return Ok(rv);\n                        }\n                        None =\u003e {\n                            return Ok(Value::Empty);\n                        }\n                    }\n                }\n                Err(failure) =\u003e {\n                    let emsg = failure.1;\n                    return Err(emsg);\n                }\n            },\n            _ =\u003e {\n                let emsg = format!(\n                    \"{} is neither a function, nor a language construct, it is a {}\",\n                    callee, evaled\n                );\n                return Err(emsg);\n            }\n        }\n    }\n\n    fn interpret_literal(\u0026mut self, value: Literal) -\u003e Result\u003cValue, String\u003e {\n        match value {\n            Literal::Number(x) =\u003e Ok(Value::Number(x)),\n            Literal::StrLit(x) =\u003e Ok(Value::String(x)),\n            Literal::Bool(x) =\u003e Ok(Value::Bool(x)),\n            Literal::Empty =\u003e Ok(Value::Empty),\n        }\n    }\n\n    fn interpret_logical(\n        \u0026mut self,\n        left: Expr,\n        operator: Token,\n        right: Expr,\n    ) -\u003e Result\u003cValue, String\u003e {\n        let left = self.interpret_expr(left)?;\n\n        // If we can short-circuit, then do.\n        match operator.ttype {\n            TokenType::Or =\u003e {\n                if Interpreter::is_truthy(left.clone()) {\n                    return Ok(left);\n                } else if !Interpreter::is_truthy(left.clone()) {\n                    return Ok(left);\n                }\n            }\n            TokenType::And =\u003e {\n                if Interpreter::is_truthy(left.clone()) {\n                    return Ok(left);\n                } else {\n                    return Ok(self.interpret_expr(right)?);\n                }\n            }\n            _ =\u003e {}\n        }\n        self.interpret_expr(right)\n    }\n\n    fn interpret_unary(\u0026mut self, operator: Token, right: Expr) -\u003e Result\u003cValue, String\u003e {\n        // Evaluate the operand that we are applying the operator too.\n        let evaledright = self.interpret_expr(right.clone())?;\n\n        // Match the token type of the operator so we know what kind of maths\n        // we need to apply.\n        match operator.ttype {\n            TokenType::Minus =\u003e {\n                match evaledright {\n                    Value::Number(x) =\u003e {\n                        return Ok(Value::Number(-x));\n                    }\n                    _ =\u003e {\n                        // If we somehow got to the point where a unary oper\n                        // is being applied to something other than a number we should\n                        // probably let the user know and be scared.\n                        //let emsg = format!(\"Attempted to interpret a unary operation with the invalid operator {:?}\", operator);\n                        let emsg = format!(\"Attempted to apply unary operator '{}' to expression {}, which is invalid.\", operator.lexeme, right);\n                        return Err(emsg);\n                    }\n                }\n            }\n            TokenType::Bang =\u003e {\n                match evaledright {\n                    // We take our truthyness and falsyness from ruby.\n                    // False and Empty are falsy, everything else is truthy.\n                    Value::Empty =\u003e {\n                        // Empty is fals-y so eval it to true\n                        return Ok(Value::Bool(true));\n                    }\n                    Value::Bool(x) =\u003e {\n                        // If the value we evaluated earlier is a boolean\n                        // then negate that\n                        return Ok(Value::Bool(!x));\n                    }\n                    _ =\u003e {\n                        // Anything other than Empty or Bool::False is truthy\n                        // so our negation is false.\n                        return Ok(Value::Bool(false));\n                    }\n                }\n            }\n            _ =\u003e {\n                let errormsg = format!(\n                    \"Attempted to interpret unary operation with expr {:?}\",\n                    right.clone()\n                );\n                return Err(errormsg);\n            }\n        }\n    }\n\n    fn interpret_var_expr(\u0026mut self, name: Token) -\u003e Result\u003cValue, String\u003e {\n        match self.environment.get(name.clone()) {\n            Some(x) =\u003e {\n                return Ok(x);\n            }\n            None =\u003e {\n                dbg!(self.environment.clone());\n                let emsg = format!(\n                    \"Tried to access undefined variable with the name {}\",\n                    name.lexeme.clone()\n                );\n                return Err(emsg);\n            }\n        }\n    }\n\n    fn is_equal(\u0026mut self, lv: Value, rv: Value) -\u003e bool {\n        if lv == Value::Empty \u0026\u0026 rv == Value::Empty {\n            return true;\n        }\n        if lv == Value::Empty {\n            return false;\n        }\n        return lv == rv;\n    }\n\n    // Assoc functions. We dont need to take self for these so, we'll avoid\n    // the java-ism of making them methods.\n\n    /// Truthyness is wheater a value is treated as true, or false.\n    /// Booleans evaluate to themselves, Empty types are false, everything\n    /// else is truth-y. This is shamelessly inspired by how our zen masters\n    /// ruby do this.\n    fn is_truthy(val: Value) -\u003e bool {\n        match val {\n            // The truthyness of a bool is itself.\n            Value::Bool(x) =\u003e {\n                return x;\n            }\n            // Empty types are fals-y\n            Value::Empty =\u003e {\n                return false;\n            }\n            // All other types are truthy.\n            _ =\u003e {\n                return true;\n            }\n        }\n    }\n}\n\nimpl Default for Interpreter {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::Interpreter;\n    use super::Value;\n    use super::*;\n    use crate::ast::ASTNode;\n    use crate::environment::Environment;\n    use crate::parser::Parser;\n    use crate::scanner::*;\n    use crate::token::*;\n\n    #[test]\n    fn addition_test() {\n        let test_str: String = \"5 + 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Number(15.0);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn subtraction_test() {\n        let test_str: String = \"10 - 5;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Number(5.0);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn multiplication_test() {\n        let test_str: String = \"3 * 5;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Number(15.0);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn division_test() {\n        let test_str: String = \"100 / 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Number(10.0);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn string_concat() {\n        let test_str: String = \"\\\"Hello, \\\" + \\\"World!\\\";\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::String(\"Hello, World!\".to_string());\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn equality() {\n        let test_str: String = \"10 == 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(true);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn inequality() {\n        let test_str: String = \"100 != 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(true);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn gt() {\n        let test_str: String = \"100 \u003e 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(true);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn geq() {\n        let test_str: String = \"10 \u003e= 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(true);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn lt() {\n        let test_str: String = \"100 \u003c 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(false);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn leq() {\n        let test_str: String = \"10 \u003c= 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(true);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn bind_test() {\n        let test = String::from(\n            r#\"\n          ligamen testVal = 1337;\n        \"#,\n        );\n        let parsed = process(test);\n        let env = eval_and_extract_state(parsed);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            3,\n        );\n        let expected = Value::Number(1337.0);\n        assert!(env.get(symbol).unwrap() == expected);\n    }\n\n    #[test]\n    fn shadow_test() {\n        let test = String::from(\n            r#\"\n          ligamen testVal = \"BAD\";\n          ligamen testVal = 1337;\n        \"#,\n        );\n        let parsed = process(test);\n        let env = eval_and_extract_state(parsed);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            3,\n        );\n        let expected = Value::Number(1337.0);\n        assert!(env.get(symbol).unwrap() == expected);\n    }\n\n    #[test]\n    fn globals() {\n        let test: String = String::from(\n            r#\"ligamen testVal = 0;\n        incantatio fun() {\n          testVal = 1337;\n        }\n        fun();\"#,\n        );\n        let parsed = process(test);\n        let env = eval_and_extract_state(parsed);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            3,\n        );\n        let expected = Value::Number(1337.0);\n        assert!(env.get(symbol).unwrap() == expected);\n    }\n\n    #[test]\n    fn assignment_test() {\n        let test = String::from(\n            r#\"\n          ligamen testVal = 0;\n          testVal = 1337;\n        \"#,\n        );\n        let parsed = process(test);\n        let env = eval_and_extract_state(parsed);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            3,\n        );\n        let expected = Value::Number(1337.0);\n        assert!(env.get(symbol).unwrap() == expected);\n    }\n\n    #[test]\n    fn fundef() {\n        let test: String = String::from(\n            r#\"incantatio fun() {\n          \"Hi\";\n        }\"#,\n        );\n        let parsed = process(test);\n        let env = eval_and_extract_state(parsed);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"fun\"),\n            Literal::Empty,\n            1,\n        );\n        let result = env.get(symbol.clone());\n        let expected = Some(Value::UserFn(UserFunction::new(\n            symbol,\n            vec![Stmt::Expression(Expr::Literal(Literal::StrLit(\n                String::from(\"Hi\"),\n            )))],\n            vec![],\n        )));\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn bool_and() {\n        let test = String::from(\"ligamen testVal = verum et verum;\");\n        let parsed = process(test);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            1,\n        );\n        let expected = eval_and_expect(parsed, Some(Value::Bool(true)), symbol);\n        assert!(expected == true);\n    }\n\n    #[test]\n    fn bool_or() {\n        let test = String::from(\"ligamen testVal = verum vel verum;\");\n        let parsed = process(test);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            1,\n        );\n        let expected = eval_and_expect(parsed, Some(Value::Bool(true)), symbol);\n        assert!(expected == true);\n    }\n\n    #[test]\n    fn truthynes_numbers() {\n        let test = String::from(\"ligamen a = verum; ligamen b = 5; ligamen testVal = ( a et b );\");\n        let parsed = process(test);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            1,\n        );\n        let expected = eval_and_expect(parsed, Some(Value::Bool(true)), symbol);\n        assert!(expected == true);\n    }\n\n    #[test]\n    fn truthynes_strings() {\n        let test =\n            String::from(\"ligamen a = verum; ligamen b = \\\"hi\\\"; ligamen testVal = ( a et b );\");\n        let parsed = process(test);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            1,\n        );\n        let expected = eval_and_expect(parsed, Some(Value::Bool(true)), symbol);\n        assert!(expected == true);\n    }\n\n    fn process(testcase: String) -\u003e Vec\u003cASTNode\u003e {\n        let lexed = Scanner::scan(testcase);\n        Parser::parse(lexed)\n    }\n\n    fn extract_retval(ast: Vec\u003cASTNode\u003e) -\u003e Value {\n        let mut i: Interpreter = Interpreter::new();\n        i.interpret(ast).unwrap().get(0).unwrap().clone()\n    }\n\n    fn eval_and_extract_state(ast: Vec\u003cASTNode\u003e) -\u003e Environment {\n        let mut i: Interpreter = Interpreter::new();\n        let x = i.interpret(ast);\n        dbg!(i.environment.clone());\n        println!(\"{:?}\", x);\n        i.environment\n    }\n\n    fn eval_and_expect(ast: Vec\u003cASTNode\u003e, expected: Option\u003cValue\u003e, symb: Token) -\u003e bool {\n        let state = eval_and_extract_state(ast);\n        state.get(symb) == expected\n    }\n}\n","traces":[{"line":21,"address":[618928],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":22,"address":[618945],"length":1,"stats":{"Line":1},"fn_name":null},{"line":23,"address":[619006],"length":1,"stats":{"Line":1},"fn_name":null},{"line":24,"address":[618970],"length":1,"stats":{"Line":1},"fn_name":null},{"line":25,"address":[618998],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[621753,619072],"length":1,"stats":{"Line":1},"fn_name":"interpret"},{"line":30,"address":[619116],"length":1,"stats":{"Line":1},"fn_name":null},{"line":31,"address":[619160,619382,619903,619263,620716,620750],"length":1,"stats":{"Line":4},"fn_name":null},{"line":32,"address":[619500],"length":1,"stats":{"Line":1},"fn_name":null},{"line":33,"address":[619930,619780],"length":1,"stats":{"Line":1},"fn_name":null},{"line":34,"address":[619932],"length":1,"stats":{"Line":1},"fn_name":null},{"line":35,"address":[620060],"length":1,"stats":{"Line":1},"fn_name":null},{"line":37,"address":[620214],"length":1,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[620414,620254],"length":1,"stats":{"Line":0},"fn_name":null},{"line":39,"address":[620441],"length":1,"stats":{"Line":0},"fn_name":null},{"line":40,"address":[620610],"length":1,"stats":{"Line":0},"fn_name":null},{"line":43,"address":[620755,619530],"length":1,"stats":{"Line":0},"fn_name":null},{"line":44,"address":[620777],"length":1,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[620905],"length":1,"stats":{"Line":0},"fn_name":null},{"line":47,"address":[621059],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[621099,621259],"length":1,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[621286],"length":1,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[621455],"length":1,"stats":{"Line":0},"fn_name":null},{"line":56,"address":[621610],"length":1,"stats":{"Line":1},"fn_name":null},{"line":59,"address":[621792,623939],"length":1,"stats":{"Line":1},"fn_name":"interpret_expr"},{"line":60,"address":[621827],"length":1,"stats":{"Line":1},"fn_name":null},{"line":61,"address":[621873],"length":1,"stats":{"Line":1},"fn_name":null},{"line":62,"address":[621947],"length":1,"stats":{"Line":1},"fn_name":null},{"line":64,"address":[622148],"length":1,"stats":{"Line":1},"fn_name":null},{"line":65,"address":[622242],"length":1,"stats":{"Line":1},"fn_name":null},{"line":67,"address":[622537,624080],"length":1,"stats":{"Line":2},"fn_name":null},{"line":68,"address":[622882],"length":1,"stats":{"Line":1},"fn_name":null},{"line":69,"address":[622899],"length":1,"stats":{"Line":1},"fn_name":null},{"line":71,"address":[623015],"length":1,"stats":{"Line":1},"fn_name":null},{"line":72,"address":[623063],"length":1,"stats":{"Line":1},"fn_name":null},{"line":74,"address":[623160],"length":1,"stats":{"Line":1},"fn_name":null},{"line":75,"address":[623254],"length":1,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[623549],"length":1,"stats":{"Line":0},"fn_name":null},{"line":78,"address":[623626],"length":1,"stats":{"Line":0},"fn_name":null},{"line":80,"address":[623817],"length":1,"stats":{"Line":1},"fn_name":null},{"line":84,"address":[624272,625452],"length":1,"stats":{"Line":1},"fn_name":"interpret_stmt"},{"line":85,"address":[624307],"length":1,"stats":{"Line":1},"fn_name":null},{"line":86,"address":[624356,625477],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[624422],"length":1,"stats":{"Line":1},"fn_name":null},{"line":88,"address":[624503],"length":1,"stats":{"Line":1},"fn_name":null},{"line":89,"address":[624773],"length":1,"stats":{"Line":0},"fn_name":null},{"line":90,"address":[624906],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[625048],"length":1,"stats":{"Line":1},"fn_name":null},{"line":92,"address":[625200,625400],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[625316],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[625568,626504],"length":1,"stats":{"Line":1},"fn_name":"interpret_function"},{"line":103,"address":[625621,625854],"length":1,"stats":{"Line":2},"fn_name":null},{"line":104,"address":[626395,625980],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[626257],"length":1,"stats":{"Line":1},"fn_name":null},{"line":108,"address":[628193,626544],"length":1,"stats":{"Line":0},"fn_name":"interpret_return"},{"line":109,"address":[626584],"length":1,"stats":{"Line":0},"fn_name":null},{"line":110,"address":[626650],"length":1,"stats":{"Line":0},"fn_name":null},{"line":111,"address":[627429,627348,626898,626718],"length":1,"stats":{"Line":0},"fn_name":null},{"line":112,"address":[627184],"length":1,"stats":{"Line":0},"fn_name":null},{"line":113,"address":[627485,627855,627722,627538],"length":1,"stats":{"Line":0},"fn_name":null},{"line":114,"address":[627843,627909],"length":1,"stats":{"Line":0},"fn_name":null},{"line":117,"address":[626618,628144,628068],"length":1,"stats":{"Line":0},"fn_name":null},{"line":118,"address":[628095],"length":1,"stats":{"Line":0},"fn_name":null},{"line":123,"address":[628224,628960],"length":1,"stats":{"Line":0},"fn_name":"interpret_print"},{"line":124,"address":[628267,628655],"length":1,"stats":{"Line":0},"fn_name":null},{"line":125,"address":[628600,628788,628879],"length":1,"stats":{"Line":0},"fn_name":null},{"line":126,"address":[628903],"length":1,"stats":{"Line":0},"fn_name":null},{"line":129,"address":[630306,628976],"length":1,"stats":{"Line":1},"fn_name":"interpret_block"},{"line":130,"address":[629016],"length":1,"stats":{"Line":1},"fn_name":null},{"line":131,"address":[629305,629199,629086],"length":1,"stats":{"Line":2},"fn_name":null},{"line":132,"address":[629366,630106,629246,630063,629676],"length":1,"stats":{"Line":3},"fn_name":null},{"line":133,"address":[629632,629703],"length":1,"stats":{"Line":1},"fn_name":null},{"line":135,"address":[629730],"length":1,"stats":{"Line":0},"fn_name":null},{"line":136,"address":[629762,629966],"length":1,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[629857],"length":1,"stats":{"Line":0},"fn_name":null},{"line":141,"address":[630131],"length":1,"stats":{"Line":1},"fn_name":null},{"line":144,"address":[630336,631014],"length":1,"stats":{"Line":1},"fn_name":"interpret_var_stmt"},{"line":149,"address":[630376],"length":1,"stats":{"Line":1},"fn_name":null},{"line":150,"address":[630722,630433],"length":1,"stats":{"Line":2},"fn_name":null},{"line":151,"address":[630413],"length":1,"stats":{"Line":0},"fn_name":null},{"line":153,"address":[630755],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[630927],"length":1,"stats":{"Line":1},"fn_name":null},{"line":157,"address":[632278,631056],"length":1,"stats":{"Line":0},"fn_name":"interpret_while"},{"line":158,"address":[631629,631583,631205,631117,632293],"length":1,"stats":{"Line":0},"fn_name":null},{"line":159,"address":[631702,632271],"length":1,"stats":{"Line":0},"fn_name":null},{"line":161,"address":[631640],"length":1,"stats":{"Line":0},"fn_name":null},{"line":164,"address":[633431,632304],"length":1,"stats":{"Line":0},"fn_name":"interpret_if"},{"line":171,"address":[632360,632962,632585,633035],"length":1,"stats":{"Line":0},"fn_name":null},{"line":172,"address":[633070],"length":1,"stats":{"Line":0},"fn_name":null},{"line":176,"address":[633132,633046],"length":1,"stats":{"Line":0},"fn_name":null},{"line":177,"address":[633191],"length":1,"stats":{"Line":0},"fn_name":null},{"line":179,"address":[633139],"length":1,"stats":{"Line":0},"fn_name":null},{"line":185,"address":[633536,634533],"length":1,"stats":{"Line":1},"fn_name":"interpret_assignment"},{"line":186,"address":[633570,633756,634209,634128],"length":1,"stats":{"Line":2},"fn_name":null},{"line":187,"address":[634412,634271,634315,634506,634025],"length":1,"stats":{"Line":3},"fn_name":null},{"line":188,"address":[634340],"length":1,"stats":{"Line":1},"fn_name":null},{"line":191,"address":[634592,641420],"length":1,"stats":{"Line":1},"fn_name":"interpret_binary"},{"line":192,"address":[635290,634653,634863,635371],"length":1,"stats":{"Line":2},"fn_name":null},{"line":193,"address":[635165,635841,635441,635922,635489],"length":1,"stats":{"Line":3},"fn_name":null},{"line":195,"address":[635783],"length":1,"stats":{"Line":1},"fn_name":null},{"line":196,"address":[636110],"length":1,"stats":{"Line":1},"fn_name":null},{"line":200,"address":[636160],"length":1,"stats":{"Line":1},"fn_name":null},{"line":201,"address":[636816],"length":1,"stats":{"Line":1},"fn_name":null},{"line":202,"address":[637463,637570,636864],"length":1,"stats":{"Line":3},"fn_name":null},{"line":205,"address":[636973],"length":1,"stats":{"Line":0},"fn_name":null},{"line":206,"address":[637327],"length":1,"stats":{"Line":0},"fn_name":null},{"line":210,"address":[636346,636235,635992],"length":1,"stats":{"Line":0},"fn_name":null},{"line":212,"address":[636706],"length":1,"stats":{"Line":0},"fn_name":null},{"line":216,"address":[636137],"length":1,"stats":{"Line":1},"fn_name":null},{"line":217,"address":[637881],"length":1,"stats":{"Line":1},"fn_name":null},{"line":219,"address":[637966],"length":1,"stats":{"Line":0},"fn_name":null},{"line":221,"address":[638546],"length":1,"stats":{"Line":0},"fn_name":null},{"line":225,"address":[637908],"length":1,"stats":{"Line":1},"fn_name":null},{"line":227,"address":[638771],"length":1,"stats":{"Line":1},"fn_name":null},{"line":230,"address":[638933,640609],"length":1,"stats":{"Line":2},"fn_name":null},{"line":231,"address":[640755],"length":1,"stats":{"Line":0},"fn_name":null},{"line":233,"address":[641063],"length":1,"stats":{"Line":0},"fn_name":null},{"line":235,"address":[640670],"length":1,"stats":{"Line":1},"fn_name":null},{"line":239,"address":[638974],"length":1,"stats":{"Line":1},"fn_name":null},{"line":242,"address":[638856],"length":1,"stats":{"Line":1},"fn_name":null},{"line":245,"address":[640474,639380],"length":1,"stats":{"Line":2},"fn_name":null},{"line":248,"address":[639059,640548],"length":1,"stats":{"Line":2},"fn_name":null},{"line":251,"address":[639789],"length":1,"stats":{"Line":1},"fn_name":null},{"line":254,"address":[639701],"length":1,"stats":{"Line":1},"fn_name":null},{"line":257,"address":[639877],"length":1,"stats":{"Line":1},"fn_name":null},{"line":260,"address":[639969],"length":1,"stats":{"Line":1},"fn_name":null},{"line":263,"address":[640079,638658],"length":1,"stats":{"Line":0},"fn_name":null},{"line":267,"address":[640363],"length":1,"stats":{"Line":0},"fn_name":null},{"line":282,"address":[647178,641456],"length":1,"stats":{"Line":1},"fn_name":"interpret_call"},{"line":288,"address":[641525],"length":1,"stats":{"Line":1},"fn_name":null},{"line":289,"address":[641587,642284],"length":1,"stats":{"Line":2},"fn_name":null},{"line":290,"address":[642377],"length":1,"stats":{"Line":1},"fn_name":null},{"line":292,"address":[642322,646783,646865],"length":1,"stats":{"Line":0},"fn_name":null},{"line":293,"address":[646948],"length":1,"stats":{"Line":0},"fn_name":null},{"line":297,"address":[641672,642184,641833],"length":1,"stats":{"Line":0},"fn_name":null},{"line":299,"address":[641649],"length":1,"stats":{"Line":0},"fn_name":null},{"line":302,"address":[642091],"length":1,"stats":{"Line":0},"fn_name":null},{"line":305,"address":[642657],"length":1,"stats":{"Line":1},"fn_name":null},{"line":306,"address":[642672,643769,643290,642924,643716,642801],"length":1,"stats":{"Line":3},"fn_name":null},{"line":307,"address":[643317,643723,643132],"length":1,"stats":{"Line":0},"fn_name":null},{"line":309,"address":[643774],"length":1,"stats":{"Line":1},"fn_name":null},{"line":310,"address":[645721,645781,643916],"length":1,"stats":{"Line":0},"fn_name":null},{"line":311,"address":[645783],"length":1,"stats":{"Line":0},"fn_name":null},{"line":313,"address":[646110,645927,646169,646303],"length":1,"stats":{"Line":0},"fn_name":null},{"line":314,"address":[646274,646357],"length":1,"stats":{"Line":0},"fn_name":null},{"line":315,"address":[646414],"length":1,"stats":{"Line":0},"fn_name":null},{"line":316,"address":[646440],"length":1,"stats":{"Line":0},"fn_name":null},{"line":319,"address":[646367],"length":1,"stats":{"Line":0},"fn_name":null},{"line":323,"address":[645945],"length":1,"stats":{"Line":0},"fn_name":null},{"line":324,"address":[645993],"length":1,"stats":{"Line":0},"fn_name":null},{"line":327,"address":[644054,644583,644643],"length":1,"stats":{"Line":2},"fn_name":null},{"line":328,"address":[644653],"length":1,"stats":{"Line":1},"fn_name":null},{"line":329,"address":[644845,645172,645250],"length":1,"stats":{"Line":2},"fn_name":null},{"line":330,"address":[645493,645318,645235],"length":1,"stats":{"Line":2},"fn_name":null},{"line":331,"address":[645464,645542],"length":1,"stats":{"Line":1},"fn_name":null},{"line":332,"address":[645599],"length":1,"stats":{"Line":0},"fn_name":null},{"line":333,"address":[645625],"length":1,"stats":{"Line":0},"fn_name":null},{"line":336,"address":[645552],"length":1,"stats":{"Line":1},"fn_name":null},{"line":340,"address":[644927],"length":1,"stats":{"Line":0},"fn_name":null},{"line":341,"address":[645007],"length":1,"stats":{"Line":0},"fn_name":null},{"line":342,"address":[645039],"length":1,"stats":{"Line":0},"fn_name":null},{"line":346,"address":[643820,644289],"length":1,"stats":{"Line":0},"fn_name":null},{"line":350,"address":[644487],"length":1,"stats":{"Line":0},"fn_name":null},{"line":355,"address":[647216],"length":1,"stats":{"Line":1},"fn_name":"interpret_literal"},{"line":356,"address":[647245],"length":1,"stats":{"Line":1},"fn_name":null},{"line":357,"address":[647285],"length":1,"stats":{"Line":1},"fn_name":null},{"line":358,"address":[647355],"length":1,"stats":{"Line":1},"fn_name":null},{"line":359,"address":[647540],"length":1,"stats":{"Line":1},"fn_name":null},{"line":360,"address":[647613],"length":1,"stats":{"Line":0},"fn_name":null},{"line":364,"address":[647680,649438],"length":1,"stats":{"Line":1},"fn_name":"interpret_logical"},{"line":370,"address":[648320,647720,648239,647914],"length":1,"stats":{"Line":2},"fn_name":null},{"line":373,"address":[648193],"length":1,"stats":{"Line":1},"fn_name":null},{"line":375,"address":[648601,648534],"length":1,"stats":{"Line":2},"fn_name":null},{"line":376,"address":[648627],"length":1,"stats":{"Line":1},"fn_name":null},{"line":377,"address":[648724,648620],"length":1,"stats":{"Line":0},"fn_name":null},{"line":378,"address":[648750],"length":1,"stats":{"Line":0},"fn_name":null},{"line":382,"address":[648873,648511],"length":1,"stats":{"Line":2},"fn_name":null},{"line":383,"address":[649018],"length":1,"stats":{"Line":1},"fn_name":null},{"line":385,"address":[648904,649109],"length":1,"stats":{"Line":0},"fn_name":null},{"line":390,"address":[648389],"length":1,"stats":{"Line":0},"fn_name":null},{"line":393,"address":[649456,651346],"length":1,"stats":{"Line":0},"fn_name":"interpret_unary"},{"line":395,"address":[649936,650017,649512,649600],"length":1,"stats":{"Line":0},"fn_name":null},{"line":399,"address":[649890],"length":1,"stats":{"Line":0},"fn_name":null},{"line":401,"address":[650079],"length":1,"stats":{"Line":0},"fn_name":null},{"line":402,"address":[650796],"length":1,"stats":{"Line":0},"fn_name":null},{"line":403,"address":[650814],"length":1,"stats":{"Line":0},"fn_name":null},{"line":410,"address":[650903],"length":1,"stats":{"Line":0},"fn_name":null},{"line":411,"address":[651204],"length":1,"stats":{"Line":0},"fn_name":null},{"line":416,"address":[650102],"length":1,"stats":{"Line":0},"fn_name":null},{"line":421,"address":[650736],"length":1,"stats":{"Line":0},"fn_name":null},{"line":423,"address":[650654],"length":1,"stats":{"Line":0},"fn_name":null},{"line":426,"address":[650673],"length":1,"stats":{"Line":0},"fn_name":null},{"line":431,"address":[650597],"length":1,"stats":{"Line":0},"fn_name":null},{"line":436,"address":[650533,650155,650253],"length":1,"stats":{"Line":0},"fn_name":null},{"line":438,"address":[650072],"length":1,"stats":{"Line":0},"fn_name":null},{"line":440,"address":[650440],"length":1,"stats":{"Line":0},"fn_name":null},{"line":445,"address":[652840,651376],"length":1,"stats":{"Line":1},"fn_name":"interpret_var_expr"},{"line":446,"address":[651450,651528],"length":1,"stats":{"Line":2},"fn_name":null},{"line":447,"address":[651574],"length":1,"stats":{"Line":1},"fn_name":null},{"line":448,"address":[651600],"length":1,"stats":{"Line":1},"fn_name":null},{"line":451,"address":[651957,651567,651689],"length":1,"stats":{"Line":0},"fn_name":null},{"line":452,"address":[652443,652799],"length":1,"stats":{"Line":0},"fn_name":null},{"line":454,"address":[652416],"length":1,"stats":{"Line":0},"fn_name":null},{"line":456,"address":[652703],"length":1,"stats":{"Line":0},"fn_name":null},{"line":461,"address":[652880,653148],"length":1,"stats":{"Line":1},"fn_name":"is_equal"},{"line":462,"address":[652912,652971],"length":1,"stats":{"Line":2},"fn_name":null},{"line":463,"address":[653041],"length":1,"stats":{"Line":0},"fn_name":null},{"line":465,"address":[653023,653062],"length":1,"stats":{"Line":2},"fn_name":null},{"line":466,"address":[653089],"length":1,"stats":{"Line":0},"fn_name":null},{"line":468,"address":[653078,653100],"length":1,"stats":{"Line":2},"fn_name":null},{"line":478,"address":[653184],"length":1,"stats":{"Line":1},"fn_name":"is_truthy"},{"line":479,"address":[653192],"length":1,"stats":{"Line":1},"fn_name":null},{"line":481,"address":[653232],"length":1,"stats":{"Line":1},"fn_name":null},{"line":482,"address":[653244],"length":1,"stats":{"Line":1},"fn_name":null},{"line":486,"address":[653252],"length":1,"stats":{"Line":0},"fn_name":null},{"line":490,"address":[653221],"length":1,"stats":{"Line":0},"fn_name":null},{"line":497,"address":[653280],"length":1,"stats":{"Line":0},"fn_name":"default"},{"line":498,"address":[653288],"length":1,"stats":{"Line":0},"fn_name":null},{"line":514,"address":[586976,586981],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":515,"address":[657511],"length":1,"stats":{"Line":1},"fn_name":null},{"line":516,"address":[657533],"length":1,"stats":{"Line":1},"fn_name":null},{"line":517,"address":[657578],"length":1,"stats":{"Line":1},"fn_name":null},{"line":518,"address":[657645],"length":1,"stats":{"Line":1},"fn_name":null},{"line":519,"address":[657749,657674],"length":1,"stats":{"Line":1},"fn_name":null},{"line":523,"address":[587008,587013],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":524,"address":[657863],"length":1,"stats":{"Line":1},"fn_name":null},{"line":525,"address":[657885],"length":1,"stats":{"Line":1},"fn_name":null},{"line":526,"address":[657930],"length":1,"stats":{"Line":1},"fn_name":null},{"line":527,"address":[657997],"length":1,"stats":{"Line":1},"fn_name":null},{"line":528,"address":[658101,658026],"length":1,"stats":{"Line":1},"fn_name":null},{"line":532,"address":[587045,587040],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":533,"address":[658215],"length":1,"stats":{"Line":1},"fn_name":null},{"line":534,"address":[658237],"length":1,"stats":{"Line":1},"fn_name":null},{"line":535,"address":[658282],"length":1,"stats":{"Line":1},"fn_name":null},{"line":536,"address":[658349],"length":1,"stats":{"Line":1},"fn_name":null},{"line":537,"address":[658453,658378],"length":1,"stats":{"Line":1},"fn_name":null},{"line":541,"address":[587072,587077],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":542,"address":[658567],"length":1,"stats":{"Line":1},"fn_name":null},{"line":543,"address":[658589],"length":1,"stats":{"Line":1},"fn_name":null},{"line":544,"address":[658634],"length":1,"stats":{"Line":1},"fn_name":null},{"line":545,"address":[658701],"length":1,"stats":{"Line":1},"fn_name":null},{"line":546,"address":[658730,658805],"length":1,"stats":{"Line":1},"fn_name":null},{"line":550,"address":[587104,587109],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":551,"address":[658919],"length":1,"stats":{"Line":1},"fn_name":null},{"line":552,"address":[658941],"length":1,"stats":{"Line":1},"fn_name":null},{"line":553,"address":[658986],"length":1,"stats":{"Line":1},"fn_name":null},{"line":554,"address":[659043],"length":1,"stats":{"Line":1},"fn_name":null},{"line":555,"address":[659235,659123,659175],"length":1,"stats":{"Line":2},"fn_name":null},{"line":559,"address":[587141,587136],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":560,"address":[659319],"length":1,"stats":{"Line":1},"fn_name":null},{"line":561,"address":[659341],"length":1,"stats":{"Line":1},"fn_name":null},{"line":562,"address":[659386],"length":1,"stats":{"Line":1},"fn_name":null},{"line":563,"address":[659443],"length":1,"stats":{"Line":1},"fn_name":null},{"line":564,"address":[659547,659472],"length":1,"stats":{"Line":1},"fn_name":null},{"line":568,"address":[587173,587168],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":569,"address":[659655],"length":1,"stats":{"Line":1},"fn_name":null},{"line":570,"address":[659677],"length":1,"stats":{"Line":1},"fn_name":null},{"line":571,"address":[659722],"length":1,"stats":{"Line":1},"fn_name":null},{"line":572,"address":[659779],"length":1,"stats":{"Line":1},"fn_name":null},{"line":573,"address":[659808,659883],"length":1,"stats":{"Line":1},"fn_name":null},{"line":577,"address":[587200,587205],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":578,"address":[659991],"length":1,"stats":{"Line":1},"fn_name":null},{"line":579,"address":[660013],"length":1,"stats":{"Line":1},"fn_name":null},{"line":580,"address":[660058],"length":1,"stats":{"Line":1},"fn_name":null},{"line":581,"address":[660115],"length":1,"stats":{"Line":1},"fn_name":null},{"line":582,"address":[660219,660144],"length":1,"stats":{"Line":1},"fn_name":null},{"line":586,"address":[587232,587237],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":587,"address":[660327],"length":1,"stats":{"Line":1},"fn_name":null},{"line":588,"address":[660349],"length":1,"stats":{"Line":1},"fn_name":null},{"line":589,"address":[660394],"length":1,"stats":{"Line":1},"fn_name":null},{"line":590,"address":[660451],"length":1,"stats":{"Line":1},"fn_name":null},{"line":591,"address":[660480,660555],"length":1,"stats":{"Line":1},"fn_name":null},{"line":595,"address":[587264,587269],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":596,"address":[660663],"length":1,"stats":{"Line":1},"fn_name":null},{"line":597,"address":[660685],"length":1,"stats":{"Line":1},"fn_name":null},{"line":598,"address":[660730],"length":1,"stats":{"Line":1},"fn_name":null},{"line":599,"address":[660787],"length":1,"stats":{"Line":1},"fn_name":null},{"line":600,"address":[660816,660891],"length":1,"stats":{"Line":1},"fn_name":null},{"line":604,"address":[587301,587296],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":605,"address":[660999],"length":1,"stats":{"Line":1},"fn_name":null},{"line":606,"address":[661021],"length":1,"stats":{"Line":1},"fn_name":null},{"line":607,"address":[661066],"length":1,"stats":{"Line":1},"fn_name":null},{"line":608,"address":[661123],"length":1,"stats":{"Line":1},"fn_name":null},{"line":609,"address":[661152,661227],"length":1,"stats":{"Line":1},"fn_name":null},{"line":613,"address":[587333,587328],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":619,"address":[661357],"length":1,"stats":{"Line":1},"fn_name":null},{"line":620,"address":[661402],"length":1,"stats":{"Line":1},"fn_name":null},{"line":622,"address":[661459],"length":1,"stats":{"Line":1},"fn_name":null},{"line":623,"address":[661467],"length":1,"stats":{"Line":1},"fn_name":null},{"line":624,"address":[661494],"length":1,"stats":{"Line":1},"fn_name":null},{"line":627,"address":[661594],"length":1,"stats":{"Line":1},"fn_name":null},{"line":628,"address":[661902,661610,661804],"length":1,"stats":{"Line":2},"fn_name":null},{"line":632,"address":[587360,587365],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":639,"address":[662013],"length":1,"stats":{"Line":1},"fn_name":null},{"line":640,"address":[662058],"length":1,"stats":{"Line":1},"fn_name":null},{"line":642,"address":[662115],"length":1,"stats":{"Line":1},"fn_name":null},{"line":643,"address":[662123],"length":1,"stats":{"Line":1},"fn_name":null},{"line":644,"address":[662150],"length":1,"stats":{"Line":1},"fn_name":null},{"line":647,"address":[662250],"length":1,"stats":{"Line":1},"fn_name":null},{"line":648,"address":[662266,662558,662460],"length":1,"stats":{"Line":2},"fn_name":null},{"line":652,"address":[587392,587397],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":660,"address":[662669],"length":1,"stats":{"Line":1},"fn_name":null},{"line":661,"address":[662714],"length":1,"stats":{"Line":1},"fn_name":null},{"line":663,"address":[662771],"length":1,"stats":{"Line":1},"fn_name":null},{"line":664,"address":[662779],"length":1,"stats":{"Line":1},"fn_name":null},{"line":665,"address":[662806],"length":1,"stats":{"Line":1},"fn_name":null},{"line":668,"address":[662906],"length":1,"stats":{"Line":1},"fn_name":null},{"line":669,"address":[663214,663116,662922],"length":1,"stats":{"Line":2},"fn_name":null},{"line":673,"address":[587424,587429],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":680,"address":[663325],"length":1,"stats":{"Line":1},"fn_name":null},{"line":681,"address":[663370],"length":1,"stats":{"Line":1},"fn_name":null},{"line":683,"address":[663427],"length":1,"stats":{"Line":1},"fn_name":null},{"line":684,"address":[663435],"length":1,"stats":{"Line":1},"fn_name":null},{"line":685,"address":[663462],"length":1,"stats":{"Line":1},"fn_name":null},{"line":688,"address":[663562],"length":1,"stats":{"Line":1},"fn_name":null},{"line":689,"address":[663578,663772,663870],"length":1,"stats":{"Line":2},"fn_name":null},{"line":693,"address":[587456,587461],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":699,"address":[664005],"length":1,"stats":{"Line":1},"fn_name":null},{"line":700,"address":[664050],"length":1,"stats":{"Line":1},"fn_name":null},{"line":702,"address":[664107],"length":1,"stats":{"Line":1},"fn_name":null},{"line":703,"address":[664115],"length":1,"stats":{"Line":1},"fn_name":null},{"line":704,"address":[664142],"length":1,"stats":{"Line":1},"fn_name":null},{"line":707,"address":[664256],"length":1,"stats":{"Line":1},"fn_name":null},{"line":708,"address":[664957,664845],"length":1,"stats":{"Line":2},"fn_name":null},{"line":709,"address":[664329],"length":1,"stats":{"Line":1},"fn_name":null},{"line":710,"address":[664530,664435],"length":1,"stats":{"Line":2},"fn_name":null},{"line":711,"address":[664457],"length":1,"stats":{"Line":1},"fn_name":null},{"line":713,"address":[664838],"length":1,"stats":{"Line":1},"fn_name":null},{"line":715,"address":[665237,665303,665363],"length":1,"stats":{"Line":2},"fn_name":null},{"line":719,"address":[587493,587488],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":720,"address":[665511],"length":1,"stats":{"Line":1},"fn_name":null},{"line":721,"address":[665541],"length":1,"stats":{"Line":1},"fn_name":null},{"line":723,"address":[665594],"length":1,"stats":{"Line":1},"fn_name":null},{"line":724,"address":[665602],"length":1,"stats":{"Line":1},"fn_name":null},{"line":725,"address":[665629],"length":1,"stats":{"Line":1},"fn_name":null},{"line":728,"address":[665720],"length":1,"stats":{"Line":1},"fn_name":null},{"line":729,"address":[666042,666020],"length":1,"stats":{"Line":1},"fn_name":null},{"line":733,"address":[587525,587520],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":734,"address":[666119],"length":1,"stats":{"Line":1},"fn_name":null},{"line":735,"address":[666149],"length":1,"stats":{"Line":1},"fn_name":null},{"line":737,"address":[666202],"length":1,"stats":{"Line":1},"fn_name":null},{"line":738,"address":[666210],"length":1,"stats":{"Line":1},"fn_name":null},{"line":739,"address":[666237],"length":1,"stats":{"Line":1},"fn_name":null},{"line":742,"address":[666328],"length":1,"stats":{"Line":1},"fn_name":null},{"line":743,"address":[666628,666650],"length":1,"stats":{"Line":1},"fn_name":null},{"line":747,"address":[587552,587557],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":748,"address":[666727],"length":1,"stats":{"Line":1},"fn_name":null},{"line":749,"address":[666757],"length":1,"stats":{"Line":1},"fn_name":null},{"line":751,"address":[666810],"length":1,"stats":{"Line":1},"fn_name":null},{"line":752,"address":[666818],"length":1,"stats":{"Line":1},"fn_name":null},{"line":753,"address":[666845],"length":1,"stats":{"Line":1},"fn_name":null},{"line":756,"address":[666936],"length":1,"stats":{"Line":1},"fn_name":null},{"line":757,"address":[667258,667236],"length":1,"stats":{"Line":1},"fn_name":null},{"line":761,"address":[587589,587584],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":762,"address":[667343],"length":1,"stats":{"Line":1},"fn_name":null},{"line":764,"address":[667365],"length":1,"stats":{"Line":1},"fn_name":null},{"line":766,"address":[667418],"length":1,"stats":{"Line":1},"fn_name":null},{"line":767,"address":[667426],"length":1,"stats":{"Line":1},"fn_name":null},{"line":768,"address":[667453],"length":1,"stats":{"Line":1},"fn_name":null},{"line":771,"address":[667544],"length":1,"stats":{"Line":1},"fn_name":null},{"line":772,"address":[667844,667866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":775,"address":[655184],"length":1,"stats":{"Line":1},"fn_name":"process"},{"line":776,"address":[655197],"length":1,"stats":{"Line":1},"fn_name":null},{"line":777,"address":[655242],"length":1,"stats":{"Line":1},"fn_name":null},{"line":780,"address":[655721,655296],"length":1,"stats":{"Line":1},"fn_name":"extract_retval"},{"line":781,"address":[655318],"length":1,"stats":{"Line":1},"fn_name":null},{"line":782,"address":[655351,655451,655523,655605],"length":1,"stats":{"Line":4},"fn_name":null},{"line":785,"address":[657041,655760],"length":1,"stats":{"Line":1},"fn_name":"eval_and_extract_state"},{"line":786,"address":[655791],"length":1,"stats":{"Line":1},"fn_name":null},{"line":787,"address":[655838],"length":1,"stats":{"Line":1},"fn_name":null},{"line":788,"address":[656013,656294,655965],"length":1,"stats":{"Line":3},"fn_name":null},{"line":789,"address":[656753],"length":1,"stats":{"Line":1},"fn_name":null},{"line":790,"address":[656895],"length":1,"stats":{"Line":1},"fn_name":null},{"line":793,"address":[657072,657463],"length":1,"stats":{"Line":1},"fn_name":"eval_and_expect"},{"line":794,"address":[657089],"length":1,"stats":{"Line":1},"fn_name":null},{"line":795,"address":[657144,657287],"length":1,"stats":{"Line":2},"fn_name":null}],"covered":268,"coverable":376},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","literals.rs"],"content":"//! AST Level representation of Literal Values\nuse core::fmt;\nuse std::fmt::Display;\n\n/// Represent Literal Values that we parse.\n///\n/// Conventionally these things are stored as void*s or Objects. (un)fortunatley\n/// rust takes inspiration from ML so all of our types need to be concrete.\n/// To handle the fact we have a few different literals that can exist we\n/// wrap them inside a union as variants.\n///\n/// This gives us the illusion that we are\n/// only refering to some Literal type, when it contains some value.\n/// As a wise man once said, there is power in a union.\n#[derive(Debug, Clone, PartialEq, PartialOrd)]\npub enum Literal {\n    Number(f64),\n    StrLit(String),\n    Bool(bool),\n    Empty,\n}\n\nimpl Display for Literal {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            Literal::Number(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Literal::StrLit(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Literal::Empty =\u003e {\n                write!(f, \"Empty\")\n            }\n            Literal::Bool(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n        }\n    }\n}\n","traces":[{"line":24,"address":[671120],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":25,"address":[671153],"length":1,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[671189],"length":1,"stats":{"Line":0},"fn_name":null},{"line":27,"address":[671198,671676],"length":1,"stats":{"Line":0},"fn_name":null},{"line":29,"address":[671259],"length":1,"stats":{"Line":0},"fn_name":null},{"line":30,"address":[671271,671583],"length":1,"stats":{"Line":0},"fn_name":null},{"line":33,"address":[671404],"length":1,"stats":{"Line":0},"fn_name":null},{"line":35,"address":[671336],"length":1,"stats":{"Line":0},"fn_name":null},{"line":36,"address":[671348,671493],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":9},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","main.rs"],"content":"mod ast;\nmod callable;\nmod environment;\nmod interpreter;\nmod literals;\nmod nativefn;\nmod parser;\nmod scanner;\nmod token;\nmod tokentype;\nmod userfunction;\n\nuse std::fs;\nuse std::io;\n\nuse interpreter::Interpreter;\nuse parser::Parser;\nuse scanner::Scanner;\n\nuse rustyline::Editor;\n\nuse clap::{AppSettings, Parser as ClapParser};\n\n/// Clap-based CLI Option Parser\n#[derive(ClapParser)]\n#[clap(version = \"0.1\")]\nstruct Opts {\n    sourcefile: Option\u003cString\u003e,\n}\n\nfn main() {\n    let opts: Opts = Opts::parse();\n    match opts.sourcefile {\n        Some(x) =\u003e run_file(x),\n        _ =\u003e {\n            repl();\n        }\n    }\n}\n\nfn read_file(path: String) -\u003e Result\u003cString, io::Error\u003e {\n    fs::read_to_string(path)\n}\n\nfn run_file(path: String) {\n    let mut interpreter = Interpreter::new();\n    let ritual = read_file(path);\n    run(ritual.unwrap(), \u0026mut interpreter);\n}\n\n/// A (very) simple Read-Eval-Print-Loop for Daemonica.\nfn repl() {\n    let mut rl = Editor::\u003c()\u003e::new();\n    let mut interpreter = Interpreter::new();\n    loop {\n        let readline = rl.readline(\"Daemonica\u003e \");\n        match readline {\n            Ok(line) =\u003e {\n                rl.add_history_entry(line.as_str());\n                run(line.to_string().clone(), \u0026mut interpreter);\n            }\n            Err(_) =\u003e {\n                break;\n            }\n        }\n    }\n}\n\nfn run(src: String, i: \u0026mut Interpreter) {\n    let tokens = Scanner::scan(src);\n    let parsed = Parser::parse(tokens);\n    //let mut s: Scanner = Scanner::new(src);\n    //let tokens = s.scan_tokens();\n    //let mut p: Parser = Parser::new(tokens);\n    //let parsed = p.parse_self();\n    //println!(\"{:#?}\", parsed);\n    let result = i.interpret(parsed);\n    //println!(\"{:#?}\", result.unwrap());\n}\n","traces":[{"line":31,"address":[861120,861308],"length":1,"stats":{"Line":0},"fn_name":"main"},{"line":32,"address":[861124],"length":1,"stats":{"Line":0},"fn_name":null},{"line":33,"address":[861144],"length":1,"stats":{"Line":0},"fn_name":null},{"line":34,"address":[861299,861167],"length":1,"stats":{"Line":0},"fn_name":null},{"line":36,"address":[861224],"length":1,"stats":{"Line":0},"fn_name":null},{"line":41,"address":[861376],"length":1,"stats":{"Line":0},"fn_name":"read_file"},{"line":42,"address":[861388],"length":1,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[861440,861714],"length":1,"stats":{"Line":0},"fn_name":"run_file"},{"line":46,"address":[861451],"length":1,"stats":{"Line":0},"fn_name":null},{"line":47,"address":[861483],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[861687,861578],"length":1,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[861744,862326],"length":1,"stats":{"Line":0},"fn_name":"repl"},{"line":53,"address":[861751],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[861769],"length":1,"stats":{"Line":0},"fn_name":null},{"line":56,"address":[861815],"length":1,"stats":{"Line":0},"fn_name":null},{"line":57,"address":[861901,861847],"length":1,"stats":{"Line":0},"fn_name":null},{"line":58,"address":[861903],"length":1,"stats":{"Line":0},"fn_name":null},{"line":59,"address":[862034,861943],"length":1,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[862098],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[862352],"length":1,"stats":{"Line":0},"fn_name":"run"},{"line":70,"address":[862371],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[862412],"length":1,"stats":{"Line":0},"fn_name":null},{"line":77,"address":[862461],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":23},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","nativefn.rs"],"content":"//! Language-level functions and builtins.\nuse core::{fmt, time};\nuse std::{\n    collections::HashMap,\n    thread,\n    time::{SystemTime, UNIX_EPOCH},\n};\n\nuse fxhash::hash64;\n\nuse crate::{ast::Value, callable::Callable, interpreter::Interpreter};\n\n#[derive(Clone)]\npub struct NativeFn {\n    name: String,\n    arity: usize,\n    // We can implement a callable as a closure type here.\n    func: fn(\u0026mut Interpreter, Vec\u003cValue\u003e) -\u003e Result\u003cValue, String\u003e,\n}\n\nimpl PartialEq for NativeFn {\n    fn eq(\u0026self, other: \u0026Self) -\u003e bool {\n        //self.name == other.name \u0026\u0026 self.arity == other.arity\n        let selfhash = hash64(\u0026self.stringify_for_hash());\n        let otherhash = hash64(\u0026other.stringify_for_hash());\n        selfhash == otherhash\n    }\n}\n\nimpl NativeFn {\n    pub fn stringify_for_hash(\u0026self) -\u003e String {\n        format!(\"{}.{}\", self.name, self.arity)\n    }\n\n    pub fn call(\u0026self, interpreter: \u0026mut Interpreter, args: Vec\u003cValue\u003e) -\u003e Result\u003cOption\u003cValue\u003e, String\u003e {\n        let res = (self.func)(interpreter, args)?;\n        //interpreter.retval = Some(res);\n        Ok(Some(res))\n    }\n}\n\n// impl Callable for NativeFn {\n//     fn arity(\u0026self, interpreter: \u0026Interpreter) -\u003e usize {\n//         self.arity\n//     }\n\n// }\n\nimpl fmt::Debug for NativeFn {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        write!(f, \"NativeFn({}.{})\", self.name, self.arity)\n    }\n}\n\nimpl fmt::Display for NativeFn {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        write!(f, \"NativeFn({})\", self.name)\n    }\n}\n\npub fn generate_native_functions() -\u003e HashMap\u003cString, Option\u003cValue\u003e\u003e {\n    let mut funcs: HashMap\u003cString, Option\u003cValue\u003e\u003e = HashMap::new();\n    funcs.insert(\n        String::from(\"horologium\"),\n        Some(Value::NativeFn(NativeFn {\n            name: \"horologium\".to_string(),\n            arity: 0,\n            func: |_, _| {\n                let start_time = SystemTime::now();\n                Ok(Value::Number(\n                    start_time.duration_since(UNIX_EPOCH).unwrap().as_millis() as f64,\n                ))\n            },\n        })),\n    );\n    funcs.insert(\n        String::from(\"manere\"),\n        Some(Value::NativeFn(NativeFn {\n            name: \"manere\".to_string(),\n            arity: 1,\n            func: |_, args| {\n                if args.len() != 1 {\n                    let emsg = format!(\"Attempted to call manere with {} args but expected 1\", args.len());\n                    return Err(emsg);\n                }\n                let arg = args.first().unwrap();\n                match arg {\n                    Value::Number(x) =\u003e {\n                        thread::sleep(time::Duration::from_secs(x.round() as u64));\n                        return Ok(Value::Empty);\n                    },\n                    _ =\u003e { return Err(String::from(\"Attempted to call manere with a non-numeric argument\")) }\n                }\n            },\n        })),\n    );\n    funcs\n}\n","traces":[{"line":22,"address":[564720,564824],"length":1,"stats":{"Line":0},"fn_name":"eq"},{"line":24,"address":[564745],"length":1,"stats":{"Line":0},"fn_name":null},{"line":25,"address":[564841],"length":1,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[564927],"length":1,"stats":{"Line":0},"fn_name":null},{"line":31,"address":[564944],"length":1,"stats":{"Line":0},"fn_name":"stringify_for_hash"},{"line":32,"address":[564969],"length":1,"stats":{"Line":0},"fn_name":null},{"line":35,"address":[565200],"length":1,"stats":{"Line":0},"fn_name":"call"},{"line":36,"address":[565494,565246],"length":1,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[565399],"length":1,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[565632],"length":1,"stats":{"Line":1},"fn_name":"fmt"},{"line":51,"address":[565660],"length":1,"stats":{"Line":1},"fn_name":null},{"line":56,"address":[565888],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":57,"address":[565910],"length":1,"stats":{"Line":0},"fn_name":null},{"line":61,"address":[566048,566989],"length":1,"stats":{"Line":1},"fn_name":"generate_native_functions"},{"line":62,"address":[566068],"length":1,"stats":{"Line":1},"fn_name":null},{"line":63,"address":[566436],"length":1,"stats":{"Line":1},"fn_name":null},{"line":64,"address":[566089],"length":1,"stats":{"Line":1},"fn_name":null},{"line":65,"address":[566116,566193],"length":1,"stats":{"Line":2},"fn_name":null},{"line":66,"address":[566124],"length":1,"stats":{"Line":1},"fn_name":null},{"line":68,"address":[873296,873608],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":69,"address":[873334],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[873554],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[873450,873375],"length":1,"stats":{"Line":0},"fn_name":null},{"line":76,"address":[566858],"length":1,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[566548],"length":1,"stats":{"Line":1},"fn_name":null},{"line":78,"address":[566615,566575],"length":1,"stats":{"Line":2},"fn_name":null},{"line":79,"address":[566583],"length":1,"stats":{"Line":1},"fn_name":null},{"line":81,"address":[873648,874469],"length":1,"stats":{"Line":0},"fn_name":"{closure#1}"},{"line":82,"address":[873694],"length":1,"stats":{"Line":0},"fn_name":null},{"line":83,"address":[873786],"length":1,"stats":{"Line":0},"fn_name":null},{"line":84,"address":[874012],"length":1,"stats":{"Line":0},"fn_name":null},{"line":86,"address":[873761,874122],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[874171],"length":1,"stats":{"Line":0},"fn_name":null},{"line":88,"address":[874185],"length":1,"stats":{"Line":0},"fn_name":null},{"line":89,"address":[874200,874312],"length":1,"stats":{"Line":0},"fn_name":null},{"line":90,"address":[874422],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[874218],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":12,"coverable":37},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","parser.rs"],"content":"//! A Hand-written recurisve descent parser for Daemonica.\nuse crate::{\n    ast::{ASTNode, Expr, Stmt},\n    literals::Literal,\n    token::Token,\n    tokentype::TokenType,\n};\n\n/// The documentation for this crate is designed to follow the flow of the\n/// recursive descent parser. As such each level of precidence and it's productions\n/// are doccumented before each lower level of precidence.\npub struct Parser {\n    /// Store the sequence of tokens that we recieve from the lexer, so we can\n    /// recursivley parse them.\n    tokens: Vec\u003cToken\u003e,\n    /// Store a counter that indexes to the current token.\n    current: usize,\n}\n\nimpl Parser {\n    /// Initialize a parser instance with some input set of tokens.\n    pub fn new(tokens: Vec\u003cToken\u003e) -\u003e Parser {\n        Parser { tokens, current: 0 }\n    }\n\n    /// Given an initialized Parser; produces a series of AST Nodes to be interpreted.\n    ///\n    /// # Example\n    /// ```\n    /// let mut s: Scanner = Scanner::new(src);\n    /// let tokens = s.scan_tokens();\n    /// let mut p: Parser = Parser::new(tokens);\n    /// let AST = p.parse();\n    /// ```\n    pub fn parse_self(\u0026mut self) -\u003e Vec\u003cASTNode\u003e {\n        let mut stmts: Vec\u003cASTNode\u003e = Vec::new();\n        while self.at_end() == false {\n            //stmts.push(ASTNode::StmtNode(self.statement()));\n            stmts.push(ASTNode::StmtNode(self.declaration()));\n        }\n        return stmts;\n    }\n\n    /// Helper function that allows you to parse directly if you don't want\n    /// to actually keep an instance of the parser.\n    ///\n    /// # Example\n    /// ```\n    /// let mut s: Scanner = scanner::new(src);\n    /// let tokens = s.scan_tokens();\n    /// let AST = Parser::parse_direct(tokens);\n    /// ```\n    pub fn parse(tokens: Vec\u003cToken\u003e) -\u003e Vec\u003cASTNode\u003e {\n        let mut p = self::Parser::new(tokens);\n        p.parse_self()\n    }\n\n    /// Top level of our parse tree. Checks for function definitions, or variable\n    /// declarations first. If neither descends into statement.\n    fn declaration(\u0026mut self) -\u003e Stmt {\n        if self.maybe_advance(vec![TokenType::Fn]) {\n            return self.function();\n        }\n        if self.maybe_advance(vec![TokenType::Var]) {\n            return self.var_decl();\n        }\n        return self.statement();\n    }\n\n    /// Grab the function name, and the actual body of the function.\n    fn function(\u0026mut self) -\u003e Stmt {\n        let name = self.consume(TokenType::Identifier);\n        self.consume(TokenType::LeftParen);\n        let mut params: Vec\u003cToken\u003e = Vec::new();\n        if self.check(TokenType::RightParen) == false {\n            loop {\n                params.push(self.consume(TokenType::Identifier));\n                if self.maybe_advance(vec![TokenType::Comma]) == false {\n                    break;\n                }\n            }\n        }\n        self.consume(TokenType::RightParen);\n        self.consume(TokenType::LeftBrace);\n        let body = self.block();\n        Stmt::Function(name, params, body)\n    }\n\n    /// Collect the variable name, then we need to see if we have an initializer\n    /// statement or not. If we do we need to parse it as an expression and store\n    /// it.\n    /// If we dont we can simply store it as an [Option::None]\n    fn var_decl(\u0026mut self) -\u003e Stmt {\n        // Grab the variable name first of all, so we can bind it\n        let name = self.consume(TokenType::Identifier);\n\n        // Check if we have an initializer statement or not. If we do we need\n        // to parse that out as an expression.\n        // otherwise we just bind the name to an empty value\n        if self.maybe_advance(vec![TokenType::Equal]) {\n            let initializer = Some(self.expression());\n            self.consume(TokenType::Semicolon);\n            return Stmt::Var(name, initializer);\n        } else {\n            self.consume(TokenType::Semicolon);\n            return Stmt::Var(name, None);\n        }\n    }\n\n    /// 2nd Level of the parser.\n    ///\n    /// This level has multiple productions of the same precidence.\n    /// Print and Return statements are both \"detected\" here, as are\n    /// flow control statements like While, If and For.\n    /// Block Statements are also parsed here.\n    fn statement(\u0026mut self) -\u003e Stmt {\n        if self.maybe_advance(vec![TokenType::Print]) {\n            return self.parse_print();\n        }\n        if self.maybe_advance(vec![TokenType::Return]) {\n            return self.parse_return();\n        }\n        if self.maybe_advance(vec![TokenType::LeftBrace]) {\n            return Stmt::Block(self.block());\n        }\n        if self.maybe_advance(vec![TokenType::While]) {\n            return self.while_stmt();\n        }\n        if self.maybe_advance(vec![TokenType::If]) {\n            return self.if_stmt();\n        }\n        if self.maybe_advance(vec![TokenType::For]) {\n            return self.parse_for();\n        }\n        return self.expression_stmt();\n    }\n\n    /// Take the right hand side as an expression and dump it wholesale\n    /// into a new AST node.\n    fn parse_print(\u0026mut self) -\u003e Stmt {\n        let val = self.expression();\n        self.consume(TokenType::Semicolon);\n        return Stmt::Print(val);\n    }\n\n    /// Grab the right hand side of the expression, and throw it into the AST.\n    /// The RHS in the AST node is an Option so that empty returns are allowed.\n    ///\n    /// ***NOTE: Return DOES NOT return control flow, merley a value.***\n    fn parse_return(\u0026mut self) -\u003e Stmt {\n        let prev = self.previous();\n        let mut value = None;\n        if !self.check(TokenType::Semicolon) {\n            value = Some(self.expression());\n        }\n        self.consume(TokenType::Semicolon);\n        Stmt::Return(prev, value)\n    }\n\n    /// This produces a vector of statements, that we then wrap inside a [crate::ast::Stmt::Block].\n    fn block(\u0026mut self) -\u003e Vec\u003cStmt\u003e {\n        let mut stmts = Vec::new();\n        while !self.check(TokenType::RightBrace) \u0026\u0026 !self.at_end() {\n            stmts.push(self.declaration());\n        }\n        self.consume(TokenType::RightBrace);\n        stmts\n    }\n\n    /// Standard while loop construct. We grab the condition and the body\n    /// of the while statement and produce a new AST Node.\n    fn while_stmt(\u0026mut self) -\u003e Stmt {\n        self.consume(TokenType::LeftParen);\n        let condition = self.expression();\n        self.consume(TokenType::RightParen);\n        let body = self.statement();\n        return Stmt::While(condition, Box::new(body));\n    }\n\n    /// This handles both if and else constructs.\n    /// Grab the condition and the body of the if statement.\n    /// If an Else statement exists, when we parse that too; otherwise it's a None.\n    fn if_stmt(\u0026mut self) -\u003e Stmt {\n        self.consume(TokenType::LeftParen);\n        let condition = self.expression();\n        self.consume(TokenType::RightParen);\n\n        let thenb = self.statement();\n        let mut elseb = None;\n        // Avoid the dangling else by checking for it eagerly.\n        if self.maybe_advance(vec![TokenType::Else]) {\n            elseb = Some(self.statement());\n        }\n        return Stmt::If(condition, Box::new(thenb), Box::new(elseb));\n    }\n\n    /// We desugar for statments into their component parts.\n    ///\n    /// As any for loop\n    /// can also be expressed as a while loop, with some extra code that runs\n    /// before execution (initializer), and some code that runs\n    /// before each iteration (incrementation etc).\n    ///\n    /// As such we can; instead of implementing\n    /// the for loop itself; break the expression into it's components right now\n    /// avoiding adding an explicit case to the interpreter, and another variant in our AST.\n    fn parse_for(\u0026mut self) -\u003e Stmt {\n        self.consume(TokenType::LeftParen);\n        // Parse out the various parts of our for statement, for desugaring\n        // in a second\n\n        // Parse our initializer\n        let initializer: Option\u003cStmt\u003e;\n        if self.maybe_advance(vec![TokenType::Semicolon]) {\n            initializer = None;\n        } else if self.maybe_advance(vec![TokenType::Var]) {\n            initializer = Some(self.var_decl());\n        } else {\n            initializer = Some(self.expression_stmt());\n        }\n\n        // Parse the condition, if it exists.\n        let mut cond: Option\u003cExpr\u003e = None;\n        if !self.check(TokenType::Semicolon) {\n            cond = Some(self.expression());\n        }\n        self.consume(TokenType::Semicolon);\n\n        let mut increment: Option\u003cExpr\u003e = None;\n        if !self.check(TokenType::RightParen) {\n            increment = Some(self.expression());\n        }\n        self.consume(TokenType::RightParen);\n\n        // And finally get the body of the statement.\n        let mut body = self.statement();\n\n        match increment {\n            // If we have an increment, then create the AST Node for it.\n            Some(inc) =\u003e {\n                body = Stmt::Block(vec![body, Stmt::Expression(inc)]);\n                match cond {\n                    Some(_) =\u003e {}\n                    None =\u003e {\n                        cond = Some(Expr::Literal(Literal::Bool(true)));\n                    }\n                }\n                body = Stmt::While(cond.unwrap(), Box::new(body));\n\n                match initializer {\n                    Some(init) =\u003e {\n                        body = Stmt::Block(vec![init, body]);\n                    }\n                    None =\u003e {}\n                }\n            }\n            _ =\u003e {}\n        }\n        body\n    }\n\n    /// In order to keep our grammar somewhat sane, we have the ability to wrap\n    /// an expression inside a statement. This allows it to be a fair bit more\n    /// flexable.\n    fn expression_stmt(\u0026mut self) -\u003e Stmt {\n        let expr = self.expression();\n        self.consume(TokenType::Semicolon);\n        Stmt::Expression(expr)\n    }\n\n    /// Top level for expressions.\n    /// Recurses down to assignment\n    fn expression(\u0026mut self) -\u003e Expr {\n        self.assignment()\n    }\n\n    /// Parse varaible assignment\n    fn assignment(\u0026mut self) -\u003e Expr {\n        let expr = self.parse_or();\n\n        if self.maybe_advance(vec![TokenType::Equal]) {\n            // If we have an assignment, then grab the value\n            let equals = self.previous();\n            let value = self.assignment();\n\n            // If our expression that we recursed at the top is a variable, then\n            // we bind the value we just got, to that name.\n            match expr {\n                Expr::Variable(tok) =\u003e {\n                    return Expr::Assign(tok, Box::new(value));\n                }\n                // If not, we forgot to actually give the assignment it's RHS.\n                _ =\u003e {\n                    let emsg = format!(\"{} is an invalid assignment target\", equals);\n                    panic!(\"{}\", emsg);\n                }\n            }\n        }\n        return expr;\n    }\n\n    /// parse logical ors\n    ///\n    /// Quite simple, grab the RHS and the LHS, throw them in a node.\n    fn parse_or(\u0026mut self) -\u003e Expr {\n        let mut expr = self.parse_and();\n\n        while self.maybe_advance(vec![TokenType::Or]) {\n            let op = self.previous();\n            let right = self.parse_and();\n            expr = Expr::Logic(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// Parse logical And\n    fn parse_and(\u0026mut self) -\u003e Expr {\n        let mut expr = self.equality();\n\n        while self.maybe_advance(vec![TokenType::And]) {\n            let op = self.previous();\n            let right = self.equality();\n            expr = Expr::Logic(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// Parse equality expressions (== and !=)\n    fn equality(\u0026mut self) -\u003e Expr {\n        let mut expr = self.comparison();\n\n        while self.maybe_advance(vec![TokenType::BangEqual, TokenType::EqualEqual]) {\n            let op = self.previous();\n            let right = self.comparison();\n            expr = Expr::Binary(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// Parse \u003e, \u003e=, \u003c and \u003c= expressions\n    fn comparison(\u0026mut self) -\u003e Expr {\n        let mut expr = self.term();\n\n        while self.maybe_advance(vec![\n            TokenType::Greater,\n            TokenType::GreaterEqual,\n            TokenType::Less,\n            TokenType::LessEqual,\n        ]) {\n            let op = self.previous();\n            let right = self.term();\n            expr = Expr::Binary(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// parse + and - expressions\n    fn term(\u0026mut self) -\u003e Expr {\n        let mut expr = self.factor();\n        while self.maybe_advance(vec![TokenType::Plus, TokenType::Minus]) {\n            let op = self.previous();\n            let right = self.factor();\n            expr = Expr::Binary(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// Parse * and / expressions\n    fn factor(\u0026mut self) -\u003e Expr {\n        let mut expr = self.unary();\n        while self.maybe_advance(vec![TokenType::Star, TokenType::Slash]) {\n            let op = self.previous();\n            let right = self.unary();\n            expr = Expr::Binary(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// Unary expressions like ! which negates boolean or - which negates a number\n    /// are parsed here\n    fn unary(\u0026mut self) -\u003e Expr {\n        // Check to see if it's a ! or -. If it is ten it's a unary expression\n        // so grab the token and recurse un unary to parse te operand.\n        if self.maybe_advance(vec![TokenType::Bang, TokenType::Minus]) {\n            let op = self.previous();\n            let right = self.unary();\n            Expr::Unary(op, Box::new(right))\n        } else {\n            // If it's not a unary expr, then we might have a call\n            self.call()\n            //self.primary()\n        }\n    }\n\n    /// This handles function calls.\n    /// Extracts the name of the function, and (possibly) arguments\n    /// and produces a new node with them.\n    fn call(\u0026mut self) -\u003e Expr {\n        let mut expr = self.primary();\n        loop {\n            if self.maybe_advance(vec![TokenType::LeftParen]) {\n                expr = self.parse_arglist(expr);\n            } else {\n                break;\n            }\n        }\n        return expr;\n    }\n\n    fn parse_arglist(\u0026mut self, callee: Expr) -\u003e Expr {\n        let mut args: Vec\u003cExpr\u003e = Vec::new();\n        if self.check(TokenType::RightParen) == false {\n            loop {\n                args.push(self.expression());\n                if !self.maybe_advance(vec![TokenType::Comma]) {\n                    break;\n                }\n            }\n        }\n        let paren = self.consume(TokenType::RightParen);\n        Expr::Call(Box::new(callee), paren, args)\n    }\n\n    /// Bottom case is primary expressions.\n    /// This includes all literals, variables and paren groupings.\n    /// If we reach here, and nothing is valid then we've bottomed out\n    /// the parser, and need to report an error to the user.\n    fn primary(\u0026mut self) -\u003e Expr {\n        if self.maybe_advance(vec![TokenType::False]) {\n            return Expr::Literal(Literal::Bool(false));\n        }\n        if self.maybe_advance(vec![TokenType::True]) {\n            return Expr::Literal(Literal::Bool(true));\n        }\n        if self.maybe_advance(vec![TokenType::None]) {\n            return Expr::Literal(Literal::Empty);\n        }\n        if self.maybe_advance(vec![TokenType::Number]) {\n            return Expr::Literal(self.previous().literal);\n        }\n        if self.maybe_advance(vec![TokenType::String]) {\n            return Expr::Literal(self.previous().literal);\n        }\n        if self.maybe_advance(vec![TokenType::Identifier]) {\n            return Expr::Variable(self.previous());\n        }\n\n        if self.maybe_advance(vec![TokenType::LeftParen]) {\n            let expr = self.expression();\n            self.consume(TokenType::RightParen);\n            return Expr::Grouping(Box::new(expr));\n        }\n        panic!(\"Bottomed out of Parser::primary with {}\", self.peek());\n    }\n\n    // Helper functions that abstract out common logic.\n\n    /// Consume the next token, if it matches the provided token variant.\n    fn consume(\u0026mut self, ttype: TokenType) -\u003e Token {\n        //if self.expect(vec![ttype.clone()]) {\n        if self.check(ttype.clone()) {\n            return self.next();\n        } else {\n            panic!(\n                \"Was expecting token {:?}, but found {:?} at token {} ({:?})\",\n                ttype,\n                self.peek().ttype,\n                self.current,\n                self.peek()\n            );\n        }\n    }\n\n    /// Given a list of valid tokentypes, see if the next token in the stream is\n    /// in that list, and thus valid\n    fn maybe_advance(\u0026mut self, types: Vec\u003cTokenType\u003e) -\u003e bool {\n        for ttype in types {\n            if self.check(ttype) {\n                self.next();\n                return true;\n            }\n        }\n        false\n    }\n\n    /// Checks if the given token type is the next token type. Does NOT consume.\n    fn check(\u0026mut self, ttype: TokenType) -\u003e bool {\n        if self.at_end() {\n            return false;\n        }\n        return self.peek().ttype == ttype;\n    }\n\n    /// Advance to the next token, producing the previous token\n    fn next(\u0026mut self) -\u003e Token {\n        if self.at_end() == false {\n            self.current += 1;\n        }\n        self.previous()\n    }\n\n    /// Lookahead one token.\n    fn peek(\u0026self) -\u003e Token {\n        self.tokens.get(self.current).unwrap().clone()\n    }\n\n    /// Return true if the next token is EOF.\n    fn at_end(\u0026self) -\u003e bool {\n        self.peek().ttype == TokenType::EOF\n    }\n\n    /// Produce the previous token in the token stream\n    fn previous(\u0026self) -\u003e Token {\n        self.tokens.get(self.current - 1).unwrap().clone()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use crate::scanner::Scanner;\n\n    #[test]\n    fn vardecl() {\n        let test: String = String::from(\"ligamen a = 5.3;\");\n        let tok = Scanner::scan(test);\n        let result = Parser::parse(tok);\n        let expected = vec![ASTNode::StmtNode(Stmt::Var(\n            Token::new(TokenType::Identifier, String::from(\"a\"), Literal::Empty, 1),\n            Some(Expr::Literal(Literal::Number(5.3))),\n        ))];\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn vardel_no_initializer() {\n        let test = String::from(\"ligamen a;\");\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Var(\n            Token::new(TokenType::Identifier, String::from(\"a\"), Literal::Empty, 1),\n            None,\n        ))];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn fundecl() {\n        let test: String = String::from(\n            r#\"\n        incantatio fun() {\n          \"Hi\";\n        }\"#,\n        );\n        let res = process(test);\n\n        let expected = vec![ASTNode::StmtNode(Stmt::Function(\n            Token::new(\n                TokenType::Identifier,\n                String::from(\"fun\"),\n                Literal::Empty,\n                2,\n            ),\n            vec![],\n            vec![Stmt::Expression(Expr::Literal(Literal::StrLit(\n                String::from(\"Hi\"),\n            )))],\n        ))];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn printstmt() {\n        let test: String = String::from(\"scribo 5.0;\");\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Print(Expr::Literal(\n            Literal::Number(5.0),\n        )))];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn return_test() {\n        let test = String::from(\n            r#\"\n        incantatio fun() {\n          beneficium 5;\n        }\"#,\n        );\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Function(\n            Token::new(\n                TokenType::Identifier,\n                String::from(\"fun\"),\n                Literal::Empty,\n                2,\n            ),\n            vec![],\n            vec![Stmt::Return(\n                Token::new(\n                    TokenType::Return,\n                    String::from(\"beneficium\"),\n                    Literal::Empty,\n                    3,\n                ),\n                Some(Expr::Literal(Literal::Number(5.0))),\n            )],\n        ))];\n        assert!(expected == res);\n    }\n\n    #[test]\n    fn return_nothing() {\n        let test = String::from(\n            r#\"\n        incantatio fun() {\n          beneficium;\n        }\"#,\n        );\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Function(\n            Token::new(\n                TokenType::Identifier,\n                String::from(\"fun\"),\n                Literal::Empty,\n                2,\n            ),\n            vec![],\n            vec![Stmt::Return(\n                Token::new(\n                    TokenType::Return,\n                    String::from(\"beneficium\"),\n                    Literal::Empty,\n                    3,\n                ),\n                None,\n            )],\n        ))];\n        assert!(expected == res);\n    }\n\n    #[test]\n    fn blocks() {\n        let test = String::from(\n            r#\"\n            \"Outside\";\n            {\n                \"Inside\";\n            }\"#,\n        );\n        let res = process(test);\n        let expected = vec![\n            ASTNode::StmtNode(Stmt::Expression(Expr::Literal(Literal::StrLit(\n                String::from(\"Outside\"),\n            )))),\n            ASTNode::StmtNode(Stmt::Block(vec![Stmt::Expression(Expr::Literal(\n                Literal::StrLit(String::from(\"Inside\")),\n            ))])),\n        ];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn ifstmt() {\n        let test = String::from(\n            r#\"\n            si(1 == 2) {\n                scribo \"Maths is hard\";\n            }\n            \"#,\n        );\n        let expected = vec![ASTNode::StmtNode(Stmt::If(\n            Expr::Binary(\n                Box::new(Expr::Literal(Literal::Number(1.0))),\n                Token::new(TokenType::EqualEqual, String::from(\"==\"), Literal::Empty, 2),\n                Box::new(Expr::Literal(Literal::Number(2.0))),\n            ),\n            Box::new(Stmt::Block(vec![Stmt::Print(Expr::Literal(\n                Literal::StrLit(String::from(\"Maths is hard\")),\n            ))])),\n            Box::new(None),\n        ))];\n        let res = process(test);\n        assert!(expected == res);\n    }\n\n    #[test]\n    fn grouping() {\n        let test = String::from(\"5 + (20 + 2 * (3));\");\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Expression(Expr::Binary(\n            Box::new(Expr::Literal(Literal::Number(5.0))),\n            Token {\n                ttype: TokenType::Plus,\n                lexeme: \"+\".to_string(),\n                literal: Literal::Empty,\n                line: 1,\n            },\n            Box::new(Expr::Grouping(Box::new(Expr::Binary(\n                Box::new(Expr::Literal(Literal::Number(20.0))),\n                Token {\n                    ttype: TokenType::Plus,\n                    lexeme: \"+\".to_string(),\n                    literal: Literal::Empty,\n                    line: 1,\n                },\n                Box::new(Expr::Binary(\n                    Box::new(Expr::Literal(Literal::Number(2.0))),\n                    Token {\n                        ttype: TokenType::Star,\n                        lexeme: \"*\".to_string(),\n                        literal: Literal::Empty,\n                        line: 1,\n                    },\n                    Box::new(Expr::Grouping(Box::new(Expr::Literal(Literal::Number(\n                        3.0,\n                    ))))),\n                )),\n            )))),\n        )))];\n        assert!(expected == res);\n    }\n\n    #[test]\n    fn unary() {\n        let test = String::from(\"-5.0;\");\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Expression(Expr::Unary(\n            Token::new(TokenType::Minus, String::from(\"-\"), Literal::Empty, 1),\n            Box::new(Expr::Literal(Literal::Number(5.0))),\n        )))];\n        assert!(expected == res);\n\n        let test = String::from(\"!verum;\");\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Expression(Expr::Unary(\n            Token::new(TokenType::Bang, String::from(\"!\"), Literal::Empty, 1),\n            Box::new(Expr::Literal(Literal::Bool(true))),\n        )))];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn ifelse() {\n        let test = String::from(\n            r#\"\n            si(1 == 2) {\n                scribo \"Maths is hard\";\n            } aliter {\n                scribo \"Maths is easy\";\n            }\n            \"#,\n        );\n        let expected = vec![ASTNode::StmtNode(Stmt::If(\n            Expr::Binary(\n                Box::new(Expr::Literal(Literal::Number(1.0))),\n                Token::new(TokenType::EqualEqual, String::from(\"==\"), Literal::Empty, 2),\n                Box::new(Expr::Literal(Literal::Number(2.0))),\n            ),\n            Box::new(Stmt::Block(vec![Stmt::Print(Expr::Literal(\n                Literal::StrLit(String::from(\"Maths is hard\")),\n            ))])),\n            Box::new(Some(Stmt::Block(vec![Stmt::Print(Expr::Literal(\n                Literal::StrLit(String::from(\"Maths is easy\")),\n            ))]))),\n        ))];\n        let res = process(test);\n        assert!(expected == res);\n    }\n\n    #[test]\n    fn forstmt() {\n        let test = String::from(\n            r#\"\n            enim(ligamen i = 1; i \u003c 100; i = i + 1) {\n                scribo i;\n            }\n            \"#,\n        );\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Block(vec![\n            Stmt::Var(\n                Token {\n                    ttype: TokenType::Identifier,\n                    lexeme: \"i\".to_string(),\n                    literal: Literal::Empty,\n                    line: 2,\n                },\n                Some(Expr::Literal(Literal::Number(1.0))),\n            ),\n            Stmt::While(\n                Expr::Binary(\n                    Box::new(Expr::Variable(Token {\n                        ttype: TokenType::Identifier,\n                        lexeme: \"i\".to_string(),\n                        literal: Literal::Empty,\n                        line: 2,\n                    })),\n                    Token {\n                        ttype: TokenType::Less,\n                        lexeme: \"\u003c\".to_string(),\n                        literal: Literal::Empty,\n                        line: 2,\n                    },\n                    Box::new(Expr::Literal(Literal::Number(100.0))),\n                ),\n                Box::new(Stmt::Block(vec![\n                    Stmt::Block(vec![Stmt::Print(Expr::Variable(Token {\n                        ttype: TokenType::Identifier,\n                        lexeme: \"i\".to_string(),\n                        literal: Literal::Empty,\n                        line: 3,\n                    }))]),\n                    Stmt::Expression(Expr::Assign(\n                        Token {\n                            ttype: TokenType::Identifier,\n                            lexeme: \"i\".to_string(),\n                            literal: Literal::Empty,\n                            line: 2,\n                        },\n                        Box::new(Expr::Binary(\n                            Box::new(Expr::Variable(Token {\n                                ttype: TokenType::Identifier,\n                                lexeme: \"i\".to_string(),\n                                literal: Literal::Empty,\n                                line: 2,\n                            })),\n                            Token {\n                                ttype: TokenType::Plus,\n                                lexeme: \"+\".to_string(),\n                                literal: Literal::Empty,\n                                line: 2,\n                            },\n                            Box::new(Expr::Literal(Literal::Number(1.0))),\n                        )),\n                    )),\n                ])),\n            ),\n        ]))];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn whilestmt() {\n        let test = String::from(\n            r#\"\n            ligamen a = 0;\n            dum(a \u003c 100) {\n                a = a + 1;\n            }\n            \"#,\n        );\n        let res = process(test);\n        let expected = vec![\n            ASTNode::StmtNode(Stmt::Var(\n                Token {\n                    ttype: TokenType::Identifier,\n                    lexeme: String::from(\"a\"),\n                    literal: Literal::Empty,\n                    line: 2,\n                },\n                Some(Expr::Literal(Literal::Number(0.0))),\n            )),\n            ASTNode::StmtNode(Stmt::While(\n                Expr::Binary(\n                    Box::new(Expr::Variable(Token {\n                        ttype: TokenType::Identifier,\n                        lexeme: String::from(\"a\"),\n                        literal: Literal::Empty,\n                        line: 3,\n                    })),\n                    Token {\n                        ttype: TokenType::Less,\n                        lexeme: String::from(\"\u003c\"),\n                        literal: Literal::Empty,\n                        line: 3,\n                    },\n                    Box::new(Expr::Literal(Literal::Number(100.0))),\n                ),\n                Box::new(Stmt::Block(vec![Stmt::Expression(Expr::Assign(\n                    Token {\n                        ttype: TokenType::Identifier,\n                        lexeme: String::from(\"a\"),\n                        literal: Literal::Empty,\n                        line: 4,\n                    },\n                    Box::new(Expr::Binary(\n                        Box::new(Expr::Variable(Token {\n                            ttype: TokenType::Identifier,\n                            lexeme: String::from(\"a\"),\n                            literal: Literal::Empty,\n                            line: 4,\n                        })),\n                        Token {\n                            ttype: TokenType::Plus,\n                            lexeme: String::from(\"+\"),\n                            literal: Literal::Empty,\n                            line: 4,\n                        },\n                        Box::new(Expr::Literal(Literal::Number(1.0))),\n                    )),\n                ))])),\n            )),\n        ];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn logic_ops() {\n        let and = String::from(\"verum et nihil;\");\n        let andres = process(and);\n        let expectedand = vec![ASTNode::StmtNode(Stmt::Expression(Expr::Logic(\n            Box::new(Expr::Literal(Literal::Bool(true))),\n            Token::new(TokenType::And, String::from(\"et\"), Literal::Empty, 1),\n            Box::new(Expr::Literal(Literal::Empty)),\n        )))];\n        assert!(andres == expectedand);\n\n        let or = String::from(\"verum vel nihil;\");\n        let orres = process(or);\n\n        let expectedor = vec![ASTNode::StmtNode(Stmt::Expression(Expr::Logic(\n            Box::new(Expr::Literal(Literal::Bool(true))),\n            Token::new(TokenType::Or, String::from(\"vel\"), Literal::Empty, 1),\n            Box::new(Expr::Literal(Literal::Empty)),\n        )))];\n        assert!(orres == expectedor);\n    }\n\n    fn process(testcase: String) -\u003e Vec\u003cASTNode\u003e {\n        let tok = Scanner::scan(testcase);\n        Parser::parse(tok)\n    }\n}\n","traces":[{"line":22,"address":[904512],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":35,"address":[904783,904592],"length":1,"stats":{"Line":1},"fn_name":"parse_self"},{"line":36,"address":[904625],"length":1,"stats":{"Line":1},"fn_name":null},{"line":37,"address":[904635],"length":1,"stats":{"Line":1},"fn_name":null},{"line":39,"address":[904718],"length":1,"stats":{"Line":1},"fn_name":null},{"line":53,"address":[904910,904800],"length":1,"stats":{"Line":1},"fn_name":"parse"},{"line":54,"address":[904813],"length":1,"stats":{"Line":1},"fn_name":null},{"line":55,"address":[904863],"length":1,"stats":{"Line":1},"fn_name":null},{"line":60,"address":[904944],"length":1,"stats":{"Line":1},"fn_name":"declaration"},{"line":61,"address":[904974],"length":1,"stats":{"Line":1},"fn_name":null},{"line":62,"address":[905085],"length":1,"stats":{"Line":1},"fn_name":null},{"line":64,"address":[905055,905108],"length":1,"stats":{"Line":2},"fn_name":null},{"line":65,"address":[905193],"length":1,"stats":{"Line":1},"fn_name":null},{"line":67,"address":[905176],"length":1,"stats":{"Line":1},"fn_name":null},{"line":71,"address":[905200,905966],"length":1,"stats":{"Line":1},"fn_name":"function"},{"line":72,"address":[905230],"length":1,"stats":{"Line":1},"fn_name":null},{"line":73,"address":[905255],"length":1,"stats":{"Line":1},"fn_name":null},{"line":74,"address":[905346],"length":1,"stats":{"Line":1},"fn_name":null},{"line":75,"address":[905358],"length":1,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[905478],"length":1,"stats":{"Line":0},"fn_name":null},{"line":78,"address":[905537],"length":1,"stats":{"Line":0},"fn_name":null},{"line":83,"address":[905645,905439],"length":1,"stats":{"Line":2},"fn_name":null},{"line":84,"address":[905657],"length":1,"stats":{"Line":1},"fn_name":null},{"line":85,"address":[905716],"length":1,"stats":{"Line":1},"fn_name":null},{"line":86,"address":[905723],"length":1,"stats":{"Line":1},"fn_name":null},{"line":93,"address":[906678,905984],"length":1,"stats":{"Line":1},"fn_name":"var_decl"},{"line":95,"address":[906014],"length":1,"stats":{"Line":1},"fn_name":null},{"line":100,"address":[906039,906146],"length":1,"stats":{"Line":2},"fn_name":null},{"line":101,"address":[906219],"length":1,"stats":{"Line":1},"fn_name":null},{"line":102,"address":[906343],"length":1,"stats":{"Line":1},"fn_name":null},{"line":103,"address":[906429],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[906565,906172],"length":1,"stats":{"Line":2},"fn_name":null},{"line":106,"address":[906572],"length":1,"stats":{"Line":1},"fn_name":null},{"line":116,"address":[906704],"length":1,"stats":{"Line":1},"fn_name":"statement"},{"line":117,"address":[906734],"length":1,"stats":{"Line":1},"fn_name":null},{"line":118,"address":[906851],"length":1,"stats":{"Line":1},"fn_name":null},{"line":120,"address":[906874,906821],"length":1,"stats":{"Line":2},"fn_name":null},{"line":121,"address":[906974],"length":1,"stats":{"Line":1},"fn_name":null},{"line":123,"address":[906944,906986],"length":1,"stats":{"Line":2},"fn_name":null},{"line":124,"address":[907081],"length":1,"stats":{"Line":1},"fn_name":null},{"line":126,"address":[907056,907152],"length":1,"stats":{"Line":2},"fn_name":null},{"line":127,"address":[907252],"length":1,"stats":{"Line":1},"fn_name":null},{"line":129,"address":[907222,907267],"length":1,"stats":{"Line":2},"fn_name":null},{"line":130,"address":[907367],"length":1,"stats":{"Line":1},"fn_name":null},{"line":132,"address":[907382,907337],"length":1,"stats":{"Line":2},"fn_name":null},{"line":133,"address":[907482],"length":1,"stats":{"Line":1},"fn_name":null},{"line":135,"address":[907462],"length":1,"stats":{"Line":1},"fn_name":null},{"line":140,"address":[907704,907504],"length":1,"stats":{"Line":1},"fn_name":"parse_print"},{"line":141,"address":[907534],"length":1,"stats":{"Line":1},"fn_name":null},{"line":142,"address":[907549],"length":1,"stats":{"Line":1},"fn_name":null},{"line":143,"address":[907629],"length":1,"stats":{"Line":1},"fn_name":null},{"line":150,"address":[907728,908269],"length":1,"stats":{"Line":1},"fn_name":"parse_return"},{"line":151,"address":[907758],"length":1,"stats":{"Line":1},"fn_name":null},{"line":152,"address":[907773],"length":1,"stats":{"Line":1},"fn_name":null},{"line":153,"address":[908064,907782],"length":1,"stats":{"Line":2},"fn_name":null},{"line":154,"address":[907910,908069],"length":1,"stats":{"Line":1},"fn_name":null},{"line":156,"address":[908127,907863],"length":1,"stats":{"Line":2},"fn_name":null},{"line":157,"address":[908134],"length":1,"stats":{"Line":1},"fn_name":null},{"line":161,"address":[908546,908288],"length":1,"stats":{"Line":1},"fn_name":"block"},{"line":162,"address":[908321],"length":1,"stats":{"Line":1},"fn_name":null},{"line":163,"address":[908331,908401],"length":1,"stats":{"Line":2},"fn_name":null},{"line":164,"address":[908489],"length":1,"stats":{"Line":1},"fn_name":null},{"line":166,"address":[908448,908526],"length":1,"stats":{"Line":2},"fn_name":null},{"line":172,"address":[909187,908576],"length":1,"stats":{"Line":1},"fn_name":"while_stmt"},{"line":173,"address":[908606],"length":1,"stats":{"Line":1},"fn_name":null},{"line":174,"address":[908655],"length":1,"stats":{"Line":1},"fn_name":null},{"line":175,"address":[908681],"length":1,"stats":{"Line":1},"fn_name":null},{"line":176,"address":[908781],"length":1,"stats":{"Line":1},"fn_name":null},{"line":177,"address":[908788,909064,909127],"length":1,"stats":{"Line":2},"fn_name":null},{"line":183,"address":[910528,909232],"length":1,"stats":{"Line":1},"fn_name":"if_stmt"},{"line":184,"address":[909262],"length":1,"stats":{"Line":1},"fn_name":null},{"line":185,"address":[909333],"length":1,"stats":{"Line":1},"fn_name":null},{"line":186,"address":[909359],"length":1,"stats":{"Line":1},"fn_name":null},{"line":188,"address":[909459],"length":1,"stats":{"Line":1},"fn_name":null},{"line":189,"address":[909474],"length":1,"stats":{"Line":1},"fn_name":null},{"line":191,"address":[909499,909610,910019],"length":1,"stats":{"Line":3},"fn_name":null},{"line":192,"address":[909933,910024],"length":1,"stats":{"Line":1},"fn_name":null},{"line":194,"address":[910090,910260,909635,910420],"length":1,"stats":{"Line":2},"fn_name":null},{"line":207,"address":[910560,914363],"length":1,"stats":{"Line":1},"fn_name":"parse_for"},{"line":208,"address":[910605],"length":1,"stats":{"Line":1},"fn_name":null},{"line":214,"address":[910708,910828],"length":1,"stats":{"Line":2},"fn_name":null},{"line":215,"address":[910875],"length":1,"stats":{"Line":0},"fn_name":null},{"line":216,"address":[910992,911253,910860,911180],"length":1,"stats":{"Line":3},"fn_name":null},{"line":217,"address":[911105],"length":1,"stats":{"Line":1},"fn_name":null},{"line":219,"address":[911082,911185],"length":1,"stats":{"Line":0},"fn_name":null},{"line":223,"address":[910937],"length":1,"stats":{"Line":1},"fn_name":null},{"line":224,"address":[910957,911262,911537],"length":1,"stats":{"Line":3},"fn_name":null},{"line":225,"address":[911542,911369],"length":1,"stats":{"Line":1},"fn_name":null},{"line":227,"address":[911611,911319],"length":1,"stats":{"Line":2},"fn_name":null},{"line":229,"address":[911626],"length":1,"stats":{"Line":1},"fn_name":null},{"line":230,"address":[911975,911646],"length":1,"stats":{"Line":2},"fn_name":null},{"line":231,"address":[911980,911807],"length":1,"stats":{"Line":1},"fn_name":null},{"line":233,"address":[911757,912049],"length":1,"stats":{"Line":2},"fn_name":null},{"line":236,"address":[912072],"length":1,"stats":{"Line":1},"fn_name":null},{"line":238,"address":[912087],"length":1,"stats":{"Line":1},"fn_name":null},{"line":240,"address":[912124],"length":1,"stats":{"Line":1},"fn_name":null},{"line":241,"address":[912358,912775,912262],"length":1,"stats":{"Line":3},"fn_name":null},{"line":242,"address":[912857],"length":1,"stats":{"Line":1},"fn_name":null},{"line":244,"address":[913260],"length":1,"stats":{"Line":0},"fn_name":null},{"line":245,"address":[912886,913226,913265],"length":1,"stats":{"Line":0},"fn_name":null},{"line":248,"address":[913326,913685,913076,913491],"length":1,"stats":{"Line":3},"fn_name":null},{"line":250,"address":[913745,913661],"length":1,"stats":{"Line":1},"fn_name":null},{"line":251,"address":[913760],"length":1,"stats":{"Line":1},"fn_name":null},{"line":252,"address":[913816,914037],"length":1,"stats":{"Line":2},"fn_name":null},{"line":259,"address":[912282],"length":1,"stats":{"Line":1},"fn_name":null},{"line":265,"address":[914712,914512],"length":1,"stats":{"Line":1},"fn_name":"expression_stmt"},{"line":266,"address":[914542],"length":1,"stats":{"Line":1},"fn_name":null},{"line":267,"address":[914557],"length":1,"stats":{"Line":1},"fn_name":null},{"line":268,"address":[914637],"length":1,"stats":{"Line":1},"fn_name":null},{"line":273,"address":[914736],"length":1,"stats":{"Line":1},"fn_name":"expression"},{"line":274,"address":[914753],"length":1,"stats":{"Line":1},"fn_name":null},{"line":278,"address":[916035,914768],"length":1,"stats":{"Line":1},"fn_name":"assignment"},{"line":279,"address":[914798],"length":1,"stats":{"Line":1},"fn_name":null},{"line":281,"address":[914962,914853],"length":1,"stats":{"Line":2},"fn_name":null},{"line":283,"address":[915037],"length":1,"stats":{"Line":1},"fn_name":null},{"line":284,"address":[915057],"length":1,"stats":{"Line":1},"fn_name":null},{"line":288,"address":[915072],"length":1,"stats":{"Line":1},"fn_name":null},{"line":289,"address":[915125],"length":1,"stats":{"Line":1},"fn_name":null},{"line":290,"address":[915207,915923,915829],"length":1,"stats":{"Line":2},"fn_name":null},{"line":294,"address":[915691,915537],"length":1,"stats":{"Line":0},"fn_name":null},{"line":295,"address":[915750],"length":1,"stats":{"Line":0},"fn_name":null},{"line":299,"address":[914988],"length":1,"stats":{"Line":1},"fn_name":null},{"line":305,"address":[916128,917305],"length":1,"stats":{"Line":1},"fn_name":"parse_or"},{"line":306,"address":[916161],"length":1,"stats":{"Line":1},"fn_name":null},{"line":308,"address":[916203,916308,917189],"length":1,"stats":{"Line":3},"fn_name":null},{"line":309,"address":[916371],"length":1,"stats":{"Line":1},"fn_name":null},{"line":310,"address":[916399],"length":1,"stats":{"Line":1},"fn_name":null},{"line":311,"address":[917071,916675,917194,916419],"length":1,"stats":{"Line":3},"fn_name":null},{"line":313,"address":[916334],"length":1,"stats":{"Line":1},"fn_name":null},{"line":317,"address":[917344,918521],"length":1,"stats":{"Line":1},"fn_name":"parse_and"},{"line":318,"address":[917377],"length":1,"stats":{"Line":1},"fn_name":null},{"line":320,"address":[917419,917524,918405],"length":1,"stats":{"Line":3},"fn_name":null},{"line":321,"address":[917587],"length":1,"stats":{"Line":1},"fn_name":null},{"line":322,"address":[917615],"length":1,"stats":{"Line":1},"fn_name":null},{"line":323,"address":[917635,917891,918287,918410],"length":1,"stats":{"Line":3},"fn_name":null},{"line":325,"address":[917550],"length":1,"stats":{"Line":1},"fn_name":null},{"line":329,"address":[919757,918560],"length":1,"stats":{"Line":1},"fn_name":"equality"},{"line":330,"address":[918593],"length":1,"stats":{"Line":1},"fn_name":null},{"line":332,"address":[918760,919641,918640],"length":1,"stats":{"Line":3},"fn_name":null},{"line":333,"address":[918823],"length":1,"stats":{"Line":1},"fn_name":null},{"line":334,"address":[918851],"length":1,"stats":{"Line":1},"fn_name":null},{"line":335,"address":[918871,919127,919646,919523],"length":1,"stats":{"Line":3},"fn_name":null},{"line":337,"address":[918786],"length":1,"stats":{"Line":1},"fn_name":null},{"line":341,"address":[921025,919792],"length":1,"stats":{"Line":1},"fn_name":"comparison"},{"line":342,"address":[919825],"length":1,"stats":{"Line":1},"fn_name":null},{"line":344,"address":[919872,919921,920909,920028],"length":1,"stats":{"Line":4},"fn_name":null},{"line":345,"address":[919889],"length":1,"stats":{"Line":1},"fn_name":null},{"line":346,"address":[919897],"length":1,"stats":{"Line":1},"fn_name":null},{"line":347,"address":[919905],"length":1,"stats":{"Line":1},"fn_name":null},{"line":348,"address":[919913],"length":1,"stats":{"Line":1},"fn_name":null},{"line":350,"address":[920091],"length":1,"stats":{"Line":1},"fn_name":null},{"line":351,"address":[920119],"length":1,"stats":{"Line":1},"fn_name":null},{"line":352,"address":[920914,920395,920791,920139],"length":1,"stats":{"Line":3},"fn_name":null},{"line":354,"address":[920054],"length":1,"stats":{"Line":1},"fn_name":null},{"line":358,"address":[921056,922253],"length":1,"stats":{"Line":1},"fn_name":"term"},{"line":359,"address":[921089],"length":1,"stats":{"Line":1},"fn_name":null},{"line":360,"address":[921136,921256,922137],"length":1,"stats":{"Line":3},"fn_name":null},{"line":361,"address":[921319],"length":1,"stats":{"Line":1},"fn_name":null},{"line":362,"address":[921347],"length":1,"stats":{"Line":1},"fn_name":null},{"line":363,"address":[922019,921623,921367,922142],"length":1,"stats":{"Line":3},"fn_name":null},{"line":365,"address":[921282],"length":1,"stats":{"Line":1},"fn_name":null},{"line":369,"address":[923485,922288],"length":1,"stats":{"Line":1},"fn_name":"factor"},{"line":370,"address":[922321],"length":1,"stats":{"Line":1},"fn_name":null},{"line":371,"address":[922488,922368,923369],"length":1,"stats":{"Line":3},"fn_name":null},{"line":372,"address":[922551],"length":1,"stats":{"Line":1},"fn_name":null},{"line":373,"address":[922579],"length":1,"stats":{"Line":1},"fn_name":null},{"line":374,"address":[922855,923374,922599,923251],"length":1,"stats":{"Line":3},"fn_name":null},{"line":376,"address":[922514],"length":1,"stats":{"Line":1},"fn_name":null},{"line":381,"address":[923520,924183],"length":1,"stats":{"Line":1},"fn_name":"unary"},{"line":384,"address":[923550,924124],"length":1,"stats":{"Line":2},"fn_name":null},{"line":385,"address":[923678],"length":1,"stats":{"Line":1},"fn_name":null},{"line":386,"address":[923709],"length":1,"stats":{"Line":1},"fn_name":null},{"line":387,"address":[923716,924126,924074],"length":1,"stats":{"Line":2},"fn_name":null},{"line":390,"address":[923663],"length":1,"stats":{"Line":1},"fn_name":null},{"line":398,"address":[924224,924586],"length":1,"stats":{"Line":1},"fn_name":"call"},{"line":399,"address":[924257],"length":1,"stats":{"Line":1},"fn_name":null},{"line":400,"address":[924581],"length":1,"stats":{"Line":1},"fn_name":null},{"line":401,"address":[924283,924382],"length":1,"stats":{"Line":2},"fn_name":null},{"line":402,"address":[924442],"length":1,"stats":{"Line":1},"fn_name":null},{"line":407,"address":[924408],"length":1,"stats":{"Line":1},"fn_name":null},{"line":410,"address":[925419,924624],"length":1,"stats":{"Line":1},"fn_name":"parse_arglist"},{"line":411,"address":[924659],"length":1,"stats":{"Line":1},"fn_name":null},{"line":412,"address":[924692,924758],"length":1,"stats":{"Line":2},"fn_name":null},{"line":414,"address":[924852],"length":1,"stats":{"Line":0},"fn_name":null},{"line":415,"address":[924884],"length":1,"stats":{"Line":0},"fn_name":null},{"line":420,"address":[924805],"length":1,"stats":{"Line":1},"fn_name":null},{"line":421,"address":[925197,924989],"length":1,"stats":{"Line":2},"fn_name":null},{"line":428,"address":[925456,927321],"length":1,"stats":{"Line":1},"fn_name":"primary"},{"line":429,"address":[925495],"length":1,"stats":{"Line":1},"fn_name":null},{"line":430,"address":[925642],"length":1,"stats":{"Line":0},"fn_name":null},{"line":432,"address":[925737,925611],"length":1,"stats":{"Line":2},"fn_name":null},{"line":433,"address":[925844],"length":1,"stats":{"Line":1},"fn_name":null},{"line":435,"address":[925816,925925],"length":1,"stats":{"Line":2},"fn_name":null},{"line":436,"address":[926026],"length":1,"stats":{"Line":1},"fn_name":null},{"line":438,"address":[925998,926099],"length":1,"stats":{"Line":2},"fn_name":null},{"line":439,"address":[926203],"length":1,"stats":{"Line":1},"fn_name":null},{"line":441,"address":[926367,926172],"length":1,"stats":{"Line":2},"fn_name":null},{"line":442,"address":[926471],"length":1,"stats":{"Line":1},"fn_name":null},{"line":444,"address":[926635,926440],"length":1,"stats":{"Line":2},"fn_name":null},{"line":445,"address":[926736],"length":1,"stats":{"Line":1},"fn_name":null},{"line":448,"address":[926708,926804],"length":1,"stats":{"Line":2},"fn_name":null},{"line":449,"address":[926911],"length":1,"stats":{"Line":1},"fn_name":null},{"line":450,"address":[926940],"length":1,"stats":{"Line":1},"fn_name":null},{"line":451,"address":[927297,927047],"length":1,"stats":{"Line":2},"fn_name":null},{"line":453,"address":[926885,927359],"length":1,"stats":{"Line":0},"fn_name":null},{"line":459,"address":[927552,928309],"length":1,"stats":{"Line":1},"fn_name":"consume"},{"line":461,"address":[927600],"length":1,"stats":{"Line":1},"fn_name":null},{"line":462,"address":[927702],"length":1,"stats":{"Line":1},"fn_name":null},{"line":464,"address":[927731,927795],"length":1,"stats":{"Line":0},"fn_name":null},{"line":467,"address":[927671],"length":1,"stats":{"Line":0},"fn_name":null},{"line":469,"address":[927767],"length":1,"stats":{"Line":0},"fn_name":null},{"line":476,"address":[928336,928629],"length":1,"stats":{"Line":1},"fn_name":"maybe_advance"},{"line":477,"address":[928543,928617,928356],"length":1,"stats":{"Line":3},"fn_name":null},{"line":478,"address":[928538,928553],"length":1,"stats":{"Line":2},"fn_name":null},{"line":479,"address":[928590],"length":1,"stats":{"Line":1},"fn_name":null},{"line":480,"address":[928612],"length":1,"stats":{"Line":1},"fn_name":null},{"line":483,"address":[928661],"length":1,"stats":{"Line":1},"fn_name":null},{"line":487,"address":[928819,928672],"length":1,"stats":{"Line":1},"fn_name":"check"},{"line":488,"address":[928693],"length":1,"stats":{"Line":1},"fn_name":null},{"line":489,"address":[928729],"length":1,"stats":{"Line":1},"fn_name":null},{"line":491,"address":[928748,928717],"length":1,"stats":{"Line":2},"fn_name":null},{"line":495,"address":[928832],"length":1,"stats":{"Line":1},"fn_name":"next"},{"line":496,"address":[928939,928864],"length":1,"stats":{"Line":2},"fn_name":null},{"line":497,"address":[928941,928905],"length":1,"stats":{"Line":1},"fn_name":null},{"line":499,"address":[928893],"length":1,"stats":{"Line":1},"fn_name":null},{"line":503,"address":[928992],"length":1,"stats":{"Line":1},"fn_name":"peek"},{"line":504,"address":[929024],"length":1,"stats":{"Line":1},"fn_name":null},{"line":508,"address":[929205,929120],"length":1,"stats":{"Line":1},"fn_name":"at_end"},{"line":509,"address":[929132],"length":1,"stats":{"Line":1},"fn_name":null},{"line":513,"address":[929232],"length":1,"stats":{"Line":1},"fn_name":"previous"},{"line":514,"address":[929264],"length":1,"stats":{"Line":1},"fn_name":null},{"line":524,"address":[806096,807036],"length":1,"stats":{"Line":3},"fn_name":"vardecl"},{"line":525,"address":[806103],"length":1,"stats":{"Line":1},"fn_name":null},{"line":526,"address":[806125],"length":1,"stats":{"Line":1},"fn_name":null},{"line":527,"address":[806170],"length":1,"stats":{"Line":1},"fn_name":null},{"line":528,"address":[806389,806237,806600],"length":1,"stats":{"Line":2},"fn_name":null},{"line":529,"address":[806331,806259],"length":1,"stats":{"Line":2},"fn_name":null},{"line":530,"address":[806428],"length":1,"stats":{"Line":1},"fn_name":null},{"line":532,"address":[806914,806992],"length":1,"stats":{"Line":1},"fn_name":null},{"line":536,"address":[807773,807072],"length":1,"stats":{"Line":3},"fn_name":"vardel_no_initializer"},{"line":537,"address":[807079],"length":1,"stats":{"Line":1},"fn_name":null},{"line":538,"address":[807101],"length":1,"stats":{"Line":1},"fn_name":null},{"line":539,"address":[807156,807308,807349],"length":1,"stats":{"Line":2},"fn_name":null},{"line":540,"address":[807178,807250],"length":1,"stats":{"Line":2},"fn_name":null},{"line":541,"address":[807337],"length":1,"stats":{"Line":1},"fn_name":null},{"line":543,"address":[807729,807657],"length":1,"stats":{"Line":1},"fn_name":null},{"line":547,"address":[553360,553365],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":554,"address":[807837],"length":1,"stats":{"Line":1},"fn_name":null},{"line":556,"address":[807892,808044,808518],"length":1,"stats":{"Line":2},"fn_name":null},{"line":557,"address":[807994],"length":1,"stats":{"Line":1},"fn_name":null},{"line":558,"address":[807914],"length":1,"stats":{"Line":1},"fn_name":null},{"line":559,"address":[807922],"length":1,"stats":{"Line":1},"fn_name":null},{"line":560,"address":[807986],"length":1,"stats":{"Line":1},"fn_name":null},{"line":563,"address":[808081],"length":1,"stats":{"Line":1},"fn_name":null},{"line":564,"address":[808226,808098],"length":1,"stats":{"Line":2},"fn_name":null},{"line":565,"address":[808157],"length":1,"stats":{"Line":1},"fn_name":null},{"line":568,"address":[808850,808778],"length":1,"stats":{"Line":1},"fn_name":null},{"line":572,"address":[553392,553397],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":573,"address":[808935],"length":1,"stats":{"Line":1},"fn_name":null},{"line":574,"address":[808957],"length":1,"stats":{"Line":1},"fn_name":null},{"line":575,"address":[809050,809012],"length":1,"stats":{"Line":2},"fn_name":null},{"line":576,"address":[809034],"length":1,"stats":{"Line":1},"fn_name":null},{"line":578,"address":[809359,809428],"length":1,"stats":{"Line":1},"fn_name":null},{"line":582,"address":[810838,809504],"length":1,"stats":{"Line":3},"fn_name":"return_test"},{"line":589,"address":[809533],"length":1,"stats":{"Line":1},"fn_name":null},{"line":590,"address":[809740,810450,809588],"length":1,"stats":{"Line":2},"fn_name":null},{"line":591,"address":[809690],"length":1,"stats":{"Line":1},"fn_name":null},{"line":592,"address":[809610],"length":1,"stats":{"Line":1},"fn_name":null},{"line":593,"address":[809618],"length":1,"stats":{"Line":1},"fn_name":null},{"line":594,"address":[809682],"length":1,"stats":{"Line":1},"fn_name":null},{"line":597,"address":[809777],"length":1,"stats":{"Line":1},"fn_name":null},{"line":598,"address":[810199,809983,809794],"length":1,"stats":{"Line":2},"fn_name":null},{"line":599,"address":[809933],"length":1,"stats":{"Line":1},"fn_name":null},{"line":600,"address":[809853],"length":1,"stats":{"Line":1},"fn_name":null},{"line":601,"address":[809861],"length":1,"stats":{"Line":1},"fn_name":null},{"line":602,"address":[809925],"length":1,"stats":{"Line":1},"fn_name":null},{"line":605,"address":[810027],"length":1,"stats":{"Line":1},"fn_name":null},{"line":608,"address":[810716,810794],"length":1,"stats":{"Line":1},"fn_name":null},{"line":612,"address":[553456,553461],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":619,"address":[810893],"length":1,"stats":{"Line":1},"fn_name":null},{"line":620,"address":[810948,811100,811640],"length":1,"stats":{"Line":2},"fn_name":null},{"line":621,"address":[811050],"length":1,"stats":{"Line":1},"fn_name":null},{"line":622,"address":[810970],"length":1,"stats":{"Line":1},"fn_name":null},{"line":623,"address":[810978],"length":1,"stats":{"Line":1},"fn_name":null},{"line":624,"address":[811042],"length":1,"stats":{"Line":1},"fn_name":null},{"line":627,"address":[811137],"length":1,"stats":{"Line":1},"fn_name":null},{"line":628,"address":[811343,811154,811389],"length":1,"stats":{"Line":2},"fn_name":null},{"line":629,"address":[811293],"length":1,"stats":{"Line":1},"fn_name":null},{"line":630,"address":[811213],"length":1,"stats":{"Line":1},"fn_name":null},{"line":631,"address":[811221],"length":1,"stats":{"Line":1},"fn_name":null},{"line":632,"address":[811285],"length":1,"stats":{"Line":1},"fn_name":null},{"line":635,"address":[811377],"length":1,"stats":{"Line":1},"fn_name":null},{"line":638,"address":[811972,811900],"length":1,"stats":{"Line":1},"fn_name":null},{"line":642,"address":[553488,553493],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":650,"address":[812077],"length":1,"stats":{"Line":1},"fn_name":null},{"line":651,"address":[812135,812572,812503,813025],"length":1,"stats":{"Line":2},"fn_name":null},{"line":652,"address":[812221],"length":1,"stats":{"Line":1},"fn_name":null},{"line":653,"address":[812157],"length":1,"stats":{"Line":1},"fn_name":null},{"line":655,"address":[812654,812486],"length":1,"stats":{"Line":2},"fn_name":null},{"line":656,"address":[812545,812614],"length":1,"stats":{"Line":2},"fn_name":null},{"line":659,"address":[813097,813175],"length":1,"stats":{"Line":1},"fn_name":null},{"line":663,"address":[553520,553525],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":671,"address":[813641,814893,813306],"length":1,"stats":{"Line":2},"fn_name":null},{"line":672,"address":[813993],"length":1,"stats":{"Line":1},"fn_name":null},{"line":673,"address":[813347,813590],"length":1,"stats":{"Line":2},"fn_name":null},{"line":674,"address":[813598,813702],"length":1,"stats":{"Line":2},"fn_name":null},{"line":675,"address":[813805],"length":1,"stats":{"Line":1},"fn_name":null},{"line":677,"address":[814333,814119,814751],"length":1,"stats":{"Line":3},"fn_name":null},{"line":678,"address":[814293,814201],"length":1,"stats":{"Line":2},"fn_name":null},{"line":680,"address":[814759],"length":1,"stats":{"Line":1},"fn_name":null},{"line":682,"address":[815204],"length":1,"stats":{"Line":1},"fn_name":null},{"line":683,"address":[815338,815398,815283],"length":1,"stats":{"Line":2},"fn_name":null},{"line":687,"address":[553552,553557],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":688,"address":[815511],"length":1,"stats":{"Line":1},"fn_name":null},{"line":689,"address":[815536],"length":1,"stats":{"Line":1},"fn_name":null},{"line":690,"address":[815615,818225,815949],"length":1,"stats":{"Line":2},"fn_name":null},{"line":691,"address":[815656,815898],"length":1,"stats":{"Line":2},"fn_name":null},{"line":692,"address":[816018],"length":1,"stats":{"Line":1},"fn_name":null},{"line":693,"address":[815906],"length":1,"stats":{"Line":1},"fn_name":null},{"line":694,"address":[815914],"length":1,"stats":{"Line":1},"fn_name":null},{"line":695,"address":[816010],"length":1,"stats":{"Line":1},"fn_name":null},{"line":698,"address":[817833,818077],"length":1,"stats":{"Line":2},"fn_name":null},{"line":699,"address":[816118,816360],"length":1,"stats":{"Line":2},"fn_name":null},{"line":700,"address":[816550],"length":1,"stats":{"Line":1},"fn_name":null},{"line":701,"address":[816368],"length":1,"stats":{"Line":1},"fn_name":null},{"line":702,"address":[816376],"length":1,"stats":{"Line":1},"fn_name":null},{"line":703,"address":[816542],"length":1,"stats":{"Line":1},"fn_name":null},{"line":706,"address":[817589],"length":1,"stats":{"Line":1},"fn_name":null},{"line":707,"address":[816892,816650],"length":1,"stats":{"Line":2},"fn_name":null},{"line":708,"address":[817044],"length":1,"stats":{"Line":1},"fn_name":null},{"line":709,"address":[816900],"length":1,"stats":{"Line":1},"fn_name":null},{"line":710,"address":[816908],"length":1,"stats":{"Line":1},"fn_name":null},{"line":711,"address":[817036],"length":1,"stats":{"Line":1},"fn_name":null},{"line":714,"address":[817144,817368],"length":1,"stats":{"Line":2},"fn_name":null},{"line":720,"address":[818662,818584],"length":1,"stats":{"Line":1},"fn_name":null},{"line":724,"address":[553589,553584],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":725,"address":[818743],"length":1,"stats":{"Line":1},"fn_name":null},{"line":726,"address":[818768],"length":1,"stats":{"Line":1},"fn_name":null},{"line":727,"address":[818847,819002,819223],"length":1,"stats":{"Line":2},"fn_name":null},{"line":728,"address":[818869,818944],"length":1,"stats":{"Line":2},"fn_name":null},{"line":729,"address":[819041],"length":1,"stats":{"Line":1},"fn_name":null},{"line":731,"address":[819620,819710],"length":1,"stats":{"Line":1},"fn_name":null},{"line":733,"address":[819683],"length":1,"stats":{"Line":1},"fn_name":null},{"line":734,"address":[819742],"length":1,"stats":{"Line":1},"fn_name":null},{"line":735,"address":[819807,820173,819962],"length":1,"stats":{"Line":2},"fn_name":null},{"line":736,"address":[819829,819904],"length":1,"stats":{"Line":2},"fn_name":null},{"line":737,"address":[819991],"length":1,"stats":{"Line":1},"fn_name":null},{"line":739,"address":[820648,820570],"length":1,"stats":{"Line":1},"fn_name":null},{"line":743,"address":[553621,553616],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":753,"address":[822898,820810,821145],"length":1,"stats":{"Line":2},"fn_name":null},{"line":754,"address":[821503],"length":1,"stats":{"Line":1},"fn_name":null},{"line":755,"address":[820851,821094],"length":1,"stats":{"Line":2},"fn_name":null},{"line":756,"address":[821102,821206],"length":1,"stats":{"Line":2},"fn_name":null},{"line":757,"address":[821309],"length":1,"stats":{"Line":1},"fn_name":null},{"line":759,"address":[821629,821855,822273],"length":1,"stats":{"Line":3},"fn_name":null},{"line":760,"address":[821815,821723],"length":1,"stats":{"Line":2},"fn_name":null},{"line":762,"address":[822291,822445],"length":1,"stats":{"Line":2},"fn_name":null},{"line":763,"address":[822405,822313],"length":1,"stats":{"Line":2},"fn_name":null},{"line":766,"address":[823149],"length":1,"stats":{"Line":1},"fn_name":null},{"line":767,"address":[823283,823343,823228],"length":1,"stats":{"Line":2},"fn_name":null},{"line":771,"address":[553648,553653],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":779,"address":[823478],"length":1,"stats":{"Line":1},"fn_name":null},{"line":780,"address":[823704,824246,823557,824593,827884],"length":1,"stats":{"Line":2},"fn_name":null},{"line":781,"address":[824007],"length":1,"stats":{"Line":1},"fn_name":null},{"line":782,"address":[823741],"length":1,"stats":{"Line":1},"fn_name":null},{"line":784,"address":[823669],"length":1,"stats":{"Line":1},"fn_name":null},{"line":785,"address":[823733],"length":1,"stats":{"Line":1},"fn_name":null},{"line":788,"address":[823835],"length":1,"stats":{"Line":1},"fn_name":null},{"line":790,"address":[827722],"length":1,"stats":{"Line":1},"fn_name":null},{"line":791,"address":[825066],"length":1,"stats":{"Line":1},"fn_name":null},{"line":792,"address":[824286,824673],"length":1,"stats":{"Line":2},"fn_name":null},{"line":794,"address":[824211],"length":1,"stats":{"Line":1},"fn_name":null},{"line":795,"address":[824278],"length":1,"stats":{"Line":1},"fn_name":null},{"line":798,"address":[824724],"length":1,"stats":{"Line":1},"fn_name":null},{"line":799,"address":[824681],"length":1,"stats":{"Line":1},"fn_name":null},{"line":800,"address":[824689],"length":1,"stats":{"Line":1},"fn_name":null},{"line":801,"address":[824716],"length":1,"stats":{"Line":1},"fn_name":null},{"line":804,"address":[824824],"length":1,"stats":{"Line":1},"fn_name":null},{"line":806,"address":[826085,827477,825192,825443],"length":1,"stats":{"Line":2},"fn_name":null},{"line":807,"address":[825491,825305],"length":1,"stats":{"Line":2},"fn_name":null},{"line":809,"address":[825408],"length":1,"stats":{"Line":1},"fn_name":null},{"line":810,"address":[825483],"length":1,"stats":{"Line":1},"fn_name":null},{"line":813,"address":[827223],"length":1,"stats":{"Line":1},"fn_name":null},{"line":814,"address":[825968],"length":1,"stats":{"Line":1},"fn_name":null},{"line":815,"address":[825925],"length":1,"stats":{"Line":1},"fn_name":null},{"line":816,"address":[825933],"length":1,"stats":{"Line":1},"fn_name":null},{"line":817,"address":[825960],"length":1,"stats":{"Line":1},"fn_name":null},{"line":820,"address":[826915],"length":1,"stats":{"Line":1},"fn_name":null},{"line":821,"address":[826133,826540],"length":1,"stats":{"Line":2},"fn_name":null},{"line":823,"address":[826058],"length":1,"stats":{"Line":1},"fn_name":null},{"line":824,"address":[826125],"length":1,"stats":{"Line":1},"fn_name":null},{"line":827,"address":[826591],"length":1,"stats":{"Line":1},"fn_name":null},{"line":828,"address":[826548],"length":1,"stats":{"Line":1},"fn_name":null},{"line":829,"address":[826556],"length":1,"stats":{"Line":1},"fn_name":null},{"line":830,"address":[826583],"length":1,"stats":{"Line":1},"fn_name":null},{"line":833,"address":[826691],"length":1,"stats":{"Line":1},"fn_name":null},{"line":839,"address":[828112,828190],"length":1,"stats":{"Line":1},"fn_name":null},{"line":843,"address":[553680,553685],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":852,"address":[828304],"length":1,"stats":{"Line":1},"fn_name":null},{"line":853,"address":[828383,829377,832081,829030],"length":1,"stats":{"Line":2},"fn_name":null},{"line":854,"address":[828749],"length":1,"stats":{"Line":1},"fn_name":null},{"line":855,"address":[828489],"length":1,"stats":{"Line":1},"fn_name":null},{"line":857,"address":[828414],"length":1,"stats":{"Line":1},"fn_name":null},{"line":858,"address":[828481],"length":1,"stats":{"Line":1},"fn_name":null},{"line":861,"address":[828573],"length":1,"stats":{"Line":1},"fn_name":null},{"line":863,"address":[831871],"length":1,"stats":{"Line":1},"fn_name":null},{"line":864,"address":[829850],"length":1,"stats":{"Line":1},"fn_name":null},{"line":865,"address":[829457,829070],"length":1,"stats":{"Line":2},"fn_name":null},{"line":867,"address":[828995],"length":1,"stats":{"Line":1},"fn_name":null},{"line":868,"address":[829062],"length":1,"stats":{"Line":1},"fn_name":null},{"line":871,"address":[829508],"length":1,"stats":{"Line":1},"fn_name":null},{"line":872,"address":[829465],"length":1,"stats":{"Line":1},"fn_name":null},{"line":873,"address":[829473],"length":1,"stats":{"Line":1},"fn_name":null},{"line":874,"address":[829500],"length":1,"stats":{"Line":1},"fn_name":null},{"line":877,"address":[829608],"length":1,"stats":{"Line":1},"fn_name":null},{"line":879,"address":[829976,830319,831425],"length":1,"stats":{"Line":2},"fn_name":null},{"line":880,"address":[830194],"length":1,"stats":{"Line":1},"fn_name":null},{"line":881,"address":[830079],"length":1,"stats":{"Line":1},"fn_name":null},{"line":882,"address":[830087],"length":1,"stats":{"Line":1},"fn_name":null},{"line":883,"address":[830186],"length":1,"stats":{"Line":1},"fn_name":null},{"line":886,"address":[831117],"length":1,"stats":{"Line":1},"fn_name":null},{"line":887,"address":[830359,830742],"length":1,"stats":{"Line":2},"fn_name":null},{"line":889,"address":[830284],"length":1,"stats":{"Line":1},"fn_name":null},{"line":890,"address":[830351],"length":1,"stats":{"Line":1},"fn_name":null},{"line":893,"address":[830793],"length":1,"stats":{"Line":1},"fn_name":null},{"line":894,"address":[830750],"length":1,"stats":{"Line":1},"fn_name":null},{"line":895,"address":[830758],"length":1,"stats":{"Line":1},"fn_name":null},{"line":896,"address":[830785],"length":1,"stats":{"Line":1},"fn_name":null},{"line":899,"address":[830893],"length":1,"stats":{"Line":1},"fn_name":null},{"line":904,"address":[832240,832162],"length":1,"stats":{"Line":1},"fn_name":null},{"line":908,"address":[553712,553717],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":909,"address":[832327],"length":1,"stats":{"Line":1},"fn_name":null},{"line":910,"address":[832352],"length":1,"stats":{"Line":1},"fn_name":null},{"line":911,"address":[832755,833095,832431],"length":1,"stats":{"Line":2},"fn_name":null},{"line":912,"address":[832462,832704],"length":1,"stats":{"Line":2},"fn_name":null},{"line":913,"address":[832816,832712],"length":1,"stats":{"Line":2},"fn_name":null},{"line":914,"address":[832909],"length":1,"stats":{"Line":1},"fn_name":null},{"line":916,"address":[833616,833526],"length":1,"stats":{"Line":1},"fn_name":null},{"line":918,"address":[833589],"length":1,"stats":{"Line":1},"fn_name":null},{"line":919,"address":[833648],"length":1,"stats":{"Line":1},"fn_name":null},{"line":921,"address":[834007,833713,834320],"length":1,"stats":{"Line":2},"fn_name":null},{"line":922,"address":[833735,833959],"length":1,"stats":{"Line":2},"fn_name":null},{"line":923,"address":[833967,834056],"length":1,"stats":{"Line":2},"fn_name":null},{"line":924,"address":[834146],"length":1,"stats":{"Line":1},"fn_name":null},{"line":926,"address":[834811,834733],"length":1,"stats":{"Line":1},"fn_name":null},{"line":929,"address":[805984],"length":1,"stats":{"Line":1},"fn_name":"process"},{"line":930,"address":[805997],"length":1,"stats":{"Line":1},"fn_name":null},{"line":931,"address":[806042],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":433,"coverable":448},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","scanner.rs"],"content":"use std::collections::HashMap;\n\nuse substring::Substring;\n\nuse lazy_static::*;\n\nuse crate::literals::Literal;\nuse crate::token::Token;\nuse crate::tokentype::TokenType;\n\n/// Given raw source code, this struct provides tools to lex/tokenize it.\npub struct Scanner {\n    /// Input raw source code\n    src: String,\n    /// List of tokens that have been lexed so far.\n    tokens: Vec\u003cToken\u003e,\n    /// Starting position of the current token\n    start: usize,\n    /// Index of the current character under the cursor.\n    current: usize,\n    /// Line counter for better error reporting.\n    line: usize,\n}\n\n/// Represent error conditions in the lexer.\nenum ScanError {\n    UknownCharacter((usize, char)),\n    UnterminatedBlockComment(usize),\n    UnterminatedString(usize),\n    NumParseError((usize, String)),\n}\n\nlazy_static! {\n    /// This is a list of all reserved keywords in daemonica.\n    ///\n    /// We use lazy-static so we only need to initialize this once, and then we\n    /// can access it throughout the code base as a safe global.\n    static ref KEYWORDS: HashMap\u003cString, TokenType\u003e = {\n        let mut m = HashMap::new();\n        m.insert(\"et\".to_string(), TokenType::And);\n        m.insert(\"vel\".to_string(), TokenType::Or);\n        m.insert(\"si\".to_string(), TokenType::If);\n        m.insert(\"aliter\".to_string(), TokenType::Else);\n        m.insert(\"verum\".to_string(), TokenType::True);\n        m.insert(\"mendacium\".to_string(), TokenType::False);\n        m.insert(\"incantatio\".to_string(), TokenType::Fn);\n        m.insert(\"beneficium\".to_string(), TokenType::Return);\n        m.insert(\"enim\".to_string(), TokenType::For);\n        m.insert(\"dum\".to_string(), TokenType::While);\n        m.insert(\"nihil\".to_string(), TokenType::None);\n        m.insert(\"anima\".to_string(), TokenType::Self_);\n        m.insert(\"ligamen\".to_string(), TokenType::Var);\n        m.insert(\"daemonium\".to_string(), TokenType::Class);\n        m.insert(\"cognatio\".to_string(), TokenType::Super);\n        m.insert(\"invocabo\".to_string(), TokenType::Call);\n        m.insert(\"scribo\".to_string(), TokenType::Print);\n        return m;\n    };\n}\n\nimpl Scanner {\n    /// Given some source, produce a new Scanner instance.\n    pub fn new(src: String) -\u003e Scanner {\n        Scanner {\n            src,\n            tokens: Vec::new(),\n            start: 0,\n            current: 0,\n            line: 1,\n        }\n    }\n\n    /// Convinience function. Provides a way to just do execution without needing\n    /// a sepperate instantiation of the lexer.\n    pub fn scan(src: String) -\u003e Vec\u003cToken\u003e {\n        let mut s = self::Scanner::new(src);\n        s.scan_tokens()\n    }\n\n    /// Main loop. This contains the flow control for the lexing process.\n    ///\n    /// Continue lexing until we either hit EOF, or until we encounter some error.\n    pub fn scan_tokens(\u0026mut self) -\u003e Vec\u003cToken\u003e {\n        // This allows us for some flow control wherein if we do find an invalid\n        // section, then we keep on going until we reach the end, and only THEN\n        // panic. This lets us catch all the lexing errors at once.\n        let mut had_error: bool = false;\n        while !self.at_end() {\n            self.start = self.current;\n            // Scan a token and add it to the vec of tokens\n            match self.scan_token() {\n                // If no errors keep on going\n                Ok(_) =\u003e {}\n                // Error reporting\n                Err(x) =\u003e match x {\n                    ScanError::UknownCharacter(x) =\u003e {\n                        eprintln!(\"Scanned invald token {} on line {}\", x.1, x.0);\n                        had_error = true;\n                    }\n                    ScanError::UnterminatedBlockComment(x) =\u003e {\n                        eprintln!(\n                            \"Lexer encountered unterminated block comment ('/* */') at line {}\",\n                            x\n                        );\n                        had_error = true;\n                    }\n                    ScanError::UnterminatedString(x) =\u003e {\n                        eprintln!(\"Lexer encountered unterminated String at line {}\", x);\n                        had_error = true;\n                    }\n                    ScanError::NumParseError(x) =\u003e {\n                        eprintln!(\"Lexer encountered invalid number {} at line {}\", x.1, x.0);\n                        had_error = true;\n                    }\n                },\n            }\n        }\n        // Push our EOF token when we break the loop.\n        self.tokens.push(Token::new(\n            TokenType::EOF,\n            \"\".to_string(),\n            Literal::Empty,\n            self.line,\n        ));\n        // if we produced an error, we need to report it, as well as terminate.\n        // panic does both.\n        match had_error {\n            true =\u003e {\n                panic!(\"Invalid tokens. Terminating.\");\n            }\n            false =\u003e {\n                return self.tokens.clone();\n            }\n        }\n    }\n\n    /// Lex tokens. Implemented as a big match statement.\n    ///\n    /// If we see known tokens, we add them to the list of tokens we have lexed.\n    /// For certain values such as \\\"\\\" which represent strings or for numeric values\n    /// we branch out to helper functions to lex them.\n    ///\n    /// Most of the time this lexer operates as 1 lookahead, in order to match\n    /// 2-char long statements such as != and ==.\n    ///\n    /// Join the One Big ~~Union~~ Match Statement.\n    fn scan_token(\u0026mut self) -\u003e Result\u003c(), ScanError\u003e {\n        let c: char = self.next();\n        match c {\n            '(' =\u003e {\n                self.add_token(TokenType::LeftParen);\n            }\n            ')' =\u003e {\n                self.add_token(TokenType::RightParen);\n            }\n            '{' =\u003e {\n                self.add_token(TokenType::LeftBrace);\n            }\n            '}' =\u003e {\n                self.add_token(TokenType::RightBrace);\n            }\n            ';' =\u003e {\n                self.add_token(TokenType::Semicolon);\n            }\n            ',' =\u003e {\n                self.add_token(TokenType::Comma);\n            }\n            '.' =\u003e {\n                self.add_token(TokenType::Dot);\n            }\n            '*' =\u003e {\n                self.add_token(TokenType::Star);\n            }\n            '-' =\u003e {\n                self.add_token(TokenType::Minus);\n            }\n            '+' =\u003e {\n                self.add_token(TokenType::Plus);\n            }\n            // We need lookahead on these, so we look 1c ahead for thse pesky\n            // compoud operations.\n            '!' =\u003e {\n                if self.match_next('=') {\n                    self.add_token(TokenType::BangEqual)\n                } else {\n                    self.add_token(TokenType::Bang)\n                }\n            }\n            '=' =\u003e {\n                if self.match_next('=') {\n                    self.add_token(TokenType::EqualEqual);\n                } else {\n                    self.add_token(TokenType::Equal);\n                }\n            }\n            '\u003e' =\u003e {\n                if self.match_next('=') {\n                    self.add_token(TokenType::GreaterEqual);\n                } else {\n                    self.add_token(TokenType::Greater);\n                }\n            }\n            '\u003c' =\u003e {\n                if self.match_next('=') {\n                    self.add_token(TokenType::LessEqual);\n                } else {\n                    self.add_token(TokenType::Less);\n                }\n            }\n            '/' =\u003e {\n                // Check for divide or line comment\n                if self.match_next('/') {\n                    while self.peek() != '\\n' \u0026\u0026 !self.at_end() {\n                        self.next();\n                    }\n                }\n                // Check for block comment\n                else if self.match_next('*') {\n                    while self.peek() != '*' \u0026\u0026 self.peek_n(2) != '/' {\n                        self.next();\n                        // if the next token is \\n then we need to increment\n                        // the line counter for error reporting\n                        if self.peek() == '\\n' {\n                            self.line += 1;\n                        }\n                        // Error out if the user forgot to terminate their block\n                        // comment\n                        if self.at_end() {\n                            return Err(ScanError::UnterminatedBlockComment(self.line));\n                        }\n                    }\n                    self.next();\n                    self.next();\n                    self.next();\n                } else {\n                    self.add_token(TokenType::Slash);\n                }\n            }\n            '\"' =\u003e {\n                self.lex_string()?;\n            }\n            '0' | '1' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9' =\u003e {\n                self.lex_number()?;\n            }\n\n            ' ' =\u003e {}\n            '\\r' =\u003e {}\n            '\\t' =\u003e {}\n            '\\n' =\u003e self.line += 1,\n            _ =\u003e {\n                // Base case, anything else that falls through here is treated\n                // as an identifier.\n                if c.is_ascii_alphanumeric() {\n                    self.lex_identifier();\n                } else {\n                    return Err(ScanError::UknownCharacter((self.line, c)));\n                }\n            }\n        }\n        Ok(())\n    }\n\n    /// Keep peeking until our next token is a closing \", adding each char to a string.\n    /// If the \"\" is unterminated, we report an error. Otherwise we return\n    /// the lexed string.\n    fn lex_string(\u0026mut self) -\u003e Result\u003c(), ScanError\u003e {\n        while self.peek() != '\"' \u0026\u0026 self.at_end() == false {\n            if self.peek() == '\\n' {\n                self.line += 1;\n            }\n\n            self.next();\n        }\n\n        if self.at_end() {\n            return Err(ScanError::UnterminatedString(self.line));\n        }\n\n        // Consume the closing \"\n        self.next();\n\n        // Slice off the \"\"\n        let text = self\n            .src\n            .substring(self.start + 1, self.current - 1)\n            .to_string();\n        self.add_token_with_literal(TokenType::String, Literal::StrLit(text.clone()));\n\n        Ok(())\n    }\n\n    /// Simmialr to our string function, keep peeking while we have numeric parts.\n    ///\n    /// We need some special handling since we allow floats. As such we look 2-ahead\n    /// after we break out of our first loop. If we have a number after it, we know that\n    /// everything after is the fractional part.\n    /// Another annoying edge case where we need to be 2-lookahead.\n    fn lex_number(\u0026mut self) -\u003e Result\u003c(), ScanError\u003e {\n        while self.peek().is_numeric() {\n            self.next();\n        }\n\n        // Do we have a decimal point?\n        if self.peek() == '.' \u0026\u0026 self.peek_n(1).is_numeric() {\n            // Consume the .\n            self.next();\n            while self.peek().is_numeric() {\n                self.next();\n            }\n        }\n\n        let text = self.src.substring(self.start, self.current);\n\n        match text.parse::\u003cf64\u003e() {\n            Ok(x) =\u003e {\n                self.add_token_with_literal(TokenType::Number, Literal::Number(x));\n                Ok(())\n            }\n            Err(v) =\u003e {\n                eprintln!(\"{}\", v);\n                return Err(ScanError::NumParseError((self.line, text.to_string())));\n            }\n        }\n    }\n\n    /// Lexes identifiers for fns/vars/keywords etc.\n    ///\n    /// If we get a keyword we grab it's raw value from our keywords list\n    /// if we dont, then we just put the lexed value as a Identifier token.\n    fn lex_identifier(\u0026mut self) {\n        while self.peek().is_ascii_alphanumeric() {\n            self.next();\n        }\n\n        let text = self.src.substring(self.start, self.current).to_string();\n        match KEYWORDS.deref().get(\u0026text) {\n            Some(x) =\u003e {\n                self.add_token(x.clone());\n            }\n            None =\u003e {\n                self.add_token(TokenType::Identifier);\n            }\n        }\n    }\n\n    /// Look current+n ahead, without consuming the token.\n    fn peek_n(\u0026self, n: usize) -\u003e char {\n        if self.at_end() || self.current + n \u003e= self.src.len() {\n            return '\\0';\n        } else {\n            return self.src.chars().nth(self.current + n).unwrap();\n        }\n    }\n\n    /// Lookahead 1-char without peeking.\n    fn peek(\u0026self) -\u003e char {\n        if self.at_end() {\n            return '\\0';\n        } else {\n            return self.src.chars().nth(self.current).unwrap();\n        }\n    }\n\n    // Probably wont need this, but having n char lookahead for debugging\n    // can be pretty useful.\n    /// Used for debugging. Allows for n-lookahead lexing. Not designed for\n    /// actual consumption but is good for fixing bugs.\n    fn match_n_ahead(\u0026mut self, expect: char, n: usize) -\u003e bool {\n        if self.at_end() || self.current + n \u003e= self.src.len() {\n            return false;\n        }\n\n        if self.src.chars().nth(self.current + n).unwrap() != expect {\n            return false;\n        }\n\n        self.current += n;\n        return true;\n    }\n\n    /// Predicate function. If expect is the next char true, else false.\n    fn match_next(\u0026mut self, expect: char) -\u003e bool {\n        if self.at_end() {\n            return false;\n        }\n\n        if self.src.chars().nth(self.current).unwrap() != expect {\n            return false;\n        }\n\n        self.current += 1;\n        return true;\n    }\n\n    /// Add a processed token to our token vec\n    /// we grab the text of the current lexeme, and create a token for it.\n    fn add_token(\u0026mut self, ttype: TokenType) {\n        let text = self.src.substring(self.start, self.current).to_string();\n        self.tokens\n            .push(Token::new(ttype, text, Literal::Empty, self.line))\n    }\n\n    /// Add a procesesd token, that has a literal value to our vec.\n    fn add_token_with_literal(\u0026mut self, ttype: TokenType, lit: Literal) {\n        let text = self.src.substring(self.start, self.current).to_string();\n        self.tokens.push(Token::new(ttype, text, lit, self.line))\n    }\n\n    /// Consume the next character in the source file and return it.\n    fn next(\u0026mut self) -\u003e char {\n        let rv = self.src.chars().nth(self.current).unwrap();\n        self.current += 1;\n        rv\n    }\n\n    fn at_end(\u0026self) -\u003e bool {\n        self.current \u003e= self.src.len()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use crate::scanner::*;\n    use crate::token::*;\n    #[test]\n    fn number_literal() {\n        let test: String = \"5;\".to_string();\n        let mut s: Scanner = Scanner::new(test);\n        let tokens = s.scan_tokens();\n        let five = Token::new(TokenType::Number, \"5\".to_string(), Literal::Number(5.0), 1);\n        let semicolon = Token::new(TokenType::Semicolon, \";\".to_string(), Literal::Empty, 1);\n        let eof = Token::new(TokenType::EOF, \"\".to_string(), Literal::Empty, 1);\n        let expected = vec![five, semicolon, eof];\n        assert!(expected == tokens);\n    }\n\n    #[test]\n    fn parenthesized_exprs() {\n        let test: String = \"5 + (3 * (8));\".to_string();\n        let expected = vec![\n            Token::new(TokenType::Number, \"5\".to_string(), Literal::Number(5.0), 1),\n            Token::new(TokenType::Plus, \"+\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::LeftParen, \"(\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::Number, \"3\".to_string(), Literal::Number(3.0), 1),\n            Token::new(TokenType::Star, \"*\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::LeftParen, \"(\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::Number, \"8\".to_string(), Literal::Number(8.0), 1),\n            Token::new(TokenType::RightParen, \")\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::RightParen, \")\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::Semicolon, \";\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::EOF, \"\".to_string(), Literal::Empty, 1),\n        ];\n        let mut s: Scanner = Scanner::new(test);\n        let tokens = s.scan_tokens();\n        assert!(expected == tokens);\n    }\n\n    #[test]\n    fn and_test() {\n        let test: String = \"et;\".to_string();\n        let expected = vec![\n            Token::new(TokenType::And, \"et\".to_string(), Literal::Empty, 1),\n            get_semicolon(1),\n            get_eof(1),\n        ];\n        let mut s: Scanner = Scanner::new(test);\n        let tokens = s.scan_tokens();\n        assert!(expected == tokens);\n    }\n\n    #[test]\n    fn maximal_munch() {\n        let velocity: String = \"velocity;\".to_string();\n        let expected = vec![\n            Token::new(\n                TokenType::Identifier,\n                \"velocity\".to_string(),\n                Literal::Empty,\n                1,\n            ),\n            get_semicolon(1),\n            get_eof(1),\n        ];\n        let mut s: Scanner = Scanner::new(velocity);\n        let tokens = s.scan_tokens();\n        assert!(expected == tokens);\n    }\n\n    #[test]\n    fn scan_direct() {\n        let test = String::from(\"ligamen a = 5;\");\n        let results = crate::scanner::Scanner::scan(test);\n        let expected = vec![\n            Token {\n                ttype: TokenType::Var,\n                lexeme: \"ligamen\".to_string(),\n                literal: Literal::Empty,\n                line: 1,\n            },\n            Token {\n                ttype: TokenType::Identifier,\n                lexeme: \"a\".to_string(),\n                literal: Literal::Empty,\n                line: 1,\n            },\n            Token {\n                ttype: TokenType::Equal,\n                lexeme: \"=\".to_string(),\n                literal: Literal::Empty,\n                line: 1,\n            },\n            Token {\n                ttype: TokenType::Number,\n                lexeme: \"5\".to_string(),\n                literal: Literal::Number(5.0),\n                line: 1,\n            },\n            get_semicolon(1),\n            get_eof(1),\n        ];\n        assert!(expected == results);\n    }\n\n    #[test]\n    fn comments() {\n        let linecomment = String::from(\"// This is a line comment.\");\n        let expected = vec![get_eof(1)];\n        let res = crate::scanner::Scanner::scan(linecomment);\n        assert!(res == expected);\n        let expected = vec![get_eof(2)];\n        let blockcomment = String::from(\"/*Block comments\\nCan Span multiple lines.*/\");\n        let res = crate::scanner::Scanner::scan(blockcomment);\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn non_fractional_num() {\n        let test = String::from(\"3.0;\");\n        let result = crate::scanner::Scanner::scan(test);\n        let expected = vec![\n            Token::new(\n                TokenType::Number,\n                String::from(\"3.0\"),\n                Literal::Number(3.0),\n                1,\n            ),\n            get_semicolon(1),\n            get_eof(1),\n        ];\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn fractional_numbers() {\n        let test = String::from(\"3.14159;\");\n        let result = crate::scanner::Scanner::scan(test);\n        let expected = [\n            vec![Token::new(\n                TokenType::Number,\n                String::from(\"3.14159\"),\n                Literal::Number(3.14159),\n                1,\n            )],\n            get_end(1),\n        ]\n        .concat();\n        assert!(result == expected);\n    }\n\n    #[test]\n    #[should_panic]\n    /// We only support ASCII-alphanumeric because whilst it's acceptable in rust\n    /// having to discriminate between identifiers and such is kind of a mess.\n    /// This is also what most people expect, for better or for worse.\n    fn scan_invalid_chars() {\n        let test = String::from(\"\");\n        crate::scanner::Scanner::scan(test);\n    }\n\n    #[test]\n    #[should_panic]\n    fn unterminated_string() {\n        let test = String::from(\"\\\"This is not terminated.\");\n        crate::scanner::Scanner::scan(test);\n    }\n\n    #[test]\n    #[should_panic]\n    fn unterminated_block_comment() {\n        let test = String::from(\"/*ligamen a = \\\"test\\\";\");\n        crate::scanner::Scanner::scan(test);\n    }\n\n    fn get_end(line: usize) -\u003e Vec\u003cToken\u003e {\n        vec![get_semicolon(line), get_eof(line)]\n    }\n\n    fn get_eof(line: usize) -\u003e Token {\n        Token::new(TokenType::EOF, \"\".to_string(), Literal::Empty, line)\n    }\n\n    fn get_semicolon(line: usize) -\u003e Token {\n        Token {\n            ttype: TokenType::Semicolon,\n            lexeme: \";\".to_string(),\n            literal: Literal::Empty,\n            line,\n        }\n    }\n}\n","traces":[{"line":39,"address":[839060],"length":1,"stats":{"Line":1},"fn_name":null},{"line":40,"address":[839065],"length":1,"stats":{"Line":1},"fn_name":null},{"line":41,"address":[839161],"length":1,"stats":{"Line":1},"fn_name":null},{"line":42,"address":[839212],"length":1,"stats":{"Line":1},"fn_name":null},{"line":43,"address":[839269],"length":1,"stats":{"Line":1},"fn_name":null},{"line":44,"address":[839332],"length":1,"stats":{"Line":1},"fn_name":null},{"line":45,"address":[839395],"length":1,"stats":{"Line":1},"fn_name":null},{"line":46,"address":[839458],"length":1,"stats":{"Line":1},"fn_name":null},{"line":47,"address":[839521],"length":1,"stats":{"Line":1},"fn_name":null},{"line":48,"address":[839584],"length":1,"stats":{"Line":1},"fn_name":null},{"line":49,"address":[839647],"length":1,"stats":{"Line":1},"fn_name":null},{"line":50,"address":[839710],"length":1,"stats":{"Line":1},"fn_name":null},{"line":51,"address":[839773],"length":1,"stats":{"Line":1},"fn_name":null},{"line":52,"address":[839836],"length":1,"stats":{"Line":1},"fn_name":null},{"line":53,"address":[839899],"length":1,"stats":{"Line":1},"fn_name":null},{"line":54,"address":[839962],"length":1,"stats":{"Line":1},"fn_name":null},{"line":55,"address":[840025],"length":1,"stats":{"Line":1},"fn_name":null},{"line":56,"address":[840088],"length":1,"stats":{"Line":1},"fn_name":null},{"line":63,"address":[557218,557056],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":66,"address":[557091],"length":1,"stats":{"Line":1},"fn_name":null},{"line":75,"address":[557350,557232],"length":1,"stats":{"Line":2},"fn_name":"scan"},{"line":76,"address":[557249],"length":1,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[557300],"length":1,"stats":{"Line":1},"fn_name":null},{"line":83,"address":[557376,558303],"length":1,"stats":{"Line":1},"fn_name":"scan_tokens"},{"line":87,"address":[557415],"length":1,"stats":{"Line":1},"fn_name":null},{"line":88,"address":[557431,557568],"length":1,"stats":{"Line":2},"fn_name":null},{"line":89,"address":[557521],"length":1,"stats":{"Line":1},"fn_name":null},{"line":91,"address":[557529],"length":1,"stats":{"Line":1},"fn_name":null},{"line":95,"address":[557573],"length":1,"stats":{"Line":1},"fn_name":null},{"line":96,"address":[557663],"length":1,"stats":{"Line":1},"fn_name":null},{"line":97,"address":[557693,558509],"length":1,"stats":{"Line":2},"fn_name":null},{"line":98,"address":[558635],"length":1,"stats":{"Line":1},"fn_name":null},{"line":100,"address":[557794],"length":1,"stats":{"Line":1},"fn_name":null},{"line":101,"address":[557810,558422],"length":1,"stats":{"Line":2},"fn_name":null},{"line":105,"address":[558491],"length":1,"stats":{"Line":1},"fn_name":null},{"line":107,"address":[557870],"length":1,"stats":{"Line":1},"fn_name":null},{"line":108,"address":[558333,557886],"length":1,"stats":{"Line":2},"fn_name":null},{"line":109,"address":[558402],"length":1,"stats":{"Line":1},"fn_name":null},{"line":111,"address":[557946],"length":1,"stats":{"Line":0},"fn_name":null},{"line":112,"address":[557978,558188],"length":1,"stats":{"Line":0},"fn_name":null},{"line":113,"address":[558280],"length":1,"stats":{"Line":0},"fn_name":null},{"line":119,"address":[557464,558668],"length":1,"stats":{"Line":2},"fn_name":null},{"line":120,"address":[557476],"length":1,"stats":{"Line":1},"fn_name":null},{"line":121,"address":[557484],"length":1,"stats":{"Line":1},"fn_name":null},{"line":122,"address":[558656],"length":1,"stats":{"Line":1},"fn_name":null},{"line":123,"address":[558664],"length":1,"stats":{"Line":1},"fn_name":null},{"line":127,"address":[558726],"length":1,"stats":{"Line":1},"fn_name":null},{"line":129,"address":[558763],"length":1,"stats":{"Line":1},"fn_name":null},{"line":132,"address":[558752],"length":1,"stats":{"Line":1},"fn_name":null},{"line":147,"address":[558848],"length":1,"stats":{"Line":1},"fn_name":"scan_token"},{"line":148,"address":[558886],"length":1,"stats":{"Line":1},"fn_name":null},{"line":149,"address":[558895],"length":1,"stats":{"Line":1},"fn_name":null},{"line":151,"address":[558959],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[558984],"length":1,"stats":{"Line":1},"fn_name":null},{"line":157,"address":[559009],"length":1,"stats":{"Line":1},"fn_name":null},{"line":160,"address":[559034],"length":1,"stats":{"Line":1},"fn_name":null},{"line":163,"address":[559059],"length":1,"stats":{"Line":1},"fn_name":null},{"line":166,"address":[559084],"length":1,"stats":{"Line":0},"fn_name":null},{"line":169,"address":[559109],"length":1,"stats":{"Line":0},"fn_name":null},{"line":172,"address":[559134],"length":1,"stats":{"Line":1},"fn_name":null},{"line":175,"address":[559159],"length":1,"stats":{"Line":1},"fn_name":null},{"line":178,"address":[559184],"length":1,"stats":{"Line":1},"fn_name":null},{"line":183,"address":[560490,559209],"length":1,"stats":{"Line":2},"fn_name":null},{"line":184,"address":[560526],"length":1,"stats":{"Line":1},"fn_name":null},{"line":186,"address":[560501],"length":1,"stats":{"Line":1},"fn_name":null},{"line":190,"address":[559233,560430],"length":1,"stats":{"Line":2},"fn_name":null},{"line":191,"address":[560466],"length":1,"stats":{"Line":1},"fn_name":null},{"line":193,"address":[560441],"length":1,"stats":{"Line":1},"fn_name":null},{"line":197,"address":[560370,559257],"length":1,"stats":{"Line":2},"fn_name":null},{"line":198,"address":[560406],"length":1,"stats":{"Line":1},"fn_name":null},{"line":200,"address":[560381],"length":1,"stats":{"Line":1},"fn_name":null},{"line":204,"address":[559281,560310],"length":1,"stats":{"Line":2},"fn_name":null},{"line":205,"address":[560346],"length":1,"stats":{"Line":1},"fn_name":null},{"line":207,"address":[560321],"length":1,"stats":{"Line":1},"fn_name":null},{"line":212,"address":[559861,559305],"length":1,"stats":{"Line":2},"fn_name":null},{"line":213,"address":[559893],"length":1,"stats":{"Line":1},"fn_name":null},{"line":214,"address":[559960],"length":1,"stats":{"Line":1},"fn_name":null},{"line":218,"address":[559872,559971],"length":1,"stats":{"Line":2},"fn_name":null},{"line":219,"address":[560013],"length":1,"stats":{"Line":1},"fn_name":null},{"line":220,"address":[560100],"length":1,"stats":{"Line":1},"fn_name":null},{"line":223,"address":[560185,560110],"length":1,"stats":{"Line":2},"fn_name":null},{"line":224,"address":[560133,560187,560181],"length":1,"stats":{"Line":2},"fn_name":null},{"line":228,"address":[560160,560221],"length":1,"stats":{"Line":2},"fn_name":null},{"line":229,"address":[560240],"length":1,"stats":{"Line":1},"fn_name":null},{"line":232,"address":[560085],"length":1,"stats":{"Line":1},"fn_name":null},{"line":233,"address":[560286],"length":1,"stats":{"Line":1},"fn_name":null},{"line":234,"address":[560296],"length":1,"stats":{"Line":1},"fn_name":null},{"line":236,"address":[559982],"length":1,"stats":{"Line":1},"fn_name":null},{"line":239,"address":[559777],"length":1,"stats":{"Line":1},"fn_name":null},{"line":240,"address":[559329,559730,559782],"length":1,"stats":{"Line":3},"fn_name":null},{"line":242,"address":[559650],"length":1,"stats":{"Line":1},"fn_name":null},{"line":243,"address":[559352,559655,559603],"length":1,"stats":{"Line":2},"fn_name":null},{"line":249,"address":[559564,559392],"length":1,"stats":{"Line":2},"fn_name":null},{"line":253,"address":[558935,559425],"length":1,"stats":{"Line":2},"fn_name":null},{"line":254,"address":[559531],"length":1,"stats":{"Line":1},"fn_name":null},{"line":256,"address":[559441],"length":1,"stats":{"Line":1},"fn_name":null},{"line":260,"address":[559375],"length":1,"stats":{"Line":1},"fn_name":null},{"line":266,"address":[560560,561223],"length":1,"stats":{"Line":1},"fn_name":"lex_string"},{"line":267,"address":[560595],"length":1,"stats":{"Line":1},"fn_name":null},{"line":268,"address":[560748,560674],"length":1,"stats":{"Line":1},"fn_name":null},{"line":269,"address":[560750,560744,560697],"length":1,"stats":{"Line":0},"fn_name":null},{"line":272,"address":[560724],"length":1,"stats":{"Line":1},"fn_name":null},{"line":275,"address":[560784,560658],"length":1,"stats":{"Line":2},"fn_name":null},{"line":276,"address":[560812],"length":1,"stats":{"Line":1},"fn_name":null},{"line":280,"address":[560795],"length":1,"stats":{"Line":1},"fn_name":null},{"line":283,"address":[560980,561038,560863],"length":1,"stats":{"Line":3},"fn_name":null},{"line":285,"address":[560998,560883],"length":1,"stats":{"Line":1},"fn_name":null},{"line":287,"address":[561051],"length":1,"stats":{"Line":1},"fn_name":null},{"line":289,"address":[561197],"length":1,"stats":{"Line":1},"fn_name":null},{"line":298,"address":[561248],"length":1,"stats":{"Line":1},"fn_name":"lex_number"},{"line":299,"address":[561283],"length":1,"stats":{"Line":1},"fn_name":null},{"line":300,"address":[561336],"length":1,"stats":{"Line":1},"fn_name":null},{"line":304,"address":[561320,561347],"length":1,"stats":{"Line":2},"fn_name":null},{"line":306,"address":[561439],"length":1,"stats":{"Line":1},"fn_name":null},{"line":307,"address":[561449],"length":1,"stats":{"Line":1},"fn_name":null},{"line":308,"address":[561486],"length":1,"stats":{"Line":1},"fn_name":null},{"line":312,"address":[561417,561508],"length":1,"stats":{"Line":2},"fn_name":null},{"line":314,"address":[561558],"length":1,"stats":{"Line":1},"fn_name":null},{"line":315,"address":[561632],"length":1,"stats":{"Line":1},"fn_name":null},{"line":316,"address":[561650],"length":1,"stats":{"Line":1},"fn_name":null},{"line":317,"address":[562060],"length":1,"stats":{"Line":1},"fn_name":null},{"line":319,"address":[561701],"length":1,"stats":{"Line":0},"fn_name":null},{"line":320,"address":[561714],"length":1,"stats":{"Line":0},"fn_name":null},{"line":321,"address":[561862],"length":1,"stats":{"Line":0},"fn_name":null},{"line":330,"address":[562421,562080],"length":1,"stats":{"Line":1},"fn_name":"lex_identifier"},{"line":331,"address":[562102],"length":1,"stats":{"Line":1},"fn_name":null},{"line":332,"address":[562162],"length":1,"stats":{"Line":1},"fn_name":null},{"line":335,"address":[562140,562184],"length":1,"stats":{"Line":2},"fn_name":null},{"line":336,"address":[562228,562312],"length":1,"stats":{"Line":2},"fn_name":null},{"line":337,"address":[562361],"length":1,"stats":{"Line":1},"fn_name":null},{"line":338,"address":[562374],"length":1,"stats":{"Line":1},"fn_name":null},{"line":341,"address":[562344,562419],"length":1,"stats":{"Line":2},"fn_name":null},{"line":347,"address":[562448],"length":1,"stats":{"Line":1},"fn_name":"peek_n"},{"line":348,"address":[562472],"length":1,"stats":{"Line":1},"fn_name":null},{"line":349,"address":[562626],"length":1,"stats":{"Line":1},"fn_name":null},{"line":351,"address":[562609,562653],"length":1,"stats":{"Line":2},"fn_name":null},{"line":356,"address":[562784],"length":1,"stats":{"Line":1},"fn_name":"peek"},{"line":357,"address":[562798],"length":1,"stats":{"Line":1},"fn_name":null},{"line":358,"address":[562839],"length":1,"stats":{"Line":1},"fn_name":null},{"line":360,"address":[562822,562866],"length":1,"stats":{"Line":2},"fn_name":null},{"line":368,"address":[562928],"length":1,"stats":{"Line":0},"fn_name":"match_n_ahead"},{"line":369,"address":[562966],"length":1,"stats":{"Line":0},"fn_name":null},{"line":370,"address":[563120],"length":1,"stats":{"Line":0},"fn_name":null},{"line":373,"address":[563103,563152],"length":1,"stats":{"Line":0},"fn_name":null},{"line":374,"address":[563306],"length":1,"stats":{"Line":0},"fn_name":null},{"line":377,"address":[563288,563340,563326],"length":1,"stats":{"Line":0},"fn_name":null},{"line":378,"address":[563330],"length":1,"stats":{"Line":0},"fn_name":null},{"line":382,"address":[563376],"length":1,"stats":{"Line":1},"fn_name":"match_next"},{"line":383,"address":[563398],"length":1,"stats":{"Line":1},"fn_name":null},{"line":384,"address":[563439],"length":1,"stats":{"Line":0},"fn_name":null},{"line":387,"address":[563468,563422],"length":1,"stats":{"Line":2},"fn_name":null},{"line":388,"address":[563567],"length":1,"stats":{"Line":1},"fn_name":null},{"line":391,"address":[563601,563545,563587],"length":1,"stats":{"Line":2},"fn_name":null},{"line":392,"address":[563591],"length":1,"stats":{"Line":1},"fn_name":null},{"line":397,"address":[563632],"length":1,"stats":{"Line":1},"fn_name":"add_token"},{"line":398,"address":[563666],"length":1,"stats":{"Line":1},"fn_name":null},{"line":399,"address":[563846,563749],"length":1,"stats":{"Line":2},"fn_name":null},{"line":400,"address":[563761],"length":1,"stats":{"Line":1},"fn_name":null},{"line":404,"address":[563872,564192],"length":1,"stats":{"Line":1},"fn_name":"add_token_with_literal"},{"line":405,"address":[563911,564044],"length":1,"stats":{"Line":2},"fn_name":null},{"line":406,"address":[564065],"length":1,"stats":{"Line":1},"fn_name":null},{"line":410,"address":[564224],"length":1,"stats":{"Line":1},"fn_name":"next"},{"line":411,"address":[564238],"length":1,"stats":{"Line":1},"fn_name":null},{"line":412,"address":[564332,564373],"length":1,"stats":{"Line":1},"fn_name":null},{"line":416,"address":[564416],"length":1,"stats":{"Line":1},"fn_name":"at_end"},{"line":417,"address":[564425],"length":1,"stats":{"Line":1},"fn_name":null},{"line":426,"address":[569631,568272],"length":1,"stats":{"Line":3},"fn_name":"number_literal"},{"line":427,"address":[568279],"length":1,"stats":{"Line":1},"fn_name":null},{"line":428,"address":[568325],"length":1,"stats":{"Line":1},"fn_name":null},{"line":429,"address":[568386],"length":1,"stats":{"Line":1},"fn_name":null},{"line":430,"address":[568475,568573,568393],"length":1,"stats":{"Line":3},"fn_name":null},{"line":431,"address":[568581,568710],"length":1,"stats":{"Line":2},"fn_name":null},{"line":432,"address":[568718,568846],"length":1,"stats":{"Line":2},"fn_name":null},{"line":433,"address":[568864],"length":1,"stats":{"Line":1},"fn_name":null},{"line":434,"address":[569419,569494],"length":1,"stats":{"Line":1},"fn_name":null},{"line":438,"address":[572358,569664],"length":1,"stats":{"Line":3},"fn_name":"parenthesized_exprs"},{"line":439,"address":[569671],"length":1,"stats":{"Line":1},"fn_name":null},{"line":440,"address":[569719,569890,570007,570278,570132,570808,571064,570406,571191,570936,570534,570680],"length":1,"stats":{"Line":1},"fn_name":null},{"line":441,"address":[569827,569741],"length":1,"stats":{"Line":2},"fn_name":null},{"line":442,"address":[569919],"length":1,"stats":{"Line":1},"fn_name":null},{"line":443,"address":[570044],"length":1,"stats":{"Line":1},"fn_name":null},{"line":444,"address":[570172],"length":1,"stats":{"Line":1},"fn_name":null},{"line":445,"address":[570318],"length":1,"stats":{"Line":1},"fn_name":null},{"line":446,"address":[570446],"length":1,"stats":{"Line":1},"fn_name":null},{"line":447,"address":[570574],"length":1,"stats":{"Line":1},"fn_name":null},{"line":448,"address":[570720],"length":1,"stats":{"Line":1},"fn_name":null},{"line":449,"address":[570848],"length":1,"stats":{"Line":1},"fn_name":null},{"line":450,"address":[570976],"length":1,"stats":{"Line":1},"fn_name":null},{"line":451,"address":[571104],"length":1,"stats":{"Line":1},"fn_name":null},{"line":453,"address":[572041],"length":1,"stats":{"Line":1},"fn_name":null},{"line":454,"address":[572114],"length":1,"stats":{"Line":1},"fn_name":null},{"line":455,"address":[572283,572171,572223],"length":1,"stats":{"Line":2},"fn_name":null},{"line":459,"address":[572400,573278],"length":1,"stats":{"Line":3},"fn_name":"and_test"},{"line":460,"address":[572407],"length":1,"stats":{"Line":1},"fn_name":null},{"line":461,"address":[572608,572677,572455],"length":1,"stats":{"Line":1},"fn_name":null},{"line":462,"address":[572477,572553],"length":1,"stats":{"Line":2},"fn_name":null},{"line":463,"address":[572650],"length":1,"stats":{"Line":1},"fn_name":null},{"line":464,"address":[572670],"length":1,"stats":{"Line":1},"fn_name":null},{"line":466,"address":[572961],"length":1,"stats":{"Line":1},"fn_name":null},{"line":467,"address":[573034],"length":1,"stats":{"Line":1},"fn_name":null},{"line":468,"address":[573143,573091,573203],"length":1,"stats":{"Line":2},"fn_name":null},{"line":472,"address":[573312,574190],"length":1,"stats":{"Line":3},"fn_name":"maximal_munch"},{"line":473,"address":[573319],"length":1,"stats":{"Line":1},"fn_name":null},{"line":474,"address":[573367,573589,573520],"length":1,"stats":{"Line":1},"fn_name":null},{"line":475,"address":[573473],"length":1,"stats":{"Line":1},"fn_name":null},{"line":476,"address":[573389],"length":1,"stats":{"Line":1},"fn_name":null},{"line":477,"address":[573397],"length":1,"stats":{"Line":1},"fn_name":null},{"line":478,"address":[573465],"length":1,"stats":{"Line":1},"fn_name":null},{"line":481,"address":[573562],"length":1,"stats":{"Line":1},"fn_name":null},{"line":482,"address":[573582],"length":1,"stats":{"Line":1},"fn_name":null},{"line":484,"address":[573873],"length":1,"stats":{"Line":1},"fn_name":null},{"line":485,"address":[573946],"length":1,"stats":{"Line":1},"fn_name":null},{"line":486,"address":[574115,574003,574055],"length":1,"stats":{"Line":2},"fn_name":null},{"line":490,"address":[575761,574224],"length":1,"stats":{"Line":3},"fn_name":"scan_direct"},{"line":491,"address":[574231],"length":1,"stats":{"Line":1},"fn_name":null},{"line":492,"address":[574253],"length":1,"stats":{"Line":1},"fn_name":null},{"line":493,"address":[575114,574308,574705,574878,575054,574540],"length":1,"stats":{"Line":1},"fn_name":null},{"line":494,"address":[574410],"length":1,"stats":{"Line":1},"fn_name":null},{"line":495,"address":[574330],"length":1,"stats":{"Line":1},"fn_name":null},{"line":496,"address":[574338],"length":1,"stats":{"Line":1},"fn_name":null},{"line":497,"address":[574402],"length":1,"stats":{"Line":1},"fn_name":null},{"line":500,"address":[574580],"length":1,"stats":{"Line":1},"fn_name":null},{"line":501,"address":[574500],"length":1,"stats":{"Line":1},"fn_name":null},{"line":502,"address":[574508],"length":1,"stats":{"Line":1},"fn_name":null},{"line":503,"address":[574572],"length":1,"stats":{"Line":1},"fn_name":null},{"line":506,"address":[574753],"length":1,"stats":{"Line":1},"fn_name":null},{"line":507,"address":[574670],"length":1,"stats":{"Line":1},"fn_name":null},{"line":508,"address":[574678],"length":1,"stats":{"Line":1},"fn_name":null},{"line":509,"address":[574745],"length":1,"stats":{"Line":1},"fn_name":null},{"line":512,"address":[574944],"length":1,"stats":{"Line":1},"fn_name":null},{"line":513,"address":[574843],"length":1,"stats":{"Line":1},"fn_name":null},{"line":514,"address":[574851],"length":1,"stats":{"Line":1},"fn_name":null},{"line":515,"address":[574928],"length":1,"stats":{"Line":1},"fn_name":null},{"line":518,"address":[575047],"length":1,"stats":{"Line":1},"fn_name":null},{"line":519,"address":[575107],"length":1,"stats":{"Line":1},"fn_name":null},{"line":521,"address":[575717,575645],"length":1,"stats":{"Line":1},"fn_name":null},{"line":525,"address":[575792,576712],"length":1,"stats":{"Line":3},"fn_name":"comments"},{"line":526,"address":[575799],"length":1,"stats":{"Line":1},"fn_name":null},{"line":527,"address":[575847,575932],"length":1,"stats":{"Line":2},"fn_name":null},{"line":528,"address":[576036],"length":1,"stats":{"Line":1},"fn_name":null},{"line":529,"address":[576225,576158,576106],"length":1,"stats":{"Line":2},"fn_name":null},{"line":530,"address":[576280,576213],"length":1,"stats":{"Line":2},"fn_name":null},{"line":531,"address":[576408],"length":1,"stats":{"Line":1},"fn_name":null},{"line":532,"address":[576435],"length":1,"stats":{"Line":1},"fn_name":null},{"line":533,"address":[576546,576621],"length":1,"stats":{"Line":1},"fn_name":null},{"line":537,"address":[576752,577497],"length":1,"stats":{"Line":3},"fn_name":"non_fractional_num"},{"line":538,"address":[576759],"length":1,"stats":{"Line":1},"fn_name":null},{"line":539,"address":[576781],"length":1,"stats":{"Line":1},"fn_name":null},{"line":540,"address":[577006,576836,577075],"length":1,"stats":{"Line":1},"fn_name":null},{"line":541,"address":[576956],"length":1,"stats":{"Line":1},"fn_name":null},{"line":542,"address":[576858],"length":1,"stats":{"Line":1},"fn_name":null},{"line":543,"address":[576866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":544,"address":[576940],"length":1,"stats":{"Line":1},"fn_name":null},{"line":547,"address":[577048],"length":1,"stats":{"Line":1},"fn_name":null},{"line":548,"address":[577068],"length":1,"stats":{"Line":1},"fn_name":null},{"line":550,"address":[577453,577381],"length":1,"stats":{"Line":1},"fn_name":null},{"line":554,"address":[578215,577520],"length":1,"stats":{"Line":3},"fn_name":"fractional_numbers"},{"line":555,"address":[577527],"length":1,"stats":{"Line":1},"fn_name":null},{"line":556,"address":[577549],"length":1,"stats":{"Line":1},"fn_name":null},{"line":557,"address":[577907],"length":1,"stats":{"Line":1},"fn_name":null},{"line":558,"address":[577604,577724],"length":1,"stats":{"Line":2},"fn_name":null},{"line":559,"address":[577626],"length":1,"stats":{"Line":1},"fn_name":null},{"line":560,"address":[577634],"length":1,"stats":{"Line":1},"fn_name":null},{"line":561,"address":[577708],"length":1,"stats":{"Line":1},"fn_name":null},{"line":564,"address":[577900],"length":1,"stats":{"Line":1},"fn_name":null},{"line":567,"address":[578153,578171,578101],"length":1,"stats":{"Line":2},"fn_name":null},{"line":575,"address":[578240],"length":1,"stats":{"Line":3},"fn_name":"scan_invalid_chars"},{"line":576,"address":[578244],"length":1,"stats":{"Line":1},"fn_name":null},{"line":577,"address":[578264],"length":1,"stats":{"Line":1},"fn_name":null},{"line":582,"address":[578336],"length":1,"stats":{"Line":3},"fn_name":"unterminated_string"},{"line":583,"address":[578340],"length":1,"stats":{"Line":1},"fn_name":null},{"line":584,"address":[578360],"length":1,"stats":{"Line":1},"fn_name":null},{"line":589,"address":[578432],"length":1,"stats":{"Line":3},"fn_name":"unterminated_block_comment"},{"line":590,"address":[578436],"length":1,"stats":{"Line":1},"fn_name":null},{"line":591,"address":[578456],"length":1,"stats":{"Line":1},"fn_name":null},{"line":594,"address":[567776,568004],"length":1,"stats":{"Line":1},"fn_name":"get_end"},{"line":595,"address":[567806],"length":1,"stats":{"Line":1},"fn_name":null},{"line":598,"address":[568032],"length":1,"stats":{"Line":1},"fn_name":"get_eof"},{"line":599,"address":[568056],"length":1,"stats":{"Line":1},"fn_name":null},{"line":602,"address":[568128],"length":1,"stats":{"Line":1},"fn_name":"get_semicolon"},{"line":605,"address":[568151],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":264,"coverable":281},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","token.rs"],"content":"//! Token and AST-Level Symbol information\nuse std::fmt;\nuse std::fmt::Display;\n\nuse crate::literals::Literal;\nuse crate::tokentype::TokenType;\n\n/// Our Token type represents the parsed Tokens that we got from our scanner.\n///\n/// More generally, they are usefull as they store their internal type values, and their\n/// names. As such, we use these as Symbols as well.\n#[derive(Debug, Clone, PartialEq, PartialOrd)]\npub struct Token {\n    pub ttype: TokenType,\n    pub lexeme: String,\n    pub literal: Literal,\n    pub line: usize,\n}\n\nimpl Token {\n    pub fn new(ttype: TokenType, lexeme: String, literal: Literal, line: usize) -\u003e Token {\n        Token {\n            ttype,\n            lexeme,\n            literal,\n            line,\n        }\n    }\n}\n\nimpl Display for Token {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        write!(\n            f,\n            \"TOKEN( Type: {}, Lexeme: {}, Literal: {}, line: {} )\",\n            self.ttype, self.lexeme, self.literal, self.line\n        )\n    }\n}\n","traces":[{"line":21,"address":[694016],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":32,"address":[694192],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":33,"address":[694220],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":1,"coverable":3},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","tokentype.rs"],"content":"//! A big old enum that contains every variant of allowable tokens in the grammar.\n\nuse std::fmt::{self, Display};\n\n#[derive(Debug, Clone, PartialEq, PartialOrd)]\npub enum TokenType {\n    // 1char tokens\n    LeftParen,\n    RightParen,\n    LeftBrace,\n    RightBrace,\n    Comma,\n    Dot,\n    Minus,\n    Plus,\n    Semicolon,\n    Slash,\n    Star,\n\n    // 1 / 2 char tokens\n    Bang,\n    BangEqual,\n    Equal,\n    EqualEqual,\n    GreaterEqual,\n    Greater,\n    Less,\n    LessEqual,\n\n    // Literals.\n    Identifier,\n    String,\n    Number,\n\n    // Keywords / logic ops etc\n    And,\n    Class,\n    Else,\n    False,\n    Fn,\n    For,\n    If,\n    None,\n    Or,\n    Return,\n    Super,\n    Self_,\n    True,\n    Var,\n    While,\n    Call,\n\n    // Reserved\n    Print,\n\n    EOF,\n}\n\nimpl Display for TokenType {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        write!(f, \"{:?}\", self)\n    }\n}\n","traces":[{"line":60,"address":[668992],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":61,"address":[669014],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":2},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","userfunction.rs"],"content":"//! Type of all functions defined in Daemonica.\nuse crate::{\n    ast::{Expr, Stmt, Value},\n    environment::Environment,\n    interpreter::Interpreter,\n    token::Token,\n};\n\n#[derive(PartialEq, Debug, Clone)]\npub struct UserFunction {\n    symbol: Token,\n    body: Vec\u003cStmt\u003e,\n    paramlist: Vec\u003cToken\u003e,\n}\n\nimpl UserFunction {\n    pub fn new(symbol: Token, body: Vec\u003cStmt\u003e, paramlist: Vec\u003cToken\u003e) -\u003e UserFunction {\n        UserFunction {\n            symbol,\n            body,\n            paramlist,\n        }\n    }\n\n    pub fn call(\n        \u0026self,\n        interpreter: \u0026mut Interpreter,\n        args: Vec\u003cValue\u003e,\n    ) -\u003e Result\u003c(Environment, Option\u003cValue\u003e), (Environment, String)\u003e {\n        //dbg!(args.clone());\n        let scope_copy = interpreter.environment.clone();\n        let scope_copy = self.parse_arguments(scope_copy.clone(), args.clone());\n        match interpreter.interpret_block(self.body.clone(), scope_copy.clone()) {\n            Ok(_) =\u003e {\n                // Execution successful, return the modified scope.\n                return Ok((interpreter.environment.clone(), interpreter.retval.clone()));\n            }\n            Err(x) =\u003e {\n                // Execution went wrong, return error message, and the old scope.\n                return Err((scope_copy, x));\n            }\n        }\n    }\n\n    fn parse_arguments(\u0026self, mut scope: Environment, args: Vec\u003cValue\u003e) -\u003e Environment {\n        for (arg, name) in args.iter().zip(self.paramlist.iter()) {\n            scope.define(name.lexeme.clone(), Some(arg.clone()));\n        }\n        scope\n    }\n}\n","traces":[{"line":17,"address":[787840],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":25,"address":[788064,789242],"length":1,"stats":{"Line":1},"fn_name":"call"},{"line":31,"address":[788120],"length":1,"stats":{"Line":1},"fn_name":null},{"line":32,"address":[788169,788390,788218,788280],"length":1,"stats":{"Line":3},"fn_name":null},{"line":33,"address":[788478,788371,788408],"length":1,"stats":{"Line":3},"fn_name":null},{"line":36,"address":[788939,788609,788883],"length":1,"stats":{"Line":3},"fn_name":null},{"line":38,"address":[788619],"length":1,"stats":{"Line":0},"fn_name":null},{"line":40,"address":[788667],"length":1,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[789280,790103],"length":1,"stats":{"Line":1},"fn_name":"parse_arguments"},{"line":46,"address":[789328,789470,789741,790032],"length":1,"stats":{"Line":2},"fn_name":null},{"line":47,"address":[790037,789777],"length":1,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[789693],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":9,"coverable":12}]};
        var previousData = {"files":[{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","ast.rs"],"content":"//! Datatypes that are present inside our generated ASTs.\nuse std::fmt::{self, Display};\n\nuse crate::literals::Literal;\nuse crate::nativefn::NativeFn;\nuse crate::token::Token;\nuse crate::userfunction::UserFunction;\n\n/// Wraps either an Expr or an Stmt in one type so that we can treat them generically\n/// until we actually have to destructure the type for Interpretation.\n#[derive(Clone, Debug, PartialEq)]\npub enum ASTNode {\n    ExprNode(Expr),\n    StmtNode(Stmt),\n}\n\n/// Each statement or expression is represented as an algebraic variant that\n/// contains it's constituent parts.\n#[derive(Clone, Debug, PartialEq)]\npub enum Stmt {\n    Block(Vec\u003cStmt\u003e),\n    //Class(Token, Vec\u003cStmt\u003e),\n    Expression(Expr),\n    Function(Token, Vec\u003cToken\u003e, Vec\u003cStmt\u003e),\n    // GlobalFunction.\n    //Function(Token, Vec\u003cStmt\u003e),\n    If(Expr, Box\u003cStmt\u003e, Box\u003cOption\u003cStmt\u003e\u003e),\n    Return(Token, Option\u003cExpr\u003e),\n    Var(Token, Option\u003cExpr\u003e),\n    While(Expr, Box\u003cStmt\u003e),\n    Print(Expr),\n}\n\n/// Simmilar to the Stmt, we treat each Expression as an algebraic variant of this\n/// enum.\n#[derive(Clone, Debug, PartialEq)]\npub enum Expr {\n    Assign(Token, Box\u003cExpr\u003e),\n    Binary(Box\u003cExpr\u003e, Token, Box\u003cExpr\u003e),\n    //Call(Box\u003cExpr\u003e, Token),\n    Call(Box\u003cExpr\u003e, Token, Vec\u003cExpr\u003e),\n    //Get(Box\u003cExpr\u003e, Token),\n    Grouping(Box\u003cExpr\u003e),\n    Literal(Literal),\n    Logic(Box\u003cExpr\u003e, Token, Box\u003cExpr\u003e),\n    //Set(Box\u003cExpr\u003e, Token, Box\u003cExpr\u003e),\n    //This(Token),\n    Unary(Token, Box\u003cExpr\u003e),\n    Variable(Token),\n}\n\n/// We need some way to store state inside the interpreter. This is how.\n///\n/// Once again, we use ADTs in order to define the possible variants of a Value.\n/// This can be many things from stuff exposed to the user, such as numbers, booleans\n/// and strings, to the Empty type (No nulls here!), or the internal representations\n/// of how we move about and store functions.\n///\n/// If it's data, and it's (nominally) mutable at runtime, it's probably a Value.\n#[derive(Clone, Debug, PartialEq)]\npub enum Value {\n    Number(f64),\n    Bool(bool),\n    String(String),\n    NativeFn(NativeFn),\n    UserFn(UserFunction),\n    Empty,\n}\n\n/// This allows us to convert from Literals to values.\nimpl From\u003cLiteral\u003e for Value {\n    fn from(lit: Literal) -\u003e Self {\n        match lit {\n            Literal::Number(v) =\u003e {\n                return Value::Number(v);\n            }\n            Literal::StrLit(v) =\u003e {\n                return Value::String(v);\n            }\n            Literal::Bool(v) =\u003e {\n                return Value::Bool(v);\n            }\n            Literal::Empty =\u003e {\n                return Value::Empty;\n            }\n        }\n    }\n}\n\nimpl Display for Value {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            Value::Number(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Value::Bool(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Value::String(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Value::Empty =\u003e {\n                write!(f, \"Empty\")\n            }\n            Value::NativeFn(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Value::UserFn(x) =\u003e {\n                write!(f, \"{:?}\", x)\n            } //Value::Symbol(n, v) =\u003e {\n              //write!(f, \"{} = {}\", n, *v)\n              //}\n        }\n    }\n}\n\nimpl Display for Stmt {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            Stmt::Block(stmts) =\u003e {\n                let mut rv = String::from(\"BLOCK:( \");\n                for stmt in stmts {\n                    rv = format!(\"{} {}\", rv, stmt);\n                }\n                write!(f, \"{} )\", rv)\n            }\n            Stmt::Expression(expr) =\u003e {\n                write!(f, \"EXPR: ( {} )\", expr)\n            }\n            Stmt::Function(name, body, params) =\u003e {\n                let mut rv = format!(\"Fn {} ({:?}): Body: {{\", name, params);\n                for stmt in body {\n                    rv = format!(\"{} {}\", rv, stmt);\n                }\n                rv = format!(\"{} }}\", rv);\n                write!(f, \"{}\", rv)\n            }\n            Stmt::If(_, _, _) =\u003e todo!(),\n            Stmt::Return(_, _) =\u003e todo!(),\n            Stmt::Var(_, _) =\u003e todo!(),\n            Stmt::While(_, _) =\u003e todo!(),\n            Stmt::Print(_) =\u003e todo!(),\n        }\n    }\n}\n\nimpl Display for Expr {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            Expr::Assign(_, _) =\u003e todo!(),\n            Expr::Binary(_, _, _) =\u003e todo!(),\n            Expr::Call(_, _, _) =\u003e todo!(),\n            Expr::Grouping(_) =\u003e todo!(),\n            Expr::Literal(x) =\u003e {\n                write!(f, \"\\\"{}\\\"\", x)\n            }\n            Expr::Logic(_, _, _) =\u003e todo!(),\n            Expr::Unary(_, _) =\u003e todo!(),\n            Expr::Variable(_) =\u003e todo!(),\n        }\n    }\n}\n\nimpl Display for ASTNode {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            ASTNode::ExprNode(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            ASTNode::StmtNode(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n        }\n    }\n}\n","traces":[{"line":71,"address":[588464],"length":1,"stats":{"Line":0},"fn_name":"from"},{"line":72,"address":[588482],"length":1,"stats":{"Line":0},"fn_name":null},{"line":73,"address":[588522],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[588533],"length":1,"stats":{"Line":0},"fn_name":null},{"line":76,"address":[588555],"length":1,"stats":{"Line":0},"fn_name":null},{"line":77,"address":[588582],"length":1,"stats":{"Line":0},"fn_name":null},{"line":79,"address":[588653],"length":1,"stats":{"Line":0},"fn_name":null},{"line":80,"address":[588665],"length":1,"stats":{"Line":0},"fn_name":null},{"line":83,"address":[588681],"length":1,"stats":{"Line":0},"fn_name":null},{"line":90,"address":[588704],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":91,"address":[588737],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[588773],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[589598,588782],"length":1,"stats":{"Line":0},"fn_name":null},{"line":95,"address":[588843],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[589505,588855],"length":1,"stats":{"Line":0},"fn_name":null},{"line":98,"address":[588919],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[588931,589412],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[589140],"length":1,"stats":{"Line":0},"fn_name":null},{"line":104,"address":[588996],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[589319,589008],"length":1,"stats":{"Line":0},"fn_name":null},{"line":107,"address":[589072],"length":1,"stats":{"Line":0},"fn_name":null},{"line":108,"address":[589229,589084],"length":1,"stats":{"Line":0},"fn_name":null},{"line":117,"address":[591572,589696],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":118,"address":[589735],"length":1,"stats":{"Line":0},"fn_name":null},{"line":119,"address":[589780],"length":1,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[589800],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[593139,593252,593631,593045],"length":1,"stats":{"Line":0},"fn_name":null},{"line":122,"address":[593636,593276],"length":1,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[593721,593197],"length":1,"stats":{"Line":0},"fn_name":null},{"line":126,"address":[589838],"length":1,"stats":{"Line":0},"fn_name":null},{"line":127,"address":[589873],"length":1,"stats":{"Line":0},"fn_name":null},{"line":128,"address":[592172,591960,591719],"length":1,"stats":{"Line":0},"fn_name":null},{"line":129,"address":[592412,592149,592263,592821],"length":1,"stats":{"Line":0},"fn_name":null},{"line":130,"address":[592826,592436],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[592917,592351],"length":1,"stats":{"Line":0},"fn_name":null},{"line":134,"address":[589911],"length":1,"stats":{"Line":0},"fn_name":null},{"line":135,"address":[589923,591623],"length":1,"stats":{"Line":0},"fn_name":null},{"line":137,"address":[589996],"length":1,"stats":{"Line":0},"fn_name":null},{"line":138,"address":[590031,590262],"length":1,"stats":{"Line":0},"fn_name":null},{"line":139,"address":[590379,590485,590610,591031],"length":1,"stats":{"Line":0},"fn_name":null},{"line":140,"address":[590634,591036],"length":1,"stats":{"Line":0},"fn_name":null},{"line":142,"address":[590549,591127,591360],"length":1,"stats":{"Line":0},"fn_name":null},{"line":143,"address":[591451,591302],"length":1,"stats":{"Line":0},"fn_name":null},{"line":155,"address":[593856],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":156,"address":[593889],"length":1,"stats":{"Line":0},"fn_name":null},{"line":162,"address":[594075],"length":1,"stats":{"Line":0},"fn_name":null},{"line":163,"address":[594294,594084],"length":1,"stats":{"Line":0},"fn_name":null},{"line":175,"address":[594384],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":176,"address":[594417],"length":1,"stats":{"Line":0},"fn_name":null},{"line":177,"address":[594436],"length":1,"stats":{"Line":0},"fn_name":null},{"line":178,"address":[594445,594685],"length":1,"stats":{"Line":0},"fn_name":null},{"line":180,"address":[594506],"length":1,"stats":{"Line":0},"fn_name":null},{"line":181,"address":[594518],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":53},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","callable.rs"],"content":"use crate::{ast::Value, interpreter::Interpreter};\n\npub trait Callable {\n    fn arity(\u0026self, interpeter: \u0026Interpreter) -\u003e usize;\n    fn call(\u0026self, interpeter: \u0026mut Interpreter, args: Vec\u003cValue\u003e) -\u003e Result\u003cValue, String\u003e;\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","environment.rs"],"content":"//! State, Binding, Scope and name tracking.\nuse std::collections::HashMap;\n\nuse crate::{ast::Value, token::Token};\n\n#[derive(Clone, Debug)]\npub struct Environment {\n    pub parent: Option\u003cBox\u003cEnvironment\u003e\u003e,\n    pub values: HashMap\u003cString, Option\u003cValue\u003e\u003e,\n}\n\nimpl Environment {\n    pub fn new() -\u003e Environment {\n        Environment {\n            parent: None,\n            values: HashMap::new(),\n        }\n    }\n\n    pub fn from(e: Environment) -\u003e Environment {\n        Environment {\n            parent: None,\n            values: e.values.clone(),\n        }\n    }\n\n    pub fn from_ht(other: HashMap\u003cString, Option\u003cValue\u003e\u003e) -\u003e Environment {\n        Environment {\n            parent: None,\n            values: other.clone(),\n        }\n    }\n\n    pub fn with_parent(parent: Environment) -\u003e Environment {\n        Environment {\n            parent: Some(Box::new(parent)),\n            values: HashMap::new(),\n        }\n    }\n\n    pub fn from_with_parent(e: Environment, parent: Environment) -\u003e Environment {\n        Environment {\n            parent: Some(Box::new(parent)),\n            values: e.values.clone(),\n        }\n    }\n\n    pub fn from_ht_with_parent(\n        other: HashMap\u003cString, Option\u003cValue\u003e\u003e,\n        parent: Environment,\n    ) -\u003e Environment {\n        Environment {\n            parent: Some(Box::new(parent)),\n            values: other.clone(),\n        }\n    }\n\n    pub fn define(\u0026mut self, name: String, val: Option\u003cValue\u003e) {\n        self.values.insert(name, val);\n    }\n\n    pub fn get(\u0026self, name: Token) -\u003e Option\u003cValue\u003e {\n        let symbol = name.lexeme.clone();\n        match self.values.get(\u0026symbol) {\n            Some(val) =\u003e {\n                return val.clone();\n            }\n            None =\u003e {\n                return None;\n            }\n        }\n    }\n\n    pub fn assign(\u0026mut self, name: Token, val: \u0026Value) -\u003e Result\u003c(), String\u003e {\n        if self.values.contains_key(\u0026name.lexeme) {\n            self.define(name.lexeme, Some(val.clone()));\n            return Ok(());\n        } else {\n            let emsg = format!(\n                \"Error: Tried to assign value {} to undefined variable {}\",\n                name.lexeme,\n                val.clone()\n            );\n            return Err(emsg);\n        }\n    }\n\n    pub fn merge_defs(\u0026self, other: HashMap\u003cString, Option\u003cValue\u003e\u003e) -\u003e Environment {\n        let mut new = self.clone();\n        new.values.extend(other);\n        new\n    }\n\n    pub fn merge_envs(\u0026self, other: Environment) -\u003e Environment {\n        let other = other.values.clone();\n        self.merge_defs(other)\n    }\n}\n","traces":[{"line":13,"address":[841344],"length":1,"stats":{"Line":0},"fn_name":"new"},{"line":16,"address":[841358],"length":1,"stats":{"Line":0},"fn_name":null},{"line":20,"address":[841496,841408],"length":1,"stats":{"Line":0},"fn_name":"from"},{"line":22,"address":[841431],"length":1,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[841520,841608],"length":1,"stats":{"Line":1},"fn_name":"from_ht"},{"line":28,"address":[841543],"length":1,"stats":{"Line":1},"fn_name":null},{"line":32,"address":[841632],"length":1,"stats":{"Line":1},"fn_name":"define"},{"line":33,"address":[841665],"length":1,"stats":{"Line":1},"fn_name":null},{"line":36,"address":[842003,841776],"length":1,"stats":{"Line":1},"fn_name":"get"},{"line":37,"address":[841813],"length":1,"stats":{"Line":1},"fn_name":null},{"line":38,"address":[841885,841939,841839],"length":1,"stats":{"Line":2},"fn_name":null},{"line":39,"address":[841956],"length":1,"stats":{"Line":1},"fn_name":null},{"line":40,"address":[841966],"length":1,"stats":{"Line":1},"fn_name":null},{"line":43,"address":[841946],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[842032,843040],"length":1,"stats":{"Line":1},"fn_name":"assign"},{"line":49,"address":[842096],"length":1,"stats":{"Line":1},"fn_name":null},{"line":50,"address":[842480,842225],"length":1,"stats":{"Line":1},"fn_name":null},{"line":51,"address":[842471],"length":1,"stats":{"Line":1},"fn_name":null},{"line":53,"address":[842520,842970],"length":1,"stats":{"Line":0},"fn_name":null},{"line":56,"address":[842205],"length":1,"stats":{"Line":0},"fn_name":null},{"line":58,"address":[842882],"length":1,"stats":{"Line":0},"fn_name":null},{"line":62,"address":[843312,843152],"length":1,"stats":{"Line":0},"fn_name":"merge_defs"},{"line":63,"address":[843179],"length":1,"stats":{"Line":0},"fn_name":null},{"line":64,"address":[843206],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[843493,843344],"length":1,"stats":{"Line":0},"fn_name":"merge_envs"},{"line":69,"address":[843390],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[843407],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":13,"coverable":27},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","interpreter.rs"],"content":"//! A Tree Walk Interpreter for the Daemonica Language\nuse crate::ast::ASTNode;\nuse crate::ast::Expr;\nuse crate::ast::Stmt;\nuse crate::ast::Value;\nuse crate::environment::Environment;\nuse crate::literals::Literal;\nuse crate::nativefn;\nuse crate::token::Token;\nuse crate::tokentype::TokenType;\nuse crate::userfunction::UserFunction;\n\n#[derive(Debug)]\npub struct Interpreter {\n    pub environment: Environment,\n    pub retval: Option\u003cValue\u003e,\n}\n\n//impl\u003cT\u003e Visitor\u003cT\u003e for Interpreter {\nimpl Interpreter {\n    pub fn new() -\u003e Interpreter {\n        let environment = Environment::from_ht(nativefn::generate_native_functions());\n        return Interpreter {\n            environment,\n            retval: None,\n        };\n    }\n\n    pub fn interpret(\u0026mut self, nodes: Vec\u003cASTNode\u003e) -\u003e Result\u003cVec\u003cValue\u003e, String\u003e {\n        let mut results: Vec\u003cValue\u003e = Vec::new();\n        for node in nodes {\n            match node {\n                ASTNode::StmtNode(x) =\u003e match self.interpret_stmt(x) {\n                    Ok(y) =\u003e {\n                        results.push(y);\n                    }\n                    Err(y) =\u003e {\n                        println!(\"Encountered an error {}\", y);\n                        println!(\"Environment at this state was {:#?}\", self.environment);\n                        return Err(y);\n                    }\n                },\n                ASTNode::ExprNode(x) =\u003e match self.interpret_expr(x) {\n                    Ok(y) =\u003e {\n                        results.push(y);\n                    }\n                    Err(y) =\u003e {\n                        println!(\"Encountered an error {}\", y);\n                        println!(\"Environment at this state was {:#?}\", self.environment);\n                        return Err(y);\n                    }\n                },\n            }\n        }\n\n        return Ok(results);\n    }\n\n    pub fn interpret_expr(\u0026mut self, expr: Expr) -\u003e Result\u003cValue, String\u003e {\n        match expr {\n            Expr::Assign(name, value) =\u003e {\n                return self.interpret_assignment(name, *value);\n            }\n            Expr::Binary(left, oper, right) =\u003e {\n                return self.interpret_binary(*left, oper, *right);\n            }\n            Expr::Call(callee, paren, args) =\u003e self.interpret_call(*callee, paren, args),\n            Expr::Grouping(expression) =\u003e {\n                return self.interpret_expr(*expression);\n            }\n            Expr::Literal(value) =\u003e {\n                return self.interpret_literal(value);\n            }\n            Expr::Logic(left, operator, right) =\u003e {\n                return self.interpret_logical(*left, operator, *right);\n            }\n            Expr::Unary(operator, right) =\u003e {\n                return self.interpret_unary(operator, *right);\n            }\n            Expr::Variable(name) =\u003e self.interpret_var_expr(name),\n        }\n    }\n\n    pub fn interpret_stmt(\u0026mut self, stmt: Stmt) -\u003e Result\u003cValue, String\u003e {\n        match stmt {\n            Stmt::Block(stmts) =\u003e self.interpret_block(stmts, self.environment.clone()),\n            Stmt::Expression(expr) =\u003e self.interpret_expr(expr),\n            Stmt::Function(name, params, body) =\u003e self.interpret_function(name, body, params),\n            Stmt::If(cond, thenb, elseb) =\u003e self.interpret_if(cond, thenb, elseb),\n            Stmt::Return(tok, val) =\u003e self.interpret_return(tok, val),\n            Stmt::Var(tok, initializer) =\u003e self.interpret_var_stmt(tok, initializer),\n            Stmt::While(cond, body) =\u003e self.interpret_while(\u0026cond, body),\n            Stmt::Print(expr) =\u003e self.interpret_print(expr),\n        }\n    }\n\n    fn interpret_function(\n        \u0026mut self,\n        name: Token,\n        body: Vec\u003cStmt\u003e,\n        params: Vec\u003cToken\u003e,\n    ) -\u003e Result\u003cValue, String\u003e {\n        let fun = Value::UserFn(UserFunction::new(name.clone(), body, params));\n        self.environment.define(name.lexeme, Some(fun.clone()));\n        Ok(Value::Empty)\n    }\n\n    fn interpret_return(\u0026mut self, tok: Token, val: Option\u003cExpr\u003e) -\u003e Result\u003cValue, String\u003e {\n        match val {\n            Some(x) =\u003e {\n                let evaled = self.interpret_expr(x)?;\n                let val: Value = evaled.into();\n                self.retval = Some(val.clone());\n                return Ok(val.clone());\n            }\n            None =\u003e {\n                self.retval = None;\n                return Ok(Value::Empty);\n            }\n        }\n    }\n\n    fn interpret_print(\u0026mut self, expr: Expr) -\u003e Result\u003cValue, String\u003e {\n        let val = self.interpret_expr(expr)?;\n        println!(\"{}\", val);\n        return Ok(Value::Empty);\n    }\n\n    pub fn interpret_block(\u0026mut self, stmts: Vec\u003cStmt\u003e, env: Environment) -\u003e Result\u003cValue, String\u003e {\n        let prevenv = self.environment.clone();\n        self.environment = env;\n        for stmt in stmts {\n            match self.interpret_stmt(stmt) {\n                Ok(_) =\u003e {}\n                Err(x) =\u003e {\n                    self.environment = prevenv;\n                    return Err(x);\n                }\n            }\n        }\n        Ok(Value::Empty)\n    }\n\n    fn interpret_var_stmt(\n        \u0026mut self,\n        tok: Token,\n        initializer: Option\u003cExpr\u003e,\n    ) -\u003e Result\u003cValue, String\u003e {\n        let value = match initializer {\n            Some(x) =\u003e Some(self.interpret_expr(x).unwrap()),\n            None =\u003e None,\n        };\n        self.environment.define(tok.lexeme, value);\n        return Ok(Value::Empty);\n    }\n\n    fn interpret_while(\u0026mut self, cond: \u0026Expr, body: Box\u003cStmt\u003e) -\u003e Result\u003cValue, String\u003e {\n        while Interpreter::is_truthy(self.interpret_expr(cond.clone())?) {\n            self.interpret_stmt(*body.clone())?;\n        }\n        Ok(Value::Empty)\n    }\n\n    fn interpret_if(\n        \u0026mut self,\n        cond: Expr,\n        thenb: Box\u003cStmt\u003e,\n        elseb: Box\u003cOption\u003cStmt\u003e\u003e,\n    ) -\u003e Result\u003cValue, String\u003e {\n        // If our condition is truthy, evaluate the then branch\n        if Interpreter::is_truthy(self.interpret_expr(cond)?) {\n            return self.interpret_stmt(*thenb);\n        } else {\n            // If our condition is falsy, then if we have Some else branch eval\n            // that, otherwise return an empty value as we fell through.\n            match *elseb {\n                Some(elsebranch) =\u003e return self.interpret_stmt(elsebranch),\n                None =\u003e {\n                    return Ok(Value::Empty);\n                }\n            }\n        }\n    }\n\n    fn interpret_assignment(\u0026mut self, name: Token, value: Expr) -\u003e Result\u003cValue, String\u003e {\n        let val = self.interpret_expr(value)?;\n        self.environment.assign(name, \u0026val)?;\n        Ok(val)\n    }\n\n    fn interpret_binary(\u0026mut self, left: Expr, oper: Token, right: Expr) -\u003e Result\u003cValue, String\u003e {\n        let left = self.interpret_expr(left)?;\n        let right = self.interpret_expr(right)?;\n\n        let l = match left {\n            Value::Number(x) =\u003e x,\n            // String concatenation is done with + because that's what everything\n            // else uses. As such we need to handle this without tying ourselves\n            // in knots or making rustc angry about types, so we do it here.\n            Value::String(ref x) =\u003e match right {\n                Value::String(y) =\u003e {\n                    return Ok(Value::String(format!(\"{}{}\", x, y)));\n                }\n                _ =\u003e {\n                    let emsg = format!(\"Attempted to concatenate values of incompatable types. left: {:?} right {:?}\", x, left);\n                    return Err(emsg);\n                }\n            },\n            _ =\u003e {\n                let emsg = format!(\"Attempted to apply a binary operation {:?} to {:?} and {:?} but lvalue ({:?}) is not a number!\",\n                                   oper, left, right, left);\n                return Err(emsg);\n            }\n        };\n\n        let r = match right {\n            Value::Number(x) =\u003e x,\n            _ =\u003e {\n                let emsg = format!(\"Attempted to apply a binary operation {:?} to {:?} and {:?} but rvalue ({:?}) is not a number!\",\n                                   oper, left, right, right);\n                return Err(emsg);\n            }\n        };\n\n        match oper.ttype {\n            TokenType::Minus =\u003e {\n                return Ok(Value::Number(l - r));\n            }\n            TokenType::Slash =\u003e {\n                if l == 0.0 || r == 0.0 {\n                    let emsg =\n                        format!(\"Attempted to divide by zero!. Expression was {} / {}\", l, r);\n                    return Err(emsg);\n                } else {\n                    return Ok(Value::Number(l / r));\n                }\n            }\n            TokenType::Star =\u003e {\n                return Ok(Value::Number(l * r));\n            }\n            TokenType::Plus =\u003e {\n                return Ok(Value::Number(l + r));\n            }\n            TokenType::EqualEqual =\u003e {\n                return Ok(Value::Bool(self.is_equal(left, right)));\n            }\n            TokenType::BangEqual =\u003e {\n                return Ok(Value::Bool(!self.is_equal(left, right)));\n            }\n            TokenType::Greater =\u003e {\n                return Ok(Value::Bool(l \u003e r));\n            }\n            TokenType::GreaterEqual =\u003e {\n                return Ok(Value::Bool(l \u003e= r));\n            }\n            TokenType::Less =\u003e {\n                return Ok(Value::Bool(l \u003c r));\n            }\n            TokenType::LessEqual =\u003e {\n                return Ok(Value::Bool(l \u003c= r));\n            }\n            _ =\u003e {\n                let msg = format!(\n                    \"Attempted to evaluate an invalid binary expression. {:?} {:?} {:?}\",\n                    left, oper, right\n                );\n                return Err(msg);\n            }\n        }\n    }\n\n    /// Interprets function calls.\n    /// Any returned Value will be evaluated as an RHS in the case of a variable\n    /// definition statement.\n    ///\n    /// # Example\n    /// ```\n    /// ligamen a = horologium();\n    /// scribo a;\n    /// ```\n    /// In this case, a will contain the current unix time stamp.\n    fn interpret_call(\n        \u0026mut self,\n        callee: Expr,\n        _paren: Token,\n        args: Vec\u003cExpr\u003e,\n    ) -\u003e Result\u003cValue, String\u003e {\n        let evaled = match callee {\n            Expr::Variable(ref v) =\u003e match self.environment.get(v.clone()) {\n                Some(f) =\u003e f,\n                None =\u003e {\n                    let emsg = format!(\"Tried to call undefined function {}\", v.lexeme);\n                    return Err(emsg);\n                }\n            },\n            _ =\u003e {\n                let emsg = format!(\n                    \"Tried to call {} as a function, when it is a {}.\",\n                    callee.clone(),\n                    callee\n                );\n                return Err(emsg);\n            }\n        };\n        let mut evaledArgs: Vec\u003cValue\u003e = Vec::new();\n        for arg in args {\n            evaledArgs.push(self.interpret_expr(arg)?);\n        }\n        match evaled {\n            Value::NativeFn(f) =\u003e match f.call(self, evaledArgs) {\n                Ok(retval) =\u003e {\n                    //dbg!(self.environment.clone());\n                    self.retval = retval.clone();\n                    match retval {\n                        Some(rv) =\u003e {\n                            return Ok(rv)\n                        },\n                        None =\u003e {\n                            return Ok(Value::Empty)\n                        },\n                    }\n                }\n                Err(e) =\u003e {\n                    return Err(e);\n                }\n            },\n            Value::UserFn(f) =\u003e match f.call(self, evaledArgs) {\n                Ok((mutated, retval)) =\u003e {\n                    self.environment = mutated;\n                    self.retval = retval.clone();\n                    match retval {\n                        Some(rv) =\u003e {\n                            return Ok(rv);\n                        }\n                        None =\u003e {\n                            return Ok(Value::Empty);\n                        }\n                    }\n                }\n                Err(failure) =\u003e {\n                    let emsg = failure.1;\n                    return Err(emsg);\n                }\n            },\n            _ =\u003e {\n                let emsg = format!(\n                    \"{} is neither a function, nor a language construct, it is a {}\",\n                    callee, evaled\n                );\n                return Err(emsg);\n            }\n        }\n    }\n\n    fn interpret_literal(\u0026mut self, value: Literal) -\u003e Result\u003cValue, String\u003e {\n        match value {\n            Literal::Number(x) =\u003e Ok(Value::Number(x)),\n            Literal::StrLit(x) =\u003e Ok(Value::String(x)),\n            Literal::Bool(x) =\u003e Ok(Value::Bool(x)),\n            Literal::Empty =\u003e Ok(Value::Empty),\n        }\n    }\n\n    fn interpret_logical(\n        \u0026mut self,\n        left: Expr,\n        operator: Token,\n        right: Expr,\n    ) -\u003e Result\u003cValue, String\u003e {\n        let left = self.interpret_expr(left)?;\n\n        // If we can short-circuit, then do.\n        match operator.ttype {\n            TokenType::Or =\u003e {\n                if Interpreter::is_truthy(left.clone()) {\n                    return Ok(left);\n                } else if !Interpreter::is_truthy(left.clone()) {\n                    return Ok(left);\n                }\n            }\n            TokenType::And =\u003e {\n                if Interpreter::is_truthy(left.clone()) {\n                    return Ok(left);\n                } else {\n                    return Ok(self.interpret_expr(right)?);\n                }\n            }\n            _ =\u003e {}\n        }\n        self.interpret_expr(right)\n    }\n\n    fn interpret_unary(\u0026mut self, operator: Token, right: Expr) -\u003e Result\u003cValue, String\u003e {\n        // Evaluate the operand that we are applying the operator too.\n        let evaledright = self.interpret_expr(right.clone())?;\n\n        // Match the token type of the operator so we know what kind of maths\n        // we need to apply.\n        match operator.ttype {\n            TokenType::Minus =\u003e {\n                match evaledright {\n                    Value::Number(x) =\u003e {\n                        return Ok(Value::Number(-x));\n                    }\n                    _ =\u003e {\n                        // If we somehow got to the point where a unary oper\n                        // is being applied to something other than a number we should\n                        // probably let the user know and be scared.\n                        //let emsg = format!(\"Attempted to interpret a unary operation with the invalid operator {:?}\", operator);\n                        let emsg = format!(\"Attempted to apply unary operator '{}' to expression {}, which is invalid.\", operator.lexeme, right);\n                        return Err(emsg);\n                    }\n                }\n            }\n            TokenType::Bang =\u003e {\n                match evaledright {\n                    // We take our truthyness and falsyness from ruby.\n                    // False and Empty are falsy, everything else is truthy.\n                    Value::Empty =\u003e {\n                        // Empty is fals-y so eval it to true\n                        return Ok(Value::Bool(true));\n                    }\n                    Value::Bool(x) =\u003e {\n                        // If the value we evaluated earlier is a boolean\n                        // then negate that\n                        return Ok(Value::Bool(!x));\n                    }\n                    _ =\u003e {\n                        // Anything other than Empty or Bool::False is truthy\n                        // so our negation is false.\n                        return Ok(Value::Bool(false));\n                    }\n                }\n            }\n            _ =\u003e {\n                let errormsg = format!(\n                    \"Attempted to interpret unary operation with expr {:?}\",\n                    right.clone()\n                );\n                return Err(errormsg);\n            }\n        }\n    }\n\n    fn interpret_var_expr(\u0026mut self, name: Token) -\u003e Result\u003cValue, String\u003e {\n        match self.environment.get(name.clone()) {\n            Some(x) =\u003e {\n                return Ok(x);\n            }\n            None =\u003e {\n                dbg!(self.environment.clone());\n                let emsg = format!(\n                    \"Tried to access undefined variable with the name {}\",\n                    name.lexeme.clone()\n                );\n                return Err(emsg);\n            }\n        }\n    }\n\n    fn is_equal(\u0026mut self, lv: Value, rv: Value) -\u003e bool {\n        if lv == Value::Empty \u0026\u0026 rv == Value::Empty {\n            return true;\n        }\n        if lv == Value::Empty {\n            return false;\n        }\n        return lv == rv;\n    }\n\n    // Assoc functions. We dont need to take self for these so, we'll avoid\n    // the java-ism of making them methods.\n\n    /// Truthyness is wheater a value is treated as true, or false.\n    /// Booleans evaluate to themselves, Empty types are false, everything\n    /// else is truth-y. This is shamelessly inspired by how our zen masters\n    /// ruby do this.\n    fn is_truthy(val: Value) -\u003e bool {\n        match val {\n            // The truthyness of a bool is itself.\n            Value::Bool(x) =\u003e {\n                return x;\n            }\n            // Empty types are fals-y\n            Value::Empty =\u003e {\n                return false;\n            }\n            // All other types are truthy.\n            _ =\u003e {\n                return true;\n            }\n        }\n    }\n}\n\nimpl Default for Interpreter {\n    fn default() -\u003e Self {\n        Self::new()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::Interpreter;\n    use super::Value;\n    use super::*;\n    use crate::ast::ASTNode;\n    use crate::environment::Environment;\n    use crate::parser::Parser;\n    use crate::scanner::*;\n    use crate::token::*;\n\n    #[test]\n    fn addition_test() {\n        let test_str: String = \"5 + 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Number(15.0);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn subtraction_test() {\n        let test_str: String = \"10 - 5;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Number(5.0);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn multiplication_test() {\n        let test_str: String = \"3 * 5;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Number(15.0);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn division_test() {\n        let test_str: String = \"100 / 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Number(10.0);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn string_concat() {\n        let test_str: String = \"\\\"Hello, \\\" + \\\"World!\\\";\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::String(\"Hello, World!\".to_string());\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn equality() {\n        let test_str: String = \"10 == 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(true);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn inequality() {\n        let test_str: String = \"100 != 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(true);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn gt() {\n        let test_str: String = \"100 \u003e 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(true);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn geq() {\n        let test_str: String = \"10 \u003e= 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(true);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn lt() {\n        let test_str: String = \"100 \u003c 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(false);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn leq() {\n        let test_str: String = \"10 \u003c= 10;\".to_string();\n        let parsed = process(test_str);\n        let result = extract_retval(parsed);\n        let expected = Value::Bool(true);\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn bind_test() {\n        let test = String::from(\n            r#\"\n          ligamen testVal = 1337;\n        \"#,\n        );\n        let parsed = process(test);\n        let env = eval_and_extract_state(parsed);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            3,\n        );\n        let expected = Value::Number(1337.0);\n        assert!(env.get(symbol).unwrap() == expected);\n    }\n\n    #[test]\n    fn shadow_test() {\n        let test = String::from(\n            r#\"\n          ligamen testVal = \"BAD\";\n          ligamen testVal = 1337;\n        \"#,\n        );\n        let parsed = process(test);\n        let env = eval_and_extract_state(parsed);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            3,\n        );\n        let expected = Value::Number(1337.0);\n        assert!(env.get(symbol).unwrap() == expected);\n    }\n\n    #[test]\n    fn globals() {\n        let test: String = String::from(\n            r#\"ligamen testVal = 0;\n        incantatio fun() {\n          testVal = 1337;\n        }\n        fun();\"#,\n        );\n        let parsed = process(test);\n        let env = eval_and_extract_state(parsed);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            3,\n        );\n        let expected = Value::Number(1337.0);\n        assert!(env.get(symbol).unwrap() == expected);\n    }\n\n    #[test]\n    fn assignment_test() {\n        let test = String::from(\n            r#\"\n          ligamen testVal = 0;\n          testVal = 1337;\n        \"#,\n        );\n        let parsed = process(test);\n        let env = eval_and_extract_state(parsed);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            3,\n        );\n        let expected = Value::Number(1337.0);\n        assert!(env.get(symbol).unwrap() == expected);\n    }\n\n    #[test]\n    fn fundef() {\n        let test: String = String::from(\n            r#\"incantatio fun() {\n          \"Hi\";\n        }\"#,\n        );\n        let parsed = process(test);\n        let env = eval_and_extract_state(parsed);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"fun\"),\n            Literal::Empty,\n            1,\n        );\n        let result = env.get(symbol.clone());\n        let expected = Some(Value::UserFn(UserFunction::new(\n            symbol,\n            vec![Stmt::Expression(Expr::Literal(Literal::StrLit(\n                String::from(\"Hi\"),\n            )))],\n            vec![],\n        )));\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn bool_and() {\n        let test = String::from(\"ligamen testVal = verum et verum;\");\n        let parsed = process(test);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            1,\n        );\n        let expected = eval_and_expect(parsed, Some(Value::Bool(true)), symbol);\n        assert!(expected == true);\n    }\n\n    #[test]\n    fn bool_or() {\n        let test = String::from(\"ligamen testVal = verum vel verum;\");\n        let parsed = process(test);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            1,\n        );\n        let expected = eval_and_expect(parsed, Some(Value::Bool(true)), symbol);\n        assert!(expected == true);\n    }\n\n    #[test]\n    fn truthynes_numbers() {\n        let test = String::from(\"ligamen a = verum; ligamen b = 5; ligamen testVal = ( a et b );\");\n        let parsed = process(test);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            1,\n        );\n        let expected = eval_and_expect(parsed, Some(Value::Bool(true)), symbol);\n        assert!(expected == true);\n    }\n\n    #[test]\n    fn truthynes_strings() {\n        let test =\n            String::from(\"ligamen a = verum; ligamen b = \\\"hi\\\"; ligamen testVal = ( a et b );\");\n        let parsed = process(test);\n        let symbol = Token::new(\n            TokenType::Identifier,\n            String::from(\"testVal\"),\n            Literal::Empty,\n            1,\n        );\n        let expected = eval_and_expect(parsed, Some(Value::Bool(true)), symbol);\n        assert!(expected == true);\n    }\n\n    fn process(testcase: String) -\u003e Vec\u003cASTNode\u003e {\n        let lexed = Scanner::scan(testcase);\n        Parser::parse(lexed)\n    }\n\n    fn extract_retval(ast: Vec\u003cASTNode\u003e) -\u003e Value {\n        let mut i: Interpreter = Interpreter::new();\n        i.interpret(ast).unwrap().get(0).unwrap().clone()\n    }\n\n    fn eval_and_extract_state(ast: Vec\u003cASTNode\u003e) -\u003e Environment {\n        let mut i: Interpreter = Interpreter::new();\n        let x = i.interpret(ast);\n        dbg!(i.environment.clone());\n        println!(\"{:?}\", x);\n        i.environment\n    }\n\n    fn eval_and_expect(ast: Vec\u003cASTNode\u003e, expected: Option\u003cValue\u003e, symb: Token) -\u003e bool {\n        let state = eval_and_extract_state(ast);\n        state.get(symb) == expected\n    }\n}\n","traces":[{"line":21,"address":[619296],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":22,"address":[619312],"length":1,"stats":{"Line":1},"fn_name":null},{"line":23,"address":[619369],"length":1,"stats":{"Line":1},"fn_name":null},{"line":24,"address":[619337],"length":1,"stats":{"Line":1},"fn_name":null},{"line":25,"address":[619361],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[619424,622009],"length":1,"stats":{"Line":1},"fn_name":"interpret"},{"line":30,"address":[619468],"length":1,"stats":{"Line":1},"fn_name":null},{"line":31,"address":[619734,619615,621038,619512,621004,620223],"length":1,"stats":{"Line":4},"fn_name":null},{"line":32,"address":[619852],"length":1,"stats":{"Line":1},"fn_name":null},{"line":33,"address":[620250,620100],"length":1,"stats":{"Line":1},"fn_name":null},{"line":34,"address":[620252],"length":1,"stats":{"Line":1},"fn_name":null},{"line":35,"address":[620364],"length":1,"stats":{"Line":1},"fn_name":null},{"line":37,"address":[620502],"length":1,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[620702,620542],"length":1,"stats":{"Line":0},"fn_name":null},{"line":39,"address":[620729],"length":1,"stats":{"Line":0},"fn_name":null},{"line":40,"address":[620898],"length":1,"stats":{"Line":0},"fn_name":null},{"line":43,"address":[619882,621043],"length":1,"stats":{"Line":0},"fn_name":null},{"line":44,"address":[621065],"length":1,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[621177],"length":1,"stats":{"Line":0},"fn_name":null},{"line":47,"address":[621315],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[621355,621515],"length":1,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[621542],"length":1,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[621711],"length":1,"stats":{"Line":0},"fn_name":null},{"line":56,"address":[621866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":59,"address":[624365,622048],"length":1,"stats":{"Line":1},"fn_name":"interpret_expr"},{"line":60,"address":[622083],"length":1,"stats":{"Line":1},"fn_name":null},{"line":61,"address":[622129],"length":1,"stats":{"Line":1},"fn_name":null},{"line":62,"address":[622203],"length":1,"stats":{"Line":1},"fn_name":null},{"line":64,"address":[622392],"length":1,"stats":{"Line":1},"fn_name":null},{"line":65,"address":[622486],"length":1,"stats":{"Line":1},"fn_name":null},{"line":67,"address":[622757,624677],"length":1,"stats":{"Line":2},"fn_name":null},{"line":68,"address":[623016],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[623136],"length":1,"stats":{"Line":1},"fn_name":null},{"line":74,"address":[623153],"length":1,"stats":{"Line":1},"fn_name":null},{"line":76,"address":[623257],"length":1,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[623305],"length":1,"stats":{"Line":1},"fn_name":null},{"line":79,"address":[623402],"length":1,"stats":{"Line":1},"fn_name":null},{"line":80,"address":[623496],"length":1,"stats":{"Line":1},"fn_name":null},{"line":82,"address":[623757],"length":1,"stats":{"Line":0},"fn_name":null},{"line":85,"address":[623879],"length":1,"stats":{"Line":0},"fn_name":null},{"line":88,"address":[623987],"length":1,"stats":{"Line":0},"fn_name":null},{"line":89,"address":[624064],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[624243],"length":1,"stats":{"Line":1},"fn_name":null},{"line":95,"address":[624880,626927],"length":1,"stats":{"Line":1},"fn_name":"interpret_stmt"},{"line":96,"address":[624915],"length":1,"stats":{"Line":1},"fn_name":null},{"line":97,"address":[626824,624964],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[625076,626807],"length":1,"stats":{"Line":2},"fn_name":null},{"line":100,"address":[626802,625277],"length":1,"stats":{"Line":2},"fn_name":null},{"line":101,"address":[625514,626797],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[625734],"length":1,"stats":{"Line":0},"fn_name":null},{"line":103,"address":[625912,626772],"length":1,"stats":{"Line":2},"fn_name":null},{"line":104,"address":[626725,626270],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[626387],"length":1,"stats":{"Line":0},"fn_name":null},{"line":109,"address":[627742,626960],"length":1,"stats":{"Line":1},"fn_name":"interpret_function"},{"line":110,"address":[627181,627008],"length":1,"stats":{"Line":2},"fn_name":null},{"line":111,"address":[627657,627271],"length":1,"stats":{"Line":1},"fn_name":null},{"line":112,"address":[627531],"length":1,"stats":{"Line":1},"fn_name":null},{"line":115,"address":[627776,628480],"length":1,"stats":{"Line":0},"fn_name":"interpret_print"},{"line":116,"address":[628175,627819],"length":1,"stats":{"Line":0},"fn_name":null},{"line":117,"address":[628120,628399,628308],"length":1,"stats":{"Line":0},"fn_name":null},{"line":118,"address":[628423],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[629779,628496],"length":1,"stats":{"Line":1},"fn_name":"interpret_block"},{"line":122,"address":[628536],"length":1,"stats":{"Line":1},"fn_name":null},{"line":123,"address":[628801,628606,628707],"length":1,"stats":{"Line":2},"fn_name":null},{"line":124,"address":[629591,628862,629548,629174,628742],"length":1,"stats":{"Line":3},"fn_name":null},{"line":125,"address":[629201,629130],"length":1,"stats":{"Line":1},"fn_name":null},{"line":127,"address":[629228],"length":1,"stats":{"Line":0},"fn_name":null},{"line":128,"address":[629260,629451],"length":1,"stats":{"Line":0},"fn_name":null},{"line":129,"address":[629342],"length":1,"stats":{"Line":0},"fn_name":null},{"line":135,"address":[629616],"length":1,"stats":{"Line":1},"fn_name":null},{"line":138,"address":[629808,630437],"length":1,"stats":{"Line":1},"fn_name":"interpret_var_stmt"},{"line":143,"address":[629847],"length":1,"stats":{"Line":1},"fn_name":null},{"line":144,"address":[630164,629903],"length":1,"stats":{"Line":2},"fn_name":null},{"line":145,"address":[629884],"length":1,"stats":{"Line":0},"fn_name":null},{"line":147,"address":[630197],"length":1,"stats":{"Line":1},"fn_name":null},{"line":148,"address":[630350],"length":1,"stats":{"Line":1},"fn_name":null},{"line":151,"address":[630480,631638],"length":1,"stats":{"Line":0},"fn_name":"interpret_while"},{"line":152,"address":[630541,631021,631653,630975,630629],"length":1,"stats":{"Line":0},"fn_name":null},{"line":153,"address":[631631,631094],"length":1,"stats":{"Line":0},"fn_name":null},{"line":155,"address":[631032],"length":1,"stats":{"Line":0},"fn_name":null},{"line":158,"address":[631664,632747],"length":1,"stats":{"Line":0},"fn_name":"interpret_if"},{"line":165,"address":[632278,632351,631720,631933],"length":1,"stats":{"Line":0},"fn_name":null},{"line":166,"address":[632386],"length":1,"stats":{"Line":0},"fn_name":null},{"line":170,"address":[632362,632448],"length":1,"stats":{"Line":0},"fn_name":null},{"line":171,"address":[632507],"length":1,"stats":{"Line":0},"fn_name":null},{"line":173,"address":[632455],"length":1,"stats":{"Line":0},"fn_name":null},{"line":179,"address":[633801,632848],"length":1,"stats":{"Line":1},"fn_name":"interpret_assignment"},{"line":180,"address":[633477,633396,633056,632882],"length":1,"stats":{"Line":2},"fn_name":null},{"line":181,"address":[633539,633774,633293,633680,633583],"length":1,"stats":{"Line":3},"fn_name":null},{"line":182,"address":[633608],"length":1,"stats":{"Line":1},"fn_name":null},{"line":185,"address":[640520,633856],"length":1,"stats":{"Line":1},"fn_name":"interpret_binary"},{"line":186,"address":[634498,634579,634115,633917],"length":1,"stats":{"Line":2},"fn_name":null},{"line":187,"address":[635098,634385,635017,634649,634697],"length":1,"stats":{"Line":3},"fn_name":null},{"line":189,"address":[634959],"length":1,"stats":{"Line":1},"fn_name":null},{"line":190,"address":[635286],"length":1,"stats":{"Line":1},"fn_name":null},{"line":194,"address":[635336],"length":1,"stats":{"Line":1},"fn_name":null},{"line":195,"address":[635992],"length":1,"stats":{"Line":1},"fn_name":null},{"line":196,"address":[636040,636746,636639],"length":1,"stats":{"Line":3},"fn_name":null},{"line":199,"address":[636149],"length":1,"stats":{"Line":0},"fn_name":null},{"line":200,"address":[636503],"length":1,"stats":{"Line":0},"fn_name":null},{"line":204,"address":[635168,635522,635411],"length":1,"stats":{"Line":0},"fn_name":null},{"line":206,"address":[635882],"length":1,"stats":{"Line":0},"fn_name":null},{"line":210,"address":[635313],"length":1,"stats":{"Line":1},"fn_name":null},{"line":211,"address":[637045],"length":1,"stats":{"Line":1},"fn_name":null},{"line":213,"address":[637130],"length":1,"stats":{"Line":0},"fn_name":null},{"line":215,"address":[637710],"length":1,"stats":{"Line":0},"fn_name":null},{"line":219,"address":[637072],"length":1,"stats":{"Line":1},"fn_name":null},{"line":221,"address":[637935],"length":1,"stats":{"Line":1},"fn_name":null},{"line":224,"address":[639709,638097],"length":1,"stats":{"Line":2},"fn_name":null},{"line":225,"address":[639855],"length":1,"stats":{"Line":0},"fn_name":null},{"line":227,"address":[640163],"length":1,"stats":{"Line":0},"fn_name":null},{"line":229,"address":[639770],"length":1,"stats":{"Line":1},"fn_name":null},{"line":233,"address":[638138],"length":1,"stats":{"Line":1},"fn_name":null},{"line":236,"address":[638020],"length":1,"stats":{"Line":1},"fn_name":null},{"line":239,"address":[638512,639574],"length":1,"stats":{"Line":2},"fn_name":null},{"line":242,"address":[639648,638223],"length":1,"stats":{"Line":2},"fn_name":null},{"line":245,"address":[638889],"length":1,"stats":{"Line":1},"fn_name":null},{"line":248,"address":[638801],"length":1,"stats":{"Line":1},"fn_name":null},{"line":251,"address":[638977],"length":1,"stats":{"Line":1},"fn_name":null},{"line":254,"address":[639069],"length":1,"stats":{"Line":1},"fn_name":null},{"line":257,"address":[639179,637822],"length":1,"stats":{"Line":0},"fn_name":null},{"line":261,"address":[639463],"length":1,"stats":{"Line":0},"fn_name":null},{"line":266,"address":[644694,640560],"length":1,"stats":{"Line":1},"fn_name":"interpret_call"},{"line":267,"address":[640615],"length":1,"stats":{"Line":1},"fn_name":null},{"line":268,"address":[640653,641366],"length":1,"stats":{"Line":2},"fn_name":null},{"line":269,"address":[641465],"length":1,"stats":{"Line":1},"fn_name":null},{"line":271,"address":[644463,644381,641404],"length":1,"stats":{"Line":0},"fn_name":null},{"line":272,"address":[644546],"length":1,"stats":{"Line":0},"fn_name":null},{"line":276,"address":[641267,640738,640904],"length":1,"stats":{"Line":0},"fn_name":null},{"line":278,"address":[640715],"length":1,"stats":{"Line":0},"fn_name":null},{"line":281,"address":[641174],"length":1,"stats":{"Line":0},"fn_name":null},{"line":284,"address":[641705],"length":1,"stats":{"Line":1},"fn_name":null},{"line":285,"address":[641854,643154,643201],"length":1,"stats":{"Line":0},"fn_name":null},{"line":287,"address":[643692,643236,643437],"length":1,"stats":{"Line":0},"fn_name":null},{"line":289,"address":[643254],"length":1,"stats":{"Line":0},"fn_name":null},{"line":290,"address":[643302],"length":1,"stats":{"Line":0},"fn_name":null},{"line":293,"address":[642597,642537,641936],"length":1,"stats":{"Line":2},"fn_name":null},{"line":294,"address":[642607],"length":1,"stats":{"Line":1},"fn_name":null},{"line":295,"address":[643022,642964,642655],"length":1,"stats":{"Line":2},"fn_name":null},{"line":297,"address":[642721],"length":1,"stats":{"Line":0},"fn_name":null},{"line":298,"address":[642801],"length":1,"stats":{"Line":0},"fn_name":null},{"line":299,"address":[642833],"length":1,"stats":{"Line":0},"fn_name":null},{"line":303,"address":[642106,642241,641757],"length":1,"stats":{"Line":0},"fn_name":null},{"line":307,"address":[642395],"length":1,"stats":{"Line":0},"fn_name":null},{"line":310,"address":[643072],"length":1,"stats":{"Line":1},"fn_name":null},{"line":314,"address":[644823,644736],"length":1,"stats":{"Line":0},"fn_name":"interpret_get"},{"line":318,"address":[644848],"length":1,"stats":{"Line":1},"fn_name":"interpret_literal"},{"line":319,"address":[644877],"length":1,"stats":{"Line":1},"fn_name":null},{"line":320,"address":[644917],"length":1,"stats":{"Line":1},"fn_name":null},{"line":321,"address":[644987],"length":1,"stats":{"Line":1},"fn_name":null},{"line":322,"address":[645172],"length":1,"stats":{"Line":1},"fn_name":null},{"line":323,"address":[645245],"length":1,"stats":{"Line":0},"fn_name":null},{"line":327,"address":[645312,647002],"length":1,"stats":{"Line":1},"fn_name":"interpret_logical"},{"line":333,"address":[645352,645827,645908,645534],"length":1,"stats":{"Line":2},"fn_name":null},{"line":336,"address":[645781],"length":1,"stats":{"Line":1},"fn_name":null},{"line":338,"address":[646177,646110],"length":1,"stats":{"Line":2},"fn_name":null},{"line":339,"address":[646203],"length":1,"stats":{"Line":1},"fn_name":null},{"line":340,"address":[646196,646300],"length":1,"stats":{"Line":0},"fn_name":null},{"line":341,"address":[646326],"length":1,"stats":{"Line":0},"fn_name":null},{"line":345,"address":[646449,646087],"length":1,"stats":{"Line":2},"fn_name":null},{"line":346,"address":[646582],"length":1,"stats":{"Line":1},"fn_name":null},{"line":348,"address":[646673,646480],"length":1,"stats":{"Line":0},"fn_name":null},{"line":353,"address":[645977],"length":1,"stats":{"Line":0},"fn_name":null},{"line":356,"address":[648882,647024],"length":1,"stats":{"Line":0},"fn_name":"interpret_unary"},{"line":358,"address":[647080,647168,647472,647553],"length":1,"stats":{"Line":0},"fn_name":null},{"line":362,"address":[647426],"length":1,"stats":{"Line":0},"fn_name":null},{"line":364,"address":[647615],"length":1,"stats":{"Line":0},"fn_name":null},{"line":365,"address":[648332],"length":1,"stats":{"Line":0},"fn_name":null},{"line":366,"address":[648350],"length":1,"stats":{"Line":0},"fn_name":null},{"line":373,"address":[648439],"length":1,"stats":{"Line":0},"fn_name":null},{"line":374,"address":[648740],"length":1,"stats":{"Line":0},"fn_name":null},{"line":379,"address":[647638],"length":1,"stats":{"Line":0},"fn_name":null},{"line":384,"address":[648272],"length":1,"stats":{"Line":0},"fn_name":null},{"line":386,"address":[648190],"length":1,"stats":{"Line":0},"fn_name":null},{"line":389,"address":[648209],"length":1,"stats":{"Line":0},"fn_name":null},{"line":394,"address":[648133],"length":1,"stats":{"Line":0},"fn_name":null},{"line":399,"address":[648069,647691,647789],"length":1,"stats":{"Line":0},"fn_name":null},{"line":401,"address":[647608],"length":1,"stats":{"Line":0},"fn_name":null},{"line":403,"address":[647976],"length":1,"stats":{"Line":0},"fn_name":null},{"line":408,"address":[650350,648912],"length":1,"stats":{"Line":1},"fn_name":"interpret_var_expr"},{"line":409,"address":[649064,648986],"length":1,"stats":{"Line":2},"fn_name":null},{"line":410,"address":[649110],"length":1,"stats":{"Line":1},"fn_name":null},{"line":411,"address":[649136],"length":1,"stats":{"Line":1},"fn_name":null},{"line":414,"address":[649477,649103,649225],"length":1,"stats":{"Line":0},"fn_name":null},{"line":415,"address":[650309,649953],"length":1,"stats":{"Line":0},"fn_name":null},{"line":417,"address":[649926],"length":1,"stats":{"Line":0},"fn_name":null},{"line":419,"address":[650213],"length":1,"stats":{"Line":0},"fn_name":null},{"line":424,"address":[650652,650384],"length":1,"stats":{"Line":1},"fn_name":"is_equal"},{"line":425,"address":[650475,650416],"length":1,"stats":{"Line":2},"fn_name":null},{"line":426,"address":[650545],"length":1,"stats":{"Line":0},"fn_name":null},{"line":428,"address":[650566,650527],"length":1,"stats":{"Line":2},"fn_name":null},{"line":429,"address":[650593],"length":1,"stats":{"Line":0},"fn_name":null},{"line":431,"address":[650582,650604],"length":1,"stats":{"Line":2},"fn_name":null},{"line":441,"address":[650688],"length":1,"stats":{"Line":1},"fn_name":"is_truthy"},{"line":442,"address":[650696],"length":1,"stats":{"Line":1},"fn_name":null},{"line":444,"address":[650736],"length":1,"stats":{"Line":1},"fn_name":null},{"line":445,"address":[650748],"length":1,"stats":{"Line":1},"fn_name":null},{"line":449,"address":[650756],"length":1,"stats":{"Line":0},"fn_name":null},{"line":453,"address":[650725],"length":1,"stats":{"Line":0},"fn_name":null},{"line":460,"address":[650784],"length":1,"stats":{"Line":0},"fn_name":"default"},{"line":461,"address":[650792],"length":1,"stats":{"Line":0},"fn_name":null},{"line":477,"address":[585840,585845],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":478,"address":[654983],"length":1,"stats":{"Line":1},"fn_name":null},{"line":479,"address":[655005],"length":1,"stats":{"Line":1},"fn_name":null},{"line":480,"address":[655050],"length":1,"stats":{"Line":1},"fn_name":null},{"line":481,"address":[655117],"length":1,"stats":{"Line":1},"fn_name":null},{"line":482,"address":[655146,655221],"length":1,"stats":{"Line":1},"fn_name":null},{"line":486,"address":[585872,585877],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":487,"address":[655335],"length":1,"stats":{"Line":1},"fn_name":null},{"line":488,"address":[655357],"length":1,"stats":{"Line":1},"fn_name":null},{"line":489,"address":[655402],"length":1,"stats":{"Line":1},"fn_name":null},{"line":490,"address":[655469],"length":1,"stats":{"Line":1},"fn_name":null},{"line":491,"address":[655573,655498],"length":1,"stats":{"Line":1},"fn_name":null},{"line":495,"address":[585909,585904],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":496,"address":[655687],"length":1,"stats":{"Line":1},"fn_name":null},{"line":497,"address":[655709],"length":1,"stats":{"Line":1},"fn_name":null},{"line":498,"address":[655754],"length":1,"stats":{"Line":1},"fn_name":null},{"line":499,"address":[655821],"length":1,"stats":{"Line":1},"fn_name":null},{"line":500,"address":[655850,655925],"length":1,"stats":{"Line":1},"fn_name":null},{"line":504,"address":[585936,585941],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":505,"address":[656039],"length":1,"stats":{"Line":1},"fn_name":null},{"line":506,"address":[656061],"length":1,"stats":{"Line":1},"fn_name":null},{"line":507,"address":[656106],"length":1,"stats":{"Line":1},"fn_name":null},{"line":508,"address":[656173],"length":1,"stats":{"Line":1},"fn_name":null},{"line":509,"address":[656277,656202],"length":1,"stats":{"Line":1},"fn_name":null},{"line":513,"address":[585968,585973],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":514,"address":[656391],"length":1,"stats":{"Line":1},"fn_name":null},{"line":515,"address":[656413],"length":1,"stats":{"Line":1},"fn_name":null},{"line":516,"address":[656458],"length":1,"stats":{"Line":1},"fn_name":null},{"line":517,"address":[656515],"length":1,"stats":{"Line":1},"fn_name":null},{"line":518,"address":[656595,656647,656707],"length":1,"stats":{"Line":2},"fn_name":null},{"line":522,"address":[586000,586005],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":523,"address":[656791],"length":1,"stats":{"Line":1},"fn_name":null},{"line":524,"address":[656813],"length":1,"stats":{"Line":1},"fn_name":null},{"line":525,"address":[656858],"length":1,"stats":{"Line":1},"fn_name":null},{"line":526,"address":[656915],"length":1,"stats":{"Line":1},"fn_name":null},{"line":527,"address":[656944,657019],"length":1,"stats":{"Line":1},"fn_name":null},{"line":531,"address":[586032,586037],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":532,"address":[657127],"length":1,"stats":{"Line":1},"fn_name":null},{"line":533,"address":[657149],"length":1,"stats":{"Line":1},"fn_name":null},{"line":534,"address":[657194],"length":1,"stats":{"Line":1},"fn_name":null},{"line":535,"address":[657251],"length":1,"stats":{"Line":1},"fn_name":null},{"line":536,"address":[657355,657280],"length":1,"stats":{"Line":1},"fn_name":null},{"line":540,"address":[586064,586069],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":541,"address":[657463],"length":1,"stats":{"Line":1},"fn_name":null},{"line":542,"address":[657485],"length":1,"stats":{"Line":1},"fn_name":null},{"line":543,"address":[657530],"length":1,"stats":{"Line":1},"fn_name":null},{"line":544,"address":[657587],"length":1,"stats":{"Line":1},"fn_name":null},{"line":545,"address":[657691,657616],"length":1,"stats":{"Line":1},"fn_name":null},{"line":549,"address":[586101,586096],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":550,"address":[657799],"length":1,"stats":{"Line":1},"fn_name":null},{"line":551,"address":[657821],"length":1,"stats":{"Line":1},"fn_name":null},{"line":552,"address":[657866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":553,"address":[657923],"length":1,"stats":{"Line":1},"fn_name":null},{"line":554,"address":[658027,657952],"length":1,"stats":{"Line":1},"fn_name":null},{"line":558,"address":[586133,586128],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":559,"address":[658135],"length":1,"stats":{"Line":1},"fn_name":null},{"line":560,"address":[658157],"length":1,"stats":{"Line":1},"fn_name":null},{"line":561,"address":[658202],"length":1,"stats":{"Line":1},"fn_name":null},{"line":562,"address":[658259],"length":1,"stats":{"Line":1},"fn_name":null},{"line":563,"address":[658288,658363],"length":1,"stats":{"Line":1},"fn_name":null},{"line":567,"address":[586165,586160],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":568,"address":[658471],"length":1,"stats":{"Line":1},"fn_name":null},{"line":569,"address":[658493],"length":1,"stats":{"Line":1},"fn_name":null},{"line":570,"address":[658538],"length":1,"stats":{"Line":1},"fn_name":null},{"line":571,"address":[658595],"length":1,"stats":{"Line":1},"fn_name":null},{"line":572,"address":[658699,658624],"length":1,"stats":{"Line":1},"fn_name":null},{"line":576,"address":[586197,586192],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":580,"address":[658829],"length":1,"stats":{"Line":1},"fn_name":null},{"line":581,"address":[658874],"length":1,"stats":{"Line":1},"fn_name":null},{"line":582,"address":[658931],"length":1,"stats":{"Line":1},"fn_name":null},{"line":583,"address":[659066],"length":1,"stats":{"Line":1},"fn_name":null},{"line":584,"address":[659276,659082,659374],"length":1,"stats":{"Line":2},"fn_name":null},{"line":588,"address":[586224,586229],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":593,"address":[659485],"length":1,"stats":{"Line":1},"fn_name":null},{"line":594,"address":[659530],"length":1,"stats":{"Line":1},"fn_name":null},{"line":595,"address":[659587],"length":1,"stats":{"Line":1},"fn_name":null},{"line":596,"address":[659722],"length":1,"stats":{"Line":1},"fn_name":null},{"line":597,"address":[659932,659738,660030],"length":1,"stats":{"Line":2},"fn_name":null},{"line":601,"address":[586261,586256],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":607,"address":[660141],"length":1,"stats":{"Line":1},"fn_name":null},{"line":608,"address":[660186],"length":1,"stats":{"Line":1},"fn_name":null},{"line":609,"address":[660243],"length":1,"stats":{"Line":1},"fn_name":null},{"line":610,"address":[660378],"length":1,"stats":{"Line":1},"fn_name":null},{"line":611,"address":[660686,660588,660394],"length":1,"stats":{"Line":2},"fn_name":null},{"line":615,"address":[586293,586288],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":620,"address":[660797],"length":1,"stats":{"Line":1},"fn_name":null},{"line":621,"address":[660842],"length":1,"stats":{"Line":1},"fn_name":null},{"line":622,"address":[660899],"length":1,"stats":{"Line":1},"fn_name":null},{"line":623,"address":[661034],"length":1,"stats":{"Line":1},"fn_name":null},{"line":624,"address":[661050,661342,661244],"length":1,"stats":{"Line":2},"fn_name":null},{"line":628,"address":[586325,586320],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":632,"address":[661469],"length":1,"stats":{"Line":1},"fn_name":null},{"line":633,"address":[661514],"length":1,"stats":{"Line":1},"fn_name":null},{"line":634,"address":[661571,661696],"length":1,"stats":{"Line":2},"fn_name":null},{"line":635,"address":[661720],"length":1,"stats":{"Line":1},"fn_name":null},{"line":636,"address":[662270,662317],"length":1,"stats":{"Line":2},"fn_name":null},{"line":637,"address":[661793],"length":1,"stats":{"Line":1},"fn_name":null},{"line":638,"address":[662206,661899],"length":1,"stats":{"Line":2},"fn_name":null},{"line":639,"address":[662078],"length":1,"stats":{"Line":1},"fn_name":null},{"line":640,"address":[662034],"length":1,"stats":{"Line":1},"fn_name":null},{"line":641,"address":[661921,661994],"length":1,"stats":{"Line":2},"fn_name":null},{"line":646,"address":[662597,662657,662549],"length":1,"stats":{"Line":2},"fn_name":null},{"line":650,"address":[586357,586352],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":651,"address":[662807],"length":1,"stats":{"Line":1},"fn_name":null},{"line":652,"address":[662837],"length":1,"stats":{"Line":1},"fn_name":null},{"line":653,"address":[662890],"length":1,"stats":{"Line":1},"fn_name":null},{"line":654,"address":[663016],"length":1,"stats":{"Line":1},"fn_name":null},{"line":655,"address":[663322,663300],"length":1,"stats":{"Line":1},"fn_name":null},{"line":660,"address":[586384,586389],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":661,"address":[663399],"length":1,"stats":{"Line":1},"fn_name":null},{"line":662,"address":[663429],"length":1,"stats":{"Line":1},"fn_name":null},{"line":663,"address":[663482],"length":1,"stats":{"Line":1},"fn_name":null},{"line":664,"address":[663608],"length":1,"stats":{"Line":1},"fn_name":null},{"line":665,"address":[663914,663892],"length":1,"stats":{"Line":1},"fn_name":null},{"line":669,"address":[586416,586421],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":670,"address":[663991],"length":1,"stats":{"Line":1},"fn_name":null},{"line":671,"address":[664021],"length":1,"stats":{"Line":1},"fn_name":null},{"line":672,"address":[664074],"length":1,"stats":{"Line":1},"fn_name":null},{"line":673,"address":[664200],"length":1,"stats":{"Line":1},"fn_name":null},{"line":674,"address":[664506,664484],"length":1,"stats":{"Line":1},"fn_name":null},{"line":678,"address":[586448,586453],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":679,"address":[664583],"length":1,"stats":{"Line":1},"fn_name":null},{"line":680,"address":[664613],"length":1,"stats":{"Line":1},"fn_name":null},{"line":681,"address":[664666],"length":1,"stats":{"Line":1},"fn_name":null},{"line":682,"address":[664792],"length":1,"stats":{"Line":1},"fn_name":null},{"line":683,"address":[665076,665098],"length":1,"stats":{"Line":1},"fn_name":null},{"line":686,"address":[652688],"length":1,"stats":{"Line":1},"fn_name":"process"},{"line":687,"address":[652701],"length":1,"stats":{"Line":1},"fn_name":null},{"line":688,"address":[652746],"length":1,"stats":{"Line":1},"fn_name":null},{"line":691,"address":[653225,652800],"length":1,"stats":{"Line":1},"fn_name":"extract_retval"},{"line":692,"address":[652822],"length":1,"stats":{"Line":1},"fn_name":null},{"line":693,"address":[653109,653027,652955,652855],"length":1,"stats":{"Line":4},"fn_name":null},{"line":696,"address":[654501,653264],"length":1,"stats":{"Line":1},"fn_name":"eval_and_extract_state"},{"line":697,"address":[653295],"length":1,"stats":{"Line":1},"fn_name":null},{"line":698,"address":[653342],"length":1,"stats":{"Line":1},"fn_name":null},{"line":699,"address":[653782,653469,653517],"length":1,"stats":{"Line":3},"fn_name":null},{"line":700,"address":[654225],"length":1,"stats":{"Line":1},"fn_name":null},{"line":701,"address":[654367],"length":1,"stats":{"Line":1},"fn_name":null},{"line":704,"address":[654544,654935],"length":1,"stats":{"Line":1},"fn_name":"eval_and_expect"},{"line":705,"address":[654561],"length":1,"stats":{"Line":1},"fn_name":null},{"line":706,"address":[654616,654759],"length":1,"stats":{"Line":2},"fn_name":null}],"covered":247,"coverable":342},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","literals.rs"],"content":"//! AST Level representation of Literal Values\nuse core::fmt;\nuse std::fmt::Display;\n\n/// Represent Literal Values that we parse.\n///\n/// Conventionally these things are stored as void*s or Objects. (un)fortunatley\n/// rust takes inspiration from ML so all of our types need to be concrete.\n/// To handle the fact we have a few different literals that can exist we\n/// wrap them inside a union as variants.\n///\n/// This gives us the illusion that we are\n/// only refering to some Literal type, when it contains some value.\n/// As a wise man once said, there is power in a union.\n#[derive(Debug, Clone, PartialEq, PartialOrd)]\npub enum Literal {\n    Number(f64),\n    StrLit(String),\n    Bool(bool),\n    Empty,\n}\n\nimpl Display for Literal {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        match self {\n            Literal::Number(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Literal::StrLit(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n            Literal::Empty =\u003e {\n                write!(f, \"Empty\")\n            }\n            Literal::Bool(x) =\u003e {\n                write!(f, \"{}\", x)\n            }\n        }\n    }\n}\n","traces":[{"line":24,"address":[668352],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":25,"address":[668385],"length":1,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[668421],"length":1,"stats":{"Line":0},"fn_name":null},{"line":27,"address":[668908,668430],"length":1,"stats":{"Line":0},"fn_name":null},{"line":29,"address":[668491],"length":1,"stats":{"Line":0},"fn_name":null},{"line":30,"address":[668503,668815],"length":1,"stats":{"Line":0},"fn_name":null},{"line":33,"address":[668636],"length":1,"stats":{"Line":0},"fn_name":null},{"line":35,"address":[668568],"length":1,"stats":{"Line":0},"fn_name":null},{"line":36,"address":[668580,668725],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":9},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","main.rs"],"content":"mod ast;\nmod callable;\nmod environment;\nmod interpreter;\nmod literals;\nmod nativefn;\nmod parser;\nmod scanner;\nmod token;\nmod tokentype;\nmod userfunction;\n\nuse std::fs;\nuse std::io;\n\nuse interpreter::Interpreter;\nuse parser::Parser;\nuse scanner::Scanner;\n\nuse rustyline::Editor;\n\nuse clap::{AppSettings, Parser as ClapParser};\n\n/// Clap-based CLI Option Parser\n#[derive(ClapParser)]\n#[clap(version = \"0.1\")]\nstruct Opts {\n    sourcefile: Option\u003cString\u003e,\n}\n\nfn main() {\n    let opts: Opts = Opts::parse();\n    match opts.sourcefile {\n        Some(x) =\u003e run_file(x),\n        _ =\u003e {\n            repl();\n        }\n    }\n}\n\nfn read_file(path: String) -\u003e Result\u003cString, io::Error\u003e {\n    fs::read_to_string(path)\n}\n\nfn run_file(path: String) {\n    let mut interpreter = Interpreter::new();\n    let ritual = read_file(path);\n    run(ritual.unwrap(), \u0026mut interpreter);\n}\n\n/// A (very) simple Read-Eval-Print-Loop for Daemonica.\nfn repl() {\n    let mut rl = Editor::\u003c()\u003e::new();\n    let mut interpreter = Interpreter::new();\n    loop {\n        let readline = rl.readline(\"Daemonica\u003e \");\n        match readline {\n            Ok(line) =\u003e {\n                rl.add_history_entry(line.as_str());\n                run(line.to_string().clone(), \u0026mut interpreter);\n            }\n            Err(_) =\u003e {\n                break;\n            }\n        }\n    }\n}\n\nfn run(src: String, i: \u0026mut Interpreter) {\n    let tokens = Scanner::scan(src);\n    let parsed = Parser::parse(tokens);\n    //let mut s: Scanner = Scanner::new(src);\n    //let tokens = s.scan_tokens();\n    //let mut p: Parser = Parser::new(tokens);\n    //let parsed = p.parse_self();\n    //println!(\"{:#?}\", parsed);\n    let result = i.interpret(parsed);\n    //println!(\"{:#?}\", result.unwrap());\n}\n","traces":[{"line":31,"address":[838524,838336],"length":1,"stats":{"Line":0},"fn_name":"main"},{"line":32,"address":[838340],"length":1,"stats":{"Line":0},"fn_name":null},{"line":33,"address":[838360],"length":1,"stats":{"Line":0},"fn_name":null},{"line":34,"address":[838515,838383],"length":1,"stats":{"Line":0},"fn_name":null},{"line":36,"address":[838440],"length":1,"stats":{"Line":0},"fn_name":null},{"line":41,"address":[838592],"length":1,"stats":{"Line":0},"fn_name":"read_file"},{"line":42,"address":[838604],"length":1,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[838656,838930],"length":1,"stats":{"Line":0},"fn_name":"run_file"},{"line":46,"address":[838667],"length":1,"stats":{"Line":0},"fn_name":null},{"line":47,"address":[838699],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[838794,838903],"length":1,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[839542,838960],"length":1,"stats":{"Line":0},"fn_name":"repl"},{"line":53,"address":[838967],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[838985],"length":1,"stats":{"Line":0},"fn_name":null},{"line":56,"address":[839031],"length":1,"stats":{"Line":0},"fn_name":null},{"line":57,"address":[839117,839063],"length":1,"stats":{"Line":0},"fn_name":null},{"line":58,"address":[839119],"length":1,"stats":{"Line":0},"fn_name":null},{"line":59,"address":[839250,839159],"length":1,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[839314],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[839568],"length":1,"stats":{"Line":0},"fn_name":"run"},{"line":70,"address":[839587],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[839628],"length":1,"stats":{"Line":0},"fn_name":null},{"line":77,"address":[839677],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":23},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","nativefn.rs"],"content":"//! Language-level functions and builtins.\nuse core::{fmt, time};\nuse std::{\n    collections::HashMap,\n    thread,\n    time::{SystemTime, UNIX_EPOCH},\n};\n\nuse fxhash::hash64;\n\nuse crate::{ast::Value, callable::Callable, interpreter::Interpreter};\n\n#[derive(Clone)]\npub struct NativeFn {\n    name: String,\n    arity: usize,\n    // We can implement a callable as a closure type here.\n    func: fn(\u0026mut Interpreter, Vec\u003cValue\u003e) -\u003e Result\u003cValue, String\u003e,\n}\n\nimpl PartialEq for NativeFn {\n    fn eq(\u0026self, other: \u0026Self) -\u003e bool {\n        //self.name == other.name \u0026\u0026 self.arity == other.arity\n        let selfhash = hash64(\u0026self.stringify_for_hash());\n        let otherhash = hash64(\u0026other.stringify_for_hash());\n        selfhash == otherhash\n    }\n}\n\nimpl NativeFn {\n    pub fn stringify_for_hash(\u0026self) -\u003e String {\n        format!(\"{}.{}\", self.name, self.arity)\n    }\n\n    pub fn call(\u0026self, interpreter: \u0026mut Interpreter, args: Vec\u003cValue\u003e) -\u003e Result\u003cOption\u003cValue\u003e, String\u003e {\n        let res = (self.func)(interpreter, args)?;\n        //interpreter.retval = Some(res);\n        Ok(Some(res))\n    }\n}\n\n// impl Callable for NativeFn {\n//     fn arity(\u0026self, interpreter: \u0026Interpreter) -\u003e usize {\n//         self.arity\n//     }\n\n// }\n\nimpl fmt::Debug for NativeFn {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        write!(f, \"NativeFn({}.{})\", self.name, self.arity)\n    }\n}\n\nimpl fmt::Display for NativeFn {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        write!(f, \"NativeFn({})\", self.name)\n    }\n}\n\npub fn generate_native_functions() -\u003e HashMap\u003cString, Option\u003cValue\u003e\u003e {\n    let mut funcs: HashMap\u003cString, Option\u003cValue\u003e\u003e = HashMap::new();\n    funcs.insert(\n        String::from(\"horologium\"),\n        Some(Value::NativeFn(NativeFn {\n            name: \"horologium\".to_string(),\n            arity: 0,\n            func: |_, _| {\n                let start_time = SystemTime::now();\n                Ok(Value::Number(\n                    start_time.duration_since(UNIX_EPOCH).unwrap().as_millis() as f64,\n                ))\n            },\n        })),\n    );\n    funcs.insert(\n        String::from(\"manere\"),\n        Some(Value::NativeFn(NativeFn {\n            name: \"manere\".to_string(),\n            arity: 1,\n            func: |_, args| {\n                if args.len() != 1 {\n                    let emsg = format!(\"Attempted to call manere with {} args but expected 1\", args.len());\n                    return Err(emsg);\n                }\n                let arg = args.first().unwrap();\n                match arg {\n                    Value::Number(x) =\u003e {\n                        thread::sleep(time::Duration::from_secs(x.round() as u64));\n                        return Ok(Value::Empty);\n                    },\n                    _ =\u003e { return Err(String::from(\"Attempted to call manere with a non-numeric argument\")) }\n                }\n            },\n        })),\n    );\n    funcs\n}\n","traces":[{"line":22,"address":[564712,564608],"length":1,"stats":{"Line":0},"fn_name":"eq"},{"line":24,"address":[564633],"length":1,"stats":{"Line":0},"fn_name":null},{"line":25,"address":[564729],"length":1,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[564815],"length":1,"stats":{"Line":0},"fn_name":null},{"line":31,"address":[564832],"length":1,"stats":{"Line":0},"fn_name":"stringify_for_hash"},{"line":32,"address":[564857],"length":1,"stats":{"Line":0},"fn_name":null},{"line":35,"address":[565959,565088],"length":1,"stats":{"Line":0},"fn_name":"call"},{"line":36,"address":[565134,565492],"length":1,"stats":{"Line":0},"fn_name":null},{"line":37,"address":[565797],"length":1,"stats":{"Line":0},"fn_name":null},{"line":39,"address":[565457,565940,565828,565685,565616],"length":1,"stats":{"Line":0},"fn_name":null},{"line":40,"address":[565873],"length":1,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[565984],"length":1,"stats":{"Line":1},"fn_name":"fmt"},{"line":53,"address":[566012],"length":1,"stats":{"Line":1},"fn_name":null},{"line":58,"address":[566240],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":59,"address":[566262],"length":1,"stats":{"Line":0},"fn_name":null},{"line":63,"address":[566400,567296],"length":1,"stats":{"Line":1},"fn_name":"generate_native_functions"},{"line":64,"address":[566419],"length":1,"stats":{"Line":1},"fn_name":null},{"line":65,"address":[566766],"length":1,"stats":{"Line":1},"fn_name":null},{"line":66,"address":[566440],"length":1,"stats":{"Line":1},"fn_name":null},{"line":67,"address":[566539,566464],"length":1,"stats":{"Line":2},"fn_name":null},{"line":68,"address":[566472],"length":1,"stats":{"Line":1},"fn_name":null},{"line":70,"address":[848518,848208],"length":1,"stats":{"Line":0},"fn_name":"{closure#0}"},{"line":71,"address":[848246],"length":1,"stats":{"Line":0},"fn_name":null},{"line":72,"address":[848464],"length":1,"stats":{"Line":0},"fn_name":null},{"line":73,"address":[848287,848362],"length":1,"stats":{"Line":0},"fn_name":null},{"line":78,"address":[567165],"length":1,"stats":{"Line":1},"fn_name":null},{"line":79,"address":[566872],"length":1,"stats":{"Line":1},"fn_name":null},{"line":80,"address":[566938,566899],"length":1,"stats":{"Line":2},"fn_name":null},{"line":81,"address":[566907],"length":1,"stats":{"Line":1},"fn_name":null},{"line":83,"address":[848560,848726],"length":1,"stats":{"Line":0},"fn_name":"{closure#1}"},{"line":84,"address":[848603],"length":1,"stats":{"Line":0},"fn_name":null},{"line":85,"address":[848678],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":12,"coverable":32},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","parser.rs"],"content":"//! A Hand-written recurisve descent parser for Daemonica.\nuse crate::{\n    ast::{ASTNode, Expr, Stmt},\n    literals::Literal,\n    token::Token,\n    tokentype::TokenType,\n};\n\n/// The documentation for this crate is designed to follow the flow of the\n/// recursive descent parser. As such each level of precidence and it's productions\n/// are doccumented before each lower level of precidence.\npub struct Parser {\n    /// Store the sequence of tokens that we recieve from the lexer, so we can\n    /// recursivley parse them.\n    tokens: Vec\u003cToken\u003e,\n    /// Store a counter that indexes to the current token.\n    current: usize,\n}\n\nimpl Parser {\n    /// Initialize a parser instance with some input set of tokens.\n    pub fn new(tokens: Vec\u003cToken\u003e) -\u003e Parser {\n        Parser { tokens, current: 0 }\n    }\n\n    /// Given an initialized Parser; produces a series of AST Nodes to be interpreted.\n    ///\n    /// # Example\n    /// ```\n    /// let mut s: Scanner = Scanner::new(src);\n    /// let tokens = s.scan_tokens();\n    /// let mut p: Parser = Parser::new(tokens);\n    /// let AST = p.parse();\n    /// ```\n    pub fn parse_self(\u0026mut self) -\u003e Vec\u003cASTNode\u003e {\n        let mut stmts: Vec\u003cASTNode\u003e = Vec::new();\n        while self.at_end() == false {\n            //stmts.push(ASTNode::StmtNode(self.statement()));\n            stmts.push(ASTNode::StmtNode(self.declaration()));\n        }\n        return stmts;\n    }\n\n    /// Helper function that allows you to parse directly if you don't want\n    /// to actually keep an instance of the parser.\n    ///\n    /// # Example\n    /// ```\n    /// let mut s: Scanner = scanner::new(src);\n    /// let tokens = s.scan_tokens();\n    /// let AST = Parser::parse_direct(tokens);\n    /// ```\n    pub fn parse(tokens: Vec\u003cToken\u003e) -\u003e Vec\u003cASTNode\u003e {\n        let mut p = self::Parser::new(tokens);\n        p.parse_self()\n    }\n\n    /// Top level of our parse tree. Checks for function definitions, or variable\n    /// declarations first. If neither descends into statement.\n    fn declaration(\u0026mut self) -\u003e Stmt {\n        if self.maybe_advance(vec![TokenType::Fn]) {\n            return self.function();\n        }\n        if self.maybe_advance(vec![TokenType::Var]) {\n            return self.var_decl();\n        }\n        return self.statement();\n    }\n\n    /// Grab the function name, and the actual body of the function.\n    fn function(\u0026mut self) -\u003e Stmt {\n        let name = self.consume(TokenType::Identifier);\n        self.consume(TokenType::LeftParen);\n        let mut params: Vec\u003cToken\u003e = Vec::new();\n        if self.check(TokenType::RightParen) == false {\n            loop {\n                params.push(self.consume(TokenType::Identifier));\n                if self.maybe_advance(vec![TokenType::Comma]) == false {\n                    break;\n                }\n            }\n        }\n        self.consume(TokenType::RightParen);\n        self.consume(TokenType::LeftBrace);\n        let body = self.block();\n        Stmt::Function(name, params, body)\n    }\n\n    /// Collect the variable name, then we need to see if we have an initializer\n    /// statement or not. If we do we need to parse it as an expression and store\n    /// it.\n    /// If we dont we can simply store it as an [Option::None]\n    fn var_decl(\u0026mut self) -\u003e Stmt {\n        // Grab the variable name first of all, so we can bind it\n        let name = self.consume(TokenType::Identifier);\n\n        // Check if we have an initializer statement or not. If we do we need\n        // to parse that out as an expression.\n        // otherwise we just bind the name to an empty value\n        if self.maybe_advance(vec![TokenType::Equal]) {\n            let initializer = Some(self.expression());\n            self.consume(TokenType::Semicolon);\n            return Stmt::Var(name, initializer);\n        } else {\n            self.consume(TokenType::Semicolon);\n            return Stmt::Var(name, None);\n        }\n    }\n\n    /// 2nd Level of the parser.\n    ///\n    /// This level has multiple productions of the same precidence.\n    /// Print and Return statements are both \"detected\" here, as are\n    /// flow control statements like While, If and For.\n    /// Block Statements are also parsed here.\n    fn statement(\u0026mut self) -\u003e Stmt {\n        if self.maybe_advance(vec![TokenType::Print]) {\n            return self.parse_print();\n        }\n        if self.maybe_advance(vec![TokenType::Return]) {\n            return self.parse_return();\n        }\n        if self.maybe_advance(vec![TokenType::LeftBrace]) {\n            return Stmt::Block(self.block());\n        }\n        if self.maybe_advance(vec![TokenType::While]) {\n            return self.while_stmt();\n        }\n        if self.maybe_advance(vec![TokenType::If]) {\n            return self.if_stmt();\n        }\n        if self.maybe_advance(vec![TokenType::For]) {\n            return self.parse_for();\n        }\n        return self.expression_stmt();\n    }\n\n    /// Take the right hand side as an expression and dump it wholesale\n    /// into a new AST node.\n    fn parse_print(\u0026mut self) -\u003e Stmt {\n        let val = self.expression();\n        self.consume(TokenType::Semicolon);\n        return Stmt::Print(val);\n    }\n\n    /// Grab the right hand side of the expression, and throw it into the AST.\n    /// The RHS in the AST node is an Option so that empty returns are allowed.\n    ///\n    /// ***NOTE: Return DOES NOT return control flow, merley a value.***\n    fn parse_return(\u0026mut self) -\u003e Stmt {\n        let prev = self.previous();\n        let mut value = None;\n        if !self.check(TokenType::Semicolon) {\n            value = Some(self.expression());\n        }\n        self.consume(TokenType::Semicolon);\n        Stmt::Return(prev, value)\n    }\n\n    /// This produces a vector of statements, that we then wrap inside a [crate::ast::Stmt::Block].\n    fn block(\u0026mut self) -\u003e Vec\u003cStmt\u003e {\n        let mut stmts = Vec::new();\n        while !self.check(TokenType::RightBrace) \u0026\u0026 !self.at_end() {\n            stmts.push(self.declaration());\n        }\n        self.consume(TokenType::RightBrace);\n        stmts\n    }\n\n    /// Standard while loop construct. We grab the condition and the body\n    /// of the while statement and produce a new AST Node.\n    fn while_stmt(\u0026mut self) -\u003e Stmt {\n        self.consume(TokenType::LeftParen);\n        let condition = self.expression();\n        self.consume(TokenType::RightParen);\n        let body = self.statement();\n        return Stmt::While(condition, Box::new(body));\n    }\n\n    /// This handles both if and else constructs.\n    /// Grab the condition and the body of the if statement.\n    /// If an Else statement exists, when we parse that too; otherwise it's a None.\n    fn if_stmt(\u0026mut self) -\u003e Stmt {\n        self.consume(TokenType::LeftParen);\n        let condition = self.expression();\n        self.consume(TokenType::RightParen);\n\n        let thenb = self.statement();\n        let mut elseb = None;\n        // Avoid the dangling else by checking for it eagerly.\n        if self.maybe_advance(vec![TokenType::Else]) {\n            elseb = Some(self.statement());\n        }\n        return Stmt::If(condition, Box::new(thenb), Box::new(elseb));\n    }\n\n    /// We desugar for statments into their component parts.\n    ///\n    /// As any for loop\n    /// can also be expressed as a while loop, with some extra code that runs\n    /// before execution (initializer), and some code that runs\n    /// before each iteration (incrementation etc).\n    ///\n    /// As such we can; instead of implementing\n    /// the for loop itself; break the expression into it's components right now\n    /// avoiding adding an explicit case to the interpreter, and another variant in our AST.\n    fn parse_for(\u0026mut self) -\u003e Stmt {\n        self.consume(TokenType::LeftParen);\n        // Parse out the various parts of our for statement, for desugaring\n        // in a second\n\n        // Parse our initializer\n        let initializer: Option\u003cStmt\u003e;\n        if self.maybe_advance(vec![TokenType::Semicolon]) {\n            initializer = None;\n        } else if self.maybe_advance(vec![TokenType::Var]) {\n            initializer = Some(self.var_decl());\n        } else {\n            initializer = Some(self.expression_stmt());\n        }\n\n        // Parse the condition, if it exists.\n        let mut cond: Option\u003cExpr\u003e = None;\n        if !self.check(TokenType::Semicolon) {\n            cond = Some(self.expression());\n        }\n        self.consume(TokenType::Semicolon);\n\n        let mut increment: Option\u003cExpr\u003e = None;\n        if !self.check(TokenType::RightParen) {\n            increment = Some(self.expression());\n        }\n        self.consume(TokenType::RightParen);\n\n        // And finally get the body of the statement.\n        let mut body = self.statement();\n\n        match increment {\n            // If we have an increment, then create the AST Node for it.\n            Some(inc) =\u003e {\n                body = Stmt::Block(vec![body, Stmt::Expression(inc)]);\n                match cond {\n                    Some(_) =\u003e {}\n                    None =\u003e {\n                        cond = Some(Expr::Literal(Literal::Bool(true)));\n                    }\n                }\n                body = Stmt::While(cond.unwrap(), Box::new(body));\n\n                match initializer {\n                    Some(init) =\u003e {\n                        body = Stmt::Block(vec![init, body]);\n                    }\n                    None =\u003e {}\n                }\n            }\n            _ =\u003e {}\n        }\n        body\n    }\n\n    /// In order to keep our grammar somewhat sane, we have the ability to wrap\n    /// an expression inside a statement. This allows it to be a fair bit more\n    /// flexable.\n    fn expression_stmt(\u0026mut self) -\u003e Stmt {\n        let expr = self.expression();\n        self.consume(TokenType::Semicolon);\n        Stmt::Expression(expr)\n    }\n\n    /// Top level for expressions.\n    /// Recurses down to assignment\n    fn expression(\u0026mut self) -\u003e Expr {\n        self.assignment()\n    }\n\n    /// Parse varaible assignment\n    fn assignment(\u0026mut self) -\u003e Expr {\n        let expr = self.parse_or();\n\n        if self.maybe_advance(vec![TokenType::Equal]) {\n            // If we have an assignment, then grab the value\n            let equals = self.previous();\n            let value = self.assignment();\n\n            // If our expression that we recursed at the top is a variable, then\n            // we bind the value we just got, to that name.\n            match expr {\n                Expr::Variable(tok) =\u003e {\n                    return Expr::Assign(tok, Box::new(value));\n                }\n                // If not, we forgot to actually give the assignment it's RHS.\n                _ =\u003e {\n                    let emsg = format!(\"{} is an invalid assignment target\", equals);\n                    panic!(\"{}\", emsg);\n                }\n            }\n        }\n        return expr;\n    }\n\n    /// parse logical ors\n    ///\n    /// Quite simple, grab the RHS and the LHS, throw them in a node.\n    fn parse_or(\u0026mut self) -\u003e Expr {\n        let mut expr = self.parse_and();\n\n        while self.maybe_advance(vec![TokenType::Or]) {\n            let op = self.previous();\n            let right = self.parse_and();\n            expr = Expr::Logic(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// Parse logical And\n    fn parse_and(\u0026mut self) -\u003e Expr {\n        let mut expr = self.equality();\n\n        while self.maybe_advance(vec![TokenType::And]) {\n            let op = self.previous();\n            let right = self.equality();\n            expr = Expr::Logic(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// Parse equality expressions (== and !=)\n    fn equality(\u0026mut self) -\u003e Expr {\n        let mut expr = self.comparison();\n\n        while self.maybe_advance(vec![TokenType::BangEqual, TokenType::EqualEqual]) {\n            let op = self.previous();\n            let right = self.comparison();\n            expr = Expr::Binary(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// Parse \u003e, \u003e=, \u003c and \u003c= expressions\n    fn comparison(\u0026mut self) -\u003e Expr {\n        let mut expr = self.term();\n\n        while self.maybe_advance(vec![\n            TokenType::Greater,\n            TokenType::GreaterEqual,\n            TokenType::Less,\n            TokenType::LessEqual,\n        ]) {\n            let op = self.previous();\n            let right = self.term();\n            expr = Expr::Binary(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// parse + and - expressions\n    fn term(\u0026mut self) -\u003e Expr {\n        let mut expr = self.factor();\n        while self.maybe_advance(vec![TokenType::Plus, TokenType::Minus]) {\n            let op = self.previous();\n            let right = self.factor();\n            expr = Expr::Binary(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// Parse * and / expressions\n    fn factor(\u0026mut self) -\u003e Expr {\n        let mut expr = self.unary();\n        while self.maybe_advance(vec![TokenType::Star, TokenType::Slash]) {\n            let op = self.previous();\n            let right = self.unary();\n            expr = Expr::Binary(Box::new(expr), op, Box::new(right));\n        }\n        expr\n    }\n\n    /// Unary expressions like ! which negates boolean or - which negates a number\n    /// are parsed here\n    fn unary(\u0026mut self) -\u003e Expr {\n        // Check to see if it's a ! or -. If it is ten it's a unary expression\n        // so grab the token and recurse un unary to parse te operand.\n        if self.maybe_advance(vec![TokenType::Bang, TokenType::Minus]) {\n            let op = self.previous();\n            let right = self.unary();\n            Expr::Unary(op, Box::new(right))\n        } else {\n            // If it's not a unary expr, then we might have a call\n            self.call()\n            //self.primary()\n        }\n    }\n\n    /// This handles function calls.\n    /// Extracts the name of the function, and (possibly) arguments\n    /// and produces a new node with them.\n    fn call(\u0026mut self) -\u003e Expr {\n        let mut expr = self.primary();\n        loop {\n            if self.maybe_advance(vec![TokenType::LeftParen]) {\n                expr = self.parse_arglist(expr);\n            } else {\n                break;\n            }\n        }\n        return expr;\n    }\n\n    fn parse_arglist(\u0026mut self, callee: Expr) -\u003e Expr {\n        let mut args: Vec\u003cExpr\u003e = Vec::new();\n        if self.check(TokenType::RightParen) == false {\n            loop {\n                args.push(self.expression());\n                if !self.maybe_advance(vec![TokenType::Comma]) {\n                    break;\n                }\n            }\n        }\n        let paren = self.consume(TokenType::RightParen);\n        Expr::Call(Box::new(callee), paren, args)\n    }\n\n    /// Bottom case is primary expressions.\n    /// This includes all literals, variables and paren groupings.\n    /// If we reach here, and nothing is valid then we've bottomed out\n    /// the parser, and need to report an error to the user.\n    fn primary(\u0026mut self) -\u003e Expr {\n        if self.maybe_advance(vec![TokenType::False]) {\n            return Expr::Literal(Literal::Bool(false));\n        }\n        if self.maybe_advance(vec![TokenType::True]) {\n            return Expr::Literal(Literal::Bool(true));\n        }\n        if self.maybe_advance(vec![TokenType::None]) {\n            return Expr::Literal(Literal::Empty);\n        }\n        if self.maybe_advance(vec![TokenType::Number]) {\n            return Expr::Literal(self.previous().literal);\n        }\n        if self.maybe_advance(vec![TokenType::String]) {\n            return Expr::Literal(self.previous().literal);\n        }\n        if self.maybe_advance(vec![TokenType::Identifier]) {\n            return Expr::Variable(self.previous());\n        }\n\n        if self.maybe_advance(vec![TokenType::LeftParen]) {\n            let expr = self.expression();\n            self.consume(TokenType::RightParen);\n            return Expr::Grouping(Box::new(expr));\n        }\n        panic!(\"Bottomed out of Parser::primary with {}\", self.peek());\n    }\n\n    // Helper functions that abstract out common logic.\n\n    /// Consume the next token, if it matches the provided token variant.\n    fn consume(\u0026mut self, ttype: TokenType) -\u003e Token {\n        //if self.expect(vec![ttype.clone()]) {\n        if self.check(ttype.clone()) {\n            return self.next();\n        } else {\n            panic!(\n                \"Was expecting token {:?}, but found {:?} at token {} ({:?})\",\n                ttype,\n                self.peek().ttype,\n                self.current,\n                self.peek()\n            );\n        }\n    }\n\n    /// Given a list of valid tokentypes, see if the next token in the stream is\n    /// in that list, and thus valid\n    fn maybe_advance(\u0026mut self, types: Vec\u003cTokenType\u003e) -\u003e bool {\n        for ttype in types {\n            if self.check(ttype) {\n                self.next();\n                return true;\n            }\n        }\n        false\n    }\n\n    /// Checks if the given token type is the next token type. Does NOT consume.\n    fn check(\u0026mut self, ttype: TokenType) -\u003e bool {\n        if self.at_end() {\n            return false;\n        }\n        return self.peek().ttype == ttype;\n    }\n\n    /// Advance to the next token, producing the previous token\n    fn next(\u0026mut self) -\u003e Token {\n        if self.at_end() == false {\n            self.current += 1;\n        }\n        self.previous()\n    }\n\n    /// Lookahead one token.\n    fn peek(\u0026self) -\u003e Token {\n        self.tokens.get(self.current).unwrap().clone()\n    }\n\n    /// Return true if the next token is EOF.\n    fn at_end(\u0026self) -\u003e bool {\n        self.peek().ttype == TokenType::EOF\n    }\n\n    /// Produce the previous token in the token stream\n    fn previous(\u0026self) -\u003e Token {\n        self.tokens.get(self.current - 1).unwrap().clone()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use super::*;\n    use crate::scanner::Scanner;\n\n    #[test]\n    fn vardecl() {\n        let test: String = String::from(\"ligamen a = 5.3;\");\n        let tok = Scanner::scan(test);\n        let result = Parser::parse(tok);\n        let expected = vec![ASTNode::StmtNode(Stmt::Var(\n            Token::new(TokenType::Identifier, String::from(\"a\"), Literal::Empty, 1),\n            Some(Expr::Literal(Literal::Number(5.3))),\n        ))];\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn vardel_no_initializer() {\n        let test = String::from(\"ligamen a;\");\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Var(\n            Token::new(TokenType::Identifier, String::from(\"a\"), Literal::Empty, 1),\n            None,\n        ))];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn fundecl() {\n        let test: String = String::from(\n            r#\"\n        incantatio fun() {\n          \"Hi\";\n        }\"#,\n        );\n        let res = process(test);\n\n        let expected = vec![ASTNode::StmtNode(Stmt::Function(\n            Token::new(\n                TokenType::Identifier,\n                String::from(\"fun\"),\n                Literal::Empty,\n                2,\n            ),\n            vec![],\n            vec![Stmt::Expression(Expr::Literal(Literal::StrLit(\n                String::from(\"Hi\"),\n            )))],\n        ))];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn printstmt() {\n        let test: String = String::from(\"scribo 5.0;\");\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Print(Expr::Literal(\n            Literal::Number(5.0),\n        )))];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn return_test() {\n        let test = String::from(\n            r#\"\n        incantatio fun() {\n          beneficium 5;\n        }\"#,\n        );\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Function(\n            Token::new(\n                TokenType::Identifier,\n                String::from(\"fun\"),\n                Literal::Empty,\n                2,\n            ),\n            vec![],\n            vec![Stmt::Return(\n                Token::new(\n                    TokenType::Return,\n                    String::from(\"beneficium\"),\n                    Literal::Empty,\n                    3,\n                ),\n                Some(Expr::Literal(Literal::Number(5.0))),\n            )],\n        ))];\n        assert!(expected == res);\n    }\n\n    #[test]\n    fn return_nothing() {\n        let test = String::from(\n            r#\"\n        incantatio fun() {\n          beneficium;\n        }\"#,\n        );\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Function(\n            Token::new(\n                TokenType::Identifier,\n                String::from(\"fun\"),\n                Literal::Empty,\n                2,\n            ),\n            vec![],\n            vec![Stmt::Return(\n                Token::new(\n                    TokenType::Return,\n                    String::from(\"beneficium\"),\n                    Literal::Empty,\n                    3,\n                ),\n                None,\n            )],\n        ))];\n        assert!(expected == res);\n    }\n\n    #[test]\n    fn blocks() {\n        let test = String::from(\n            r#\"\n            \"Outside\";\n            {\n                \"Inside\";\n            }\"#,\n        );\n        let res = process(test);\n        let expected = vec![\n            ASTNode::StmtNode(Stmt::Expression(Expr::Literal(Literal::StrLit(\n                String::from(\"Outside\"),\n            )))),\n            ASTNode::StmtNode(Stmt::Block(vec![Stmt::Expression(Expr::Literal(\n                Literal::StrLit(String::from(\"Inside\")),\n            ))])),\n        ];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn ifstmt() {\n        let test = String::from(\n            r#\"\n            si(1 == 2) {\n                scribo \"Maths is hard\";\n            }\n            \"#,\n        );\n        let expected = vec![ASTNode::StmtNode(Stmt::If(\n            Expr::Binary(\n                Box::new(Expr::Literal(Literal::Number(1.0))),\n                Token::new(TokenType::EqualEqual, String::from(\"==\"), Literal::Empty, 2),\n                Box::new(Expr::Literal(Literal::Number(2.0))),\n            ),\n            Box::new(Stmt::Block(vec![Stmt::Print(Expr::Literal(\n                Literal::StrLit(String::from(\"Maths is hard\")),\n            ))])),\n            Box::new(None),\n        ))];\n        let res = process(test);\n        assert!(expected == res);\n    }\n\n    #[test]\n    fn grouping() {\n        let test = String::from(\"5 + (20 + 2 * (3));\");\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Expression(Expr::Binary(\n            Box::new(Expr::Literal(Literal::Number(5.0))),\n            Token {\n                ttype: TokenType::Plus,\n                lexeme: \"+\".to_string(),\n                literal: Literal::Empty,\n                line: 1,\n            },\n            Box::new(Expr::Grouping(Box::new(Expr::Binary(\n                Box::new(Expr::Literal(Literal::Number(20.0))),\n                Token {\n                    ttype: TokenType::Plus,\n                    lexeme: \"+\".to_string(),\n                    literal: Literal::Empty,\n                    line: 1,\n                },\n                Box::new(Expr::Binary(\n                    Box::new(Expr::Literal(Literal::Number(2.0))),\n                    Token {\n                        ttype: TokenType::Star,\n                        lexeme: \"*\".to_string(),\n                        literal: Literal::Empty,\n                        line: 1,\n                    },\n                    Box::new(Expr::Grouping(Box::new(Expr::Literal(Literal::Number(\n                        3.0,\n                    ))))),\n                )),\n            )))),\n        )))];\n        assert!(expected == res);\n    }\n\n    #[test]\n    fn unary() {\n        let test = String::from(\"-5.0;\");\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Expression(Expr::Unary(\n            Token::new(TokenType::Minus, String::from(\"-\"), Literal::Empty, 1),\n            Box::new(Expr::Literal(Literal::Number(5.0))),\n        )))];\n        assert!(expected == res);\n\n        let test = String::from(\"!verum;\");\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Expression(Expr::Unary(\n            Token::new(TokenType::Bang, String::from(\"!\"), Literal::Empty, 1),\n            Box::new(Expr::Literal(Literal::Bool(true))),\n        )))];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn ifelse() {\n        let test = String::from(\n            r#\"\n            si(1 == 2) {\n                scribo \"Maths is hard\";\n            } aliter {\n                scribo \"Maths is easy\";\n            }\n            \"#,\n        );\n        let expected = vec![ASTNode::StmtNode(Stmt::If(\n            Expr::Binary(\n                Box::new(Expr::Literal(Literal::Number(1.0))),\n                Token::new(TokenType::EqualEqual, String::from(\"==\"), Literal::Empty, 2),\n                Box::new(Expr::Literal(Literal::Number(2.0))),\n            ),\n            Box::new(Stmt::Block(vec![Stmt::Print(Expr::Literal(\n                Literal::StrLit(String::from(\"Maths is hard\")),\n            ))])),\n            Box::new(Some(Stmt::Block(vec![Stmt::Print(Expr::Literal(\n                Literal::StrLit(String::from(\"Maths is easy\")),\n            ))]))),\n        ))];\n        let res = process(test);\n        assert!(expected == res);\n    }\n\n    #[test]\n    fn forstmt() {\n        let test = String::from(\n            r#\"\n            enim(ligamen i = 1; i \u003c 100; i = i + 1) {\n                scribo i;\n            }\n            \"#,\n        );\n        let res = process(test);\n        let expected = vec![ASTNode::StmtNode(Stmt::Block(vec![\n            Stmt::Var(\n                Token {\n                    ttype: TokenType::Identifier,\n                    lexeme: \"i\".to_string(),\n                    literal: Literal::Empty,\n                    line: 2,\n                },\n                Some(Expr::Literal(Literal::Number(1.0))),\n            ),\n            Stmt::While(\n                Expr::Binary(\n                    Box::new(Expr::Variable(Token {\n                        ttype: TokenType::Identifier,\n                        lexeme: \"i\".to_string(),\n                        literal: Literal::Empty,\n                        line: 2,\n                    })),\n                    Token {\n                        ttype: TokenType::Less,\n                        lexeme: \"\u003c\".to_string(),\n                        literal: Literal::Empty,\n                        line: 2,\n                    },\n                    Box::new(Expr::Literal(Literal::Number(100.0))),\n                ),\n                Box::new(Stmt::Block(vec![\n                    Stmt::Block(vec![Stmt::Print(Expr::Variable(Token {\n                        ttype: TokenType::Identifier,\n                        lexeme: \"i\".to_string(),\n                        literal: Literal::Empty,\n                        line: 3,\n                    }))]),\n                    Stmt::Expression(Expr::Assign(\n                        Token {\n                            ttype: TokenType::Identifier,\n                            lexeme: \"i\".to_string(),\n                            literal: Literal::Empty,\n                            line: 2,\n                        },\n                        Box::new(Expr::Binary(\n                            Box::new(Expr::Variable(Token {\n                                ttype: TokenType::Identifier,\n                                lexeme: \"i\".to_string(),\n                                literal: Literal::Empty,\n                                line: 2,\n                            })),\n                            Token {\n                                ttype: TokenType::Plus,\n                                lexeme: \"+\".to_string(),\n                                literal: Literal::Empty,\n                                line: 2,\n                            },\n                            Box::new(Expr::Literal(Literal::Number(1.0))),\n                        )),\n                    )),\n                ])),\n            ),\n        ]))];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn whilestmt() {\n        let test = String::from(\n            r#\"\n            ligamen a = 0;\n            dum(a \u003c 100) {\n                a = a + 1;\n            }\n            \"#,\n        );\n        let res = process(test);\n        let expected = vec![\n            ASTNode::StmtNode(Stmt::Var(\n                Token {\n                    ttype: TokenType::Identifier,\n                    lexeme: String::from(\"a\"),\n                    literal: Literal::Empty,\n                    line: 2,\n                },\n                Some(Expr::Literal(Literal::Number(0.0))),\n            )),\n            ASTNode::StmtNode(Stmt::While(\n                Expr::Binary(\n                    Box::new(Expr::Variable(Token {\n                        ttype: TokenType::Identifier,\n                        lexeme: String::from(\"a\"),\n                        literal: Literal::Empty,\n                        line: 3,\n                    })),\n                    Token {\n                        ttype: TokenType::Less,\n                        lexeme: String::from(\"\u003c\"),\n                        literal: Literal::Empty,\n                        line: 3,\n                    },\n                    Box::new(Expr::Literal(Literal::Number(100.0))),\n                ),\n                Box::new(Stmt::Block(vec![Stmt::Expression(Expr::Assign(\n                    Token {\n                        ttype: TokenType::Identifier,\n                        lexeme: String::from(\"a\"),\n                        literal: Literal::Empty,\n                        line: 4,\n                    },\n                    Box::new(Expr::Binary(\n                        Box::new(Expr::Variable(Token {\n                            ttype: TokenType::Identifier,\n                            lexeme: String::from(\"a\"),\n                            literal: Literal::Empty,\n                            line: 4,\n                        })),\n                        Token {\n                            ttype: TokenType::Plus,\n                            lexeme: String::from(\"+\"),\n                            literal: Literal::Empty,\n                            line: 4,\n                        },\n                        Box::new(Expr::Literal(Literal::Number(1.0))),\n                    )),\n                ))])),\n            )),\n        ];\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn logic_ops() {\n        let and = String::from(\"verum et nihil;\");\n        let andres = process(and);\n        let expectedand = vec![ASTNode::StmtNode(Stmt::Expression(Expr::Logic(\n            Box::new(Expr::Literal(Literal::Bool(true))),\n            Token::new(TokenType::And, String::from(\"et\"), Literal::Empty, 1),\n            Box::new(Expr::Literal(Literal::Empty)),\n        )))];\n        assert!(andres == expectedand);\n\n        let or = String::from(\"verum vel nihil;\");\n        let orres = process(or);\n\n        let expectedor = vec![ASTNode::StmtNode(Stmt::Expression(Expr::Logic(\n            Box::new(Expr::Literal(Literal::Bool(true))),\n            Token::new(TokenType::Or, String::from(\"vel\"), Literal::Empty, 1),\n            Box::new(Expr::Literal(Literal::Empty)),\n        )))];\n        assert!(orres == expectedor);\n    }\n\n    fn process(testcase: String) -\u003e Vec\u003cASTNode\u003e {\n        let tok = Scanner::scan(testcase);\n        Parser::parse(tok)\n    }\n}\n","traces":[{"line":22,"address":[878592],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":35,"address":[878863,878672],"length":1,"stats":{"Line":1},"fn_name":"parse_self"},{"line":36,"address":[878705],"length":1,"stats":{"Line":1},"fn_name":null},{"line":37,"address":[878715],"length":1,"stats":{"Line":1},"fn_name":null},{"line":39,"address":[878798],"length":1,"stats":{"Line":1},"fn_name":null},{"line":53,"address":[878880,878990],"length":1,"stats":{"Line":1},"fn_name":"parse"},{"line":54,"address":[878893],"length":1,"stats":{"Line":1},"fn_name":null},{"line":55,"address":[878943],"length":1,"stats":{"Line":1},"fn_name":null},{"line":60,"address":[879024],"length":1,"stats":{"Line":1},"fn_name":"declaration"},{"line":61,"address":[879054],"length":1,"stats":{"Line":1},"fn_name":null},{"line":62,"address":[879165],"length":1,"stats":{"Line":1},"fn_name":null},{"line":64,"address":[879188,879135],"length":1,"stats":{"Line":2},"fn_name":null},{"line":65,"address":[879273],"length":1,"stats":{"Line":1},"fn_name":null},{"line":67,"address":[879256],"length":1,"stats":{"Line":1},"fn_name":null},{"line":71,"address":[879588,879280],"length":1,"stats":{"Line":1},"fn_name":"function"},{"line":72,"address":[879309],"length":1,"stats":{"Line":1},"fn_name":null},{"line":73,"address":[879333],"length":1,"stats":{"Line":1},"fn_name":null},{"line":74,"address":[879422],"length":1,"stats":{"Line":1},"fn_name":null},{"line":75,"address":[879429],"length":1,"stats":{"Line":1},"fn_name":null},{"line":82,"address":[880294,879616],"length":1,"stats":{"Line":1},"fn_name":"var_decl"},{"line":84,"address":[879646],"length":1,"stats":{"Line":1},"fn_name":null},{"line":89,"address":[879778,879671],"length":1,"stats":{"Line":2},"fn_name":null},{"line":90,"address":[879851],"length":1,"stats":{"Line":1},"fn_name":null},{"line":91,"address":[879959],"length":1,"stats":{"Line":1},"fn_name":null},{"line":92,"address":[880045],"length":1,"stats":{"Line":1},"fn_name":null},{"line":94,"address":[879804,880181],"length":1,"stats":{"Line":2},"fn_name":null},{"line":95,"address":[880188],"length":1,"stats":{"Line":1},"fn_name":null},{"line":105,"address":[880320],"length":1,"stats":{"Line":1},"fn_name":"statement"},{"line":106,"address":[880350],"length":1,"stats":{"Line":1},"fn_name":null},{"line":107,"address":[880467],"length":1,"stats":{"Line":1},"fn_name":null},{"line":109,"address":[880490,880437],"length":1,"stats":{"Line":2},"fn_name":null},{"line":110,"address":[880590],"length":1,"stats":{"Line":1},"fn_name":null},{"line":112,"address":[880602,880560],"length":1,"stats":{"Line":2},"fn_name":null},{"line":113,"address":[880697],"length":1,"stats":{"Line":1},"fn_name":null},{"line":115,"address":[880672,880768],"length":1,"stats":{"Line":2},"fn_name":null},{"line":116,"address":[880868],"length":1,"stats":{"Line":1},"fn_name":null},{"line":118,"address":[880838,880883],"length":1,"stats":{"Line":2},"fn_name":null},{"line":119,"address":[880983],"length":1,"stats":{"Line":1},"fn_name":null},{"line":121,"address":[880953,880998],"length":1,"stats":{"Line":2},"fn_name":null},{"line":122,"address":[881098],"length":1,"stats":{"Line":1},"fn_name":null},{"line":124,"address":[881078],"length":1,"stats":{"Line":1},"fn_name":null},{"line":129,"address":[881320,881120],"length":1,"stats":{"Line":1},"fn_name":"parse_print"},{"line":130,"address":[881150],"length":1,"stats":{"Line":1},"fn_name":null},{"line":131,"address":[881165],"length":1,"stats":{"Line":1},"fn_name":null},{"line":132,"address":[881245],"length":1,"stats":{"Line":1},"fn_name":null},{"line":139,"address":[881344,881869],"length":1,"stats":{"Line":1},"fn_name":"parse_return"},{"line":140,"address":[881374],"length":1,"stats":{"Line":1},"fn_name":null},{"line":141,"address":[881389],"length":1,"stats":{"Line":1},"fn_name":null},{"line":142,"address":[881664,881398],"length":1,"stats":{"Line":2},"fn_name":null},{"line":143,"address":[881526,881669],"length":1,"stats":{"Line":1},"fn_name":null},{"line":145,"address":[881727,881479],"length":1,"stats":{"Line":2},"fn_name":null},{"line":146,"address":[881734],"length":1,"stats":{"Line":1},"fn_name":null},{"line":150,"address":[882146,881888],"length":1,"stats":{"Line":1},"fn_name":"block"},{"line":151,"address":[881921],"length":1,"stats":{"Line":1},"fn_name":null},{"line":152,"address":[882001,881931],"length":1,"stats":{"Line":2},"fn_name":null},{"line":153,"address":[882089],"length":1,"stats":{"Line":1},"fn_name":null},{"line":155,"address":[882126,882048],"length":1,"stats":{"Line":2},"fn_name":null},{"line":161,"address":[882176,882771],"length":1,"stats":{"Line":1},"fn_name":"while_stmt"},{"line":162,"address":[882206],"length":1,"stats":{"Line":1},"fn_name":null},{"line":163,"address":[882255],"length":1,"stats":{"Line":1},"fn_name":null},{"line":164,"address":[882281],"length":1,"stats":{"Line":1},"fn_name":null},{"line":165,"address":[882381],"length":1,"stats":{"Line":1},"fn_name":null},{"line":166,"address":[882388,882711,882648],"length":1,"stats":{"Line":2},"fn_name":null},{"line":172,"address":[884093,882816],"length":1,"stats":{"Line":1},"fn_name":"if_stmt"},{"line":173,"address":[882846],"length":1,"stats":{"Line":1},"fn_name":null},{"line":174,"address":[882917],"length":1,"stats":{"Line":1},"fn_name":null},{"line":175,"address":[882943],"length":1,"stats":{"Line":1},"fn_name":null},{"line":177,"address":[883043],"length":1,"stats":{"Line":1},"fn_name":null},{"line":178,"address":[883058],"length":1,"stats":{"Line":1},"fn_name":null},{"line":180,"address":[883587,883194,883083],"length":1,"stats":{"Line":3},"fn_name":null},{"line":181,"address":[883501,883592],"length":1,"stats":{"Line":1},"fn_name":null},{"line":183,"address":[883658,883985,883219,883828],"length":1,"stats":{"Line":2},"fn_name":null},{"line":196,"address":[884128,887803],"length":1,"stats":{"Line":1},"fn_name":"parse_for"},{"line":197,"address":[884173],"length":1,"stats":{"Line":1},"fn_name":null},{"line":203,"address":[884396,884276],"length":1,"stats":{"Line":2},"fn_name":null},{"line":204,"address":[884443],"length":1,"stats":{"Line":0},"fn_name":null},{"line":205,"address":[884560,884428,884748,884821],"length":1,"stats":{"Line":3},"fn_name":null},{"line":206,"address":[884673],"length":1,"stats":{"Line":1},"fn_name":null},{"line":208,"address":[884650,884753],"length":1,"stats":{"Line":0},"fn_name":null},{"line":212,"address":[884505],"length":1,"stats":{"Line":1},"fn_name":null},{"line":213,"address":[884525,884830,885089],"length":1,"stats":{"Line":3},"fn_name":null},{"line":214,"address":[885094,884937],"length":1,"stats":{"Line":1},"fn_name":null},{"line":216,"address":[885163,884887],"length":1,"stats":{"Line":2},"fn_name":null},{"line":218,"address":[885178],"length":1,"stats":{"Line":1},"fn_name":null},{"line":219,"address":[885198,885511],"length":1,"stats":{"Line":2},"fn_name":null},{"line":220,"address":[885359,885516],"length":1,"stats":{"Line":1},"fn_name":null},{"line":222,"address":[885309,885585],"length":1,"stats":{"Line":2},"fn_name":null},{"line":225,"address":[885608],"length":1,"stats":{"Line":1},"fn_name":null},{"line":227,"address":[885623],"length":1,"stats":{"Line":1},"fn_name":null},{"line":229,"address":[885660],"length":1,"stats":{"Line":1},"fn_name":null},{"line":230,"address":[886263,885878,885782],"length":1,"stats":{"Line":3},"fn_name":null},{"line":231,"address":[886345],"length":1,"stats":{"Line":1},"fn_name":null},{"line":233,"address":[886716],"length":1,"stats":{"Line":0},"fn_name":null},{"line":234,"address":[886721,886682,886374],"length":1,"stats":{"Line":0},"fn_name":null},{"line":237,"address":[886947,887125,886782,886548],"length":1,"stats":{"Line":3},"fn_name":null},{"line":239,"address":[887185,887101],"length":1,"stats":{"Line":1},"fn_name":null},{"line":240,"address":[887200],"length":1,"stats":{"Line":1},"fn_name":null},{"line":241,"address":[887256,887477],"length":1,"stats":{"Line":2},"fn_name":null},{"line":248,"address":[885802],"length":1,"stats":{"Line":1},"fn_name":null},{"line":254,"address":[887952,888152],"length":1,"stats":{"Line":1},"fn_name":"expression_stmt"},{"line":255,"address":[887982],"length":1,"stats":{"Line":1},"fn_name":null},{"line":256,"address":[887997],"length":1,"stats":{"Line":1},"fn_name":null},{"line":257,"address":[888077],"length":1,"stats":{"Line":1},"fn_name":null},{"line":262,"address":[888176],"length":1,"stats":{"Line":1},"fn_name":"expression"},{"line":263,"address":[888193],"length":1,"stats":{"Line":1},"fn_name":null},{"line":267,"address":[888208,889459],"length":1,"stats":{"Line":1},"fn_name":"assignment"},{"line":268,"address":[888238],"length":1,"stats":{"Line":1},"fn_name":null},{"line":270,"address":[888293,888402],"length":1,"stats":{"Line":2},"fn_name":null},{"line":272,"address":[888477],"length":1,"stats":{"Line":1},"fn_name":null},{"line":273,"address":[888497],"length":1,"stats":{"Line":1},"fn_name":null},{"line":277,"address":[888512],"length":1,"stats":{"Line":1},"fn_name":null},{"line":278,"address":[888565],"length":1,"stats":{"Line":1},"fn_name":null},{"line":279,"address":[889253,888647,889347],"length":1,"stats":{"Line":2},"fn_name":null},{"line":283,"address":[888961,889115],"length":1,"stats":{"Line":0},"fn_name":null},{"line":284,"address":[889174],"length":1,"stats":{"Line":0},"fn_name":null},{"line":288,"address":[888428],"length":1,"stats":{"Line":1},"fn_name":null},{"line":294,"address":[889552,890701],"length":1,"stats":{"Line":1},"fn_name":"parse_or"},{"line":295,"address":[889585],"length":1,"stats":{"Line":1},"fn_name":null},{"line":297,"address":[889732,889627,890585],"length":1,"stats":{"Line":3},"fn_name":null},{"line":298,"address":[889795],"length":1,"stats":{"Line":1},"fn_name":null},{"line":299,"address":[889823],"length":1,"stats":{"Line":1},"fn_name":null},{"line":300,"address":[890467,890590,890087,889843],"length":1,"stats":{"Line":3},"fn_name":null},{"line":302,"address":[889758],"length":1,"stats":{"Line":1},"fn_name":null},{"line":306,"address":[890736,891885],"length":1,"stats":{"Line":1},"fn_name":"parse_and"},{"line":307,"address":[890769],"length":1,"stats":{"Line":1},"fn_name":null},{"line":309,"address":[890811,891769,890916],"length":1,"stats":{"Line":3},"fn_name":null},{"line":310,"address":[890979],"length":1,"stats":{"Line":1},"fn_name":null},{"line":311,"address":[891007],"length":1,"stats":{"Line":1},"fn_name":null},{"line":312,"address":[891774,891271,891027,891651],"length":1,"stats":{"Line":3},"fn_name":null},{"line":314,"address":[890942],"length":1,"stats":{"Line":1},"fn_name":null},{"line":318,"address":[893089,891920],"length":1,"stats":{"Line":1},"fn_name":"equality"},{"line":319,"address":[891953],"length":1,"stats":{"Line":1},"fn_name":null},{"line":321,"address":[892000,892120,892973],"length":1,"stats":{"Line":3},"fn_name":null},{"line":322,"address":[892183],"length":1,"stats":{"Line":1},"fn_name":null},{"line":323,"address":[892211],"length":1,"stats":{"Line":1},"fn_name":null},{"line":324,"address":[892231,892855,892978,892475],"length":1,"stats":{"Line":3},"fn_name":null},{"line":326,"address":[892146],"length":1,"stats":{"Line":1},"fn_name":null},{"line":330,"address":[893120,894325],"length":1,"stats":{"Line":1},"fn_name":"comparison"},{"line":331,"address":[893153],"length":1,"stats":{"Line":1},"fn_name":null},{"line":333,"address":[894209,893356,893200,893249],"length":1,"stats":{"Line":4},"fn_name":null},{"line":334,"address":[893217],"length":1,"stats":{"Line":1},"fn_name":null},{"line":335,"address":[893225],"length":1,"stats":{"Line":1},"fn_name":null},{"line":336,"address":[893233],"length":1,"stats":{"Line":1},"fn_name":null},{"line":337,"address":[893241],"length":1,"stats":{"Line":1},"fn_name":null},{"line":339,"address":[893419],"length":1,"stats":{"Line":1},"fn_name":null},{"line":340,"address":[893447],"length":1,"stats":{"Line":1},"fn_name":null},{"line":341,"address":[893711,894214,893467,894091],"length":1,"stats":{"Line":3},"fn_name":null},{"line":343,"address":[893382],"length":1,"stats":{"Line":1},"fn_name":null},{"line":347,"address":[895521,894352],"length":1,"stats":{"Line":1},"fn_name":"term"},{"line":348,"address":[894385],"length":1,"stats":{"Line":1},"fn_name":null},{"line":349,"address":[894432,894552,895405],"length":1,"stats":{"Line":3},"fn_name":null},{"line":350,"address":[894615],"length":1,"stats":{"Line":1},"fn_name":null},{"line":351,"address":[894643],"length":1,"stats":{"Line":1},"fn_name":null},{"line":352,"address":[895410,895287,894663,894907],"length":1,"stats":{"Line":3},"fn_name":null},{"line":354,"address":[894578],"length":1,"stats":{"Line":1},"fn_name":null},{"line":358,"address":[895552,896721],"length":1,"stats":{"Line":1},"fn_name":"factor"},{"line":359,"address":[895585],"length":1,"stats":{"Line":1},"fn_name":null},{"line":360,"address":[895752,895632,896605],"length":1,"stats":{"Line":3},"fn_name":null},{"line":361,"address":[895815],"length":1,"stats":{"Line":1},"fn_name":null},{"line":362,"address":[895843],"length":1,"stats":{"Line":1},"fn_name":null},{"line":363,"address":[896487,896610,896107,895863],"length":1,"stats":{"Line":3},"fn_name":null},{"line":365,"address":[895778],"length":1,"stats":{"Line":1},"fn_name":null},{"line":370,"address":[896752,897399],"length":1,"stats":{"Line":1},"fn_name":"unary"},{"line":373,"address":[897340,896782],"length":1,"stats":{"Line":2},"fn_name":null},{"line":374,"address":[896910],"length":1,"stats":{"Line":1},"fn_name":null},{"line":375,"address":[896941],"length":1,"stats":{"Line":1},"fn_name":null},{"line":376,"address":[897342,897290,896948],"length":1,"stats":{"Line":2},"fn_name":null},{"line":379,"address":[896895],"length":1,"stats":{"Line":1},"fn_name":null},{"line":387,"address":[898050,897440],"length":1,"stats":{"Line":1},"fn_name":"call"},{"line":388,"address":[897470],"length":1,"stats":{"Line":1},"fn_name":null},{"line":389,"address":[897501,897612],"length":1,"stats":{"Line":2},"fn_name":null},{"line":390,"address":[897671],"length":1,"stats":{"Line":1},"fn_name":null},{"line":391,"address":[897914,897702],"length":1,"stats":{"Line":2},"fn_name":null},{"line":393,"address":[897638],"length":1,"stats":{"Line":1},"fn_name":null},{"line":400,"address":[898112,899961],"length":1,"stats":{"Line":1},"fn_name":"primary"},{"line":401,"address":[898151],"length":1,"stats":{"Line":1},"fn_name":null},{"line":402,"address":[898298],"length":1,"stats":{"Line":0},"fn_name":null},{"line":404,"address":[898267,898393],"length":1,"stats":{"Line":2},"fn_name":null},{"line":405,"address":[898500],"length":1,"stats":{"Line":1},"fn_name":null},{"line":407,"address":[898472,898581],"length":1,"stats":{"Line":2},"fn_name":null},{"line":408,"address":[898682],"length":1,"stats":{"Line":1},"fn_name":null},{"line":410,"address":[898755,898654],"length":1,"stats":{"Line":2},"fn_name":null},{"line":411,"address":[898859],"length":1,"stats":{"Line":1},"fn_name":null},{"line":413,"address":[899023,898828],"length":1,"stats":{"Line":2},"fn_name":null},{"line":414,"address":[899127],"length":1,"stats":{"Line":1},"fn_name":null},{"line":416,"address":[899096,899291],"length":1,"stats":{"Line":2},"fn_name":null},{"line":417,"address":[899392],"length":1,"stats":{"Line":1},"fn_name":null},{"line":420,"address":[899460,899364],"length":1,"stats":{"Line":2},"fn_name":null},{"line":421,"address":[899567],"length":1,"stats":{"Line":1},"fn_name":null},{"line":422,"address":[899596],"length":1,"stats":{"Line":1},"fn_name":null},{"line":423,"address":[899937,899703],"length":1,"stats":{"Line":2},"fn_name":null},{"line":425,"address":[899541,899999],"length":1,"stats":{"Line":0},"fn_name":null},{"line":431,"address":[900192,900949],"length":1,"stats":{"Line":1},"fn_name":"consume"},{"line":433,"address":[900240],"length":1,"stats":{"Line":1},"fn_name":null},{"line":434,"address":[900342],"length":1,"stats":{"Line":1},"fn_name":null},{"line":436,"address":[900371,900435],"length":1,"stats":{"Line":0},"fn_name":null},{"line":439,"address":[900311],"length":1,"stats":{"Line":0},"fn_name":null},{"line":441,"address":[900407],"length":1,"stats":{"Line":0},"fn_name":null},{"line":448,"address":[901269,900976],"length":1,"stats":{"Line":1},"fn_name":"maybe_advance"},{"line":449,"address":[901257,900996,901183],"length":1,"stats":{"Line":3},"fn_name":null},{"line":450,"address":[901178,901193],"length":1,"stats":{"Line":2},"fn_name":null},{"line":451,"address":[901230],"length":1,"stats":{"Line":1},"fn_name":null},{"line":452,"address":[901252],"length":1,"stats":{"Line":1},"fn_name":null},{"line":455,"address":[901301],"length":1,"stats":{"Line":1},"fn_name":null},{"line":459,"address":[901312,901459],"length":1,"stats":{"Line":1},"fn_name":"check"},{"line":460,"address":[901333],"length":1,"stats":{"Line":1},"fn_name":null},{"line":461,"address":[901369],"length":1,"stats":{"Line":1},"fn_name":null},{"line":463,"address":[901357,901388],"length":1,"stats":{"Line":2},"fn_name":null},{"line":467,"address":[901472],"length":1,"stats":{"Line":1},"fn_name":"next"},{"line":468,"address":[901579,901504],"length":1,"stats":{"Line":2},"fn_name":null},{"line":469,"address":[901545,901581],"length":1,"stats":{"Line":1},"fn_name":null},{"line":471,"address":[901533],"length":1,"stats":{"Line":1},"fn_name":null},{"line":475,"address":[901632],"length":1,"stats":{"Line":1},"fn_name":"peek"},{"line":476,"address":[901664],"length":1,"stats":{"Line":1},"fn_name":null},{"line":480,"address":[901760,901845],"length":1,"stats":{"Line":1},"fn_name":"at_end"},{"line":481,"address":[901772],"length":1,"stats":{"Line":1},"fn_name":null},{"line":485,"address":[901872],"length":1,"stats":{"Line":1},"fn_name":"previous"},{"line":486,"address":[901904],"length":1,"stats":{"Line":1},"fn_name":null},{"line":496,"address":[788944,789852],"length":1,"stats":{"Line":3},"fn_name":"vardecl"},{"line":497,"address":[788951],"length":1,"stats":{"Line":1},"fn_name":null},{"line":498,"address":[788973],"length":1,"stats":{"Line":1},"fn_name":null},{"line":499,"address":[789018],"length":1,"stats":{"Line":1},"fn_name":null},{"line":500,"address":[789237,789085,789432],"length":1,"stats":{"Line":2},"fn_name":null},{"line":501,"address":[789107,789179],"length":1,"stats":{"Line":2},"fn_name":null},{"line":502,"address":[789276],"length":1,"stats":{"Line":1},"fn_name":null},{"line":504,"address":[789730,789808],"length":1,"stats":{"Line":1},"fn_name":null},{"line":508,"address":[789888,790573],"length":1,"stats":{"Line":3},"fn_name":"vardel_no_initializer"},{"line":509,"address":[789895],"length":1,"stats":{"Line":1},"fn_name":null},{"line":510,"address":[789917],"length":1,"stats":{"Line":1},"fn_name":null},{"line":511,"address":[790165,789972,790124],"length":1,"stats":{"Line":2},"fn_name":null},{"line":512,"address":[790066,789994],"length":1,"stats":{"Line":2},"fn_name":null},{"line":513,"address":[790153],"length":1,"stats":{"Line":1},"fn_name":null},{"line":515,"address":[790457,790529],"length":1,"stats":{"Line":1},"fn_name":null},{"line":519,"address":[553253,553248],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":526,"address":[790637],"length":1,"stats":{"Line":1},"fn_name":null},{"line":528,"address":[790692,790844,791250],"length":1,"stats":{"Line":2},"fn_name":null},{"line":529,"address":[790794],"length":1,"stats":{"Line":1},"fn_name":null},{"line":530,"address":[790714],"length":1,"stats":{"Line":1},"fn_name":null},{"line":531,"address":[790722],"length":1,"stats":{"Line":1},"fn_name":null},{"line":532,"address":[790786],"length":1,"stats":{"Line":1},"fn_name":null},{"line":535,"address":[790883,790974],"length":1,"stats":{"Line":2},"fn_name":null},{"line":536,"address":[790905],"length":1,"stats":{"Line":1},"fn_name":null},{"line":539,"address":[791484,791562],"length":1,"stats":{"Line":1},"fn_name":null},{"line":543,"address":[553285,553280],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":544,"address":[791639],"length":1,"stats":{"Line":1},"fn_name":null},{"line":545,"address":[791661],"length":1,"stats":{"Line":1},"fn_name":null},{"line":546,"address":[791716,791754],"length":1,"stats":{"Line":2},"fn_name":null},{"line":547,"address":[791738],"length":1,"stats":{"Line":1},"fn_name":null},{"line":549,"address":[792116,792047],"length":1,"stats":{"Line":1},"fn_name":null},{"line":553,"address":[553312,553317],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":560,"address":[792221],"length":1,"stats":{"Line":1},"fn_name":null},{"line":561,"address":[793054,792428,792276],"length":1,"stats":{"Line":2},"fn_name":null},{"line":562,"address":[792378],"length":1,"stats":{"Line":1},"fn_name":null},{"line":563,"address":[792298],"length":1,"stats":{"Line":1},"fn_name":null},{"line":564,"address":[792306],"length":1,"stats":{"Line":1},"fn_name":null},{"line":565,"address":[792370],"length":1,"stats":{"Line":1},"fn_name":null},{"line":568,"address":[792619,792819,792467],"length":1,"stats":{"Line":2},"fn_name":null},{"line":569,"address":[792569],"length":1,"stats":{"Line":1},"fn_name":null},{"line":570,"address":[792489],"length":1,"stats":{"Line":1},"fn_name":null},{"line":571,"address":[792497],"length":1,"stats":{"Line":1},"fn_name":null},{"line":572,"address":[792561],"length":1,"stats":{"Line":1},"fn_name":null},{"line":575,"address":[792663],"length":1,"stats":{"Line":1},"fn_name":null},{"line":578,"address":[793354,793282],"length":1,"stats":{"Line":1},"fn_name":null},{"line":582,"address":[553344,553349],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":589,"address":[793453],"length":1,"stats":{"Line":1},"fn_name":null},{"line":590,"address":[793508,793660,794132],"length":1,"stats":{"Line":2},"fn_name":null},{"line":591,"address":[793610],"length":1,"stats":{"Line":1},"fn_name":null},{"line":592,"address":[793530],"length":1,"stats":{"Line":1},"fn_name":null},{"line":593,"address":[793538],"length":1,"stats":{"Line":1},"fn_name":null},{"line":594,"address":[793602],"length":1,"stats":{"Line":1},"fn_name":null},{"line":597,"address":[793699,793897,793851],"length":1,"stats":{"Line":2},"fn_name":null},{"line":598,"address":[793801],"length":1,"stats":{"Line":1},"fn_name":null},{"line":599,"address":[793721],"length":1,"stats":{"Line":1},"fn_name":null},{"line":600,"address":[793729],"length":1,"stats":{"Line":1},"fn_name":null},{"line":601,"address":[793793],"length":1,"stats":{"Line":1},"fn_name":null},{"line":604,"address":[793885],"length":1,"stats":{"Line":1},"fn_name":null},{"line":607,"address":[794366,794444],"length":1,"stats":{"Line":1},"fn_name":null},{"line":611,"address":[553381,553376],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":619,"address":[794541],"length":1,"stats":{"Line":1},"fn_name":null},{"line":620,"address":[795020,794599,794951,795457],"length":1,"stats":{"Line":2},"fn_name":null},{"line":621,"address":[794685],"length":1,"stats":{"Line":1},"fn_name":null},{"line":622,"address":[794621],"length":1,"stats":{"Line":1},"fn_name":null},{"line":624,"address":[794934,795102],"length":1,"stats":{"Line":2},"fn_name":null},{"line":625,"address":[794993,795062],"length":1,"stats":{"Line":2},"fn_name":null},{"line":628,"address":[795529,795607],"length":1,"stats":{"Line":1},"fn_name":null},{"line":632,"address":[553408,553413],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":640,"address":[796073,795738,797309],"length":1,"stats":{"Line":2},"fn_name":null},{"line":641,"address":[796425],"length":1,"stats":{"Line":1},"fn_name":null},{"line":642,"address":[796022,795779],"length":1,"stats":{"Line":2},"fn_name":null},{"line":643,"address":[796030,796134],"length":1,"stats":{"Line":2},"fn_name":null},{"line":644,"address":[796237],"length":1,"stats":{"Line":1},"fn_name":null},{"line":646,"address":[796765,797167,796551],"length":1,"stats":{"Line":3},"fn_name":null},{"line":647,"address":[796725,796633],"length":1,"stats":{"Line":2},"fn_name":null},{"line":649,"address":[797175],"length":1,"stats":{"Line":1},"fn_name":null},{"line":651,"address":[797604],"length":1,"stats":{"Line":1},"fn_name":null},{"line":652,"address":[797798,797683,797738],"length":1,"stats":{"Line":2},"fn_name":null},{"line":656,"address":[553445,553440],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":657,"address":[797911],"length":1,"stats":{"Line":1},"fn_name":null},{"line":658,"address":[797936],"length":1,"stats":{"Line":1},"fn_name":null},{"line":659,"address":[800625,798015,798349],"length":1,"stats":{"Line":2},"fn_name":null},{"line":660,"address":[798056,798298],"length":1,"stats":{"Line":2},"fn_name":null},{"line":661,"address":[798418],"length":1,"stats":{"Line":1},"fn_name":null},{"line":662,"address":[798306],"length":1,"stats":{"Line":1},"fn_name":null},{"line":663,"address":[798314],"length":1,"stats":{"Line":1},"fn_name":null},{"line":664,"address":[798410],"length":1,"stats":{"Line":1},"fn_name":null},{"line":667,"address":[800477,800233],"length":1,"stats":{"Line":2},"fn_name":null},{"line":668,"address":[798760,798518],"length":1,"stats":{"Line":2},"fn_name":null},{"line":669,"address":[798950],"length":1,"stats":{"Line":1},"fn_name":null},{"line":670,"address":[798768],"length":1,"stats":{"Line":1},"fn_name":null},{"line":671,"address":[798776],"length":1,"stats":{"Line":1},"fn_name":null},{"line":672,"address":[798942],"length":1,"stats":{"Line":1},"fn_name":null},{"line":675,"address":[799989],"length":1,"stats":{"Line":1},"fn_name":null},{"line":676,"address":[799050,799292],"length":1,"stats":{"Line":2},"fn_name":null},{"line":677,"address":[799444],"length":1,"stats":{"Line":1},"fn_name":null},{"line":678,"address":[799300],"length":1,"stats":{"Line":1},"fn_name":null},{"line":679,"address":[799308],"length":1,"stats":{"Line":1},"fn_name":null},{"line":680,"address":[799436],"length":1,"stats":{"Line":1},"fn_name":null},{"line":683,"address":[799544,799768],"length":1,"stats":{"Line":2},"fn_name":null},{"line":689,"address":[800968,801046],"length":1,"stats":{"Line":1},"fn_name":null},{"line":693,"address":[553472,553477],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":694,"address":[801127],"length":1,"stats":{"Line":1},"fn_name":null},{"line":695,"address":[801152],"length":1,"stats":{"Line":1},"fn_name":null},{"line":696,"address":[801231,801386,801607],"length":1,"stats":{"Line":2},"fn_name":null},{"line":697,"address":[801328,801253],"length":1,"stats":{"Line":2},"fn_name":null},{"line":698,"address":[801425],"length":1,"stats":{"Line":1},"fn_name":null},{"line":700,"address":[801988,802078],"length":1,"stats":{"Line":1},"fn_name":null},{"line":702,"address":[802051],"length":1,"stats":{"Line":1},"fn_name":null},{"line":703,"address":[802110],"length":1,"stats":{"Line":1},"fn_name":null},{"line":704,"address":[802541,802330,802175],"length":1,"stats":{"Line":2},"fn_name":null},{"line":705,"address":[802197,802272],"length":1,"stats":{"Line":2},"fn_name":null},{"line":706,"address":[802359],"length":1,"stats":{"Line":1},"fn_name":null},{"line":708,"address":[803000,802922],"length":1,"stats":{"Line":1},"fn_name":null},{"line":712,"address":[553509,553504],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":722,"address":[805218,803497,803162],"length":1,"stats":{"Line":2},"fn_name":null},{"line":723,"address":[803855],"length":1,"stats":{"Line":1},"fn_name":null},{"line":724,"address":[803203,803446],"length":1,"stats":{"Line":2},"fn_name":null},{"line":725,"address":[803454,803558],"length":1,"stats":{"Line":2},"fn_name":null},{"line":726,"address":[803661],"length":1,"stats":{"Line":1},"fn_name":null},{"line":728,"address":[804609,804207,803981],"length":1,"stats":{"Line":3},"fn_name":null},{"line":729,"address":[804075,804167],"length":1,"stats":{"Line":2},"fn_name":null},{"line":731,"address":[804781,804627],"length":1,"stats":{"Line":2},"fn_name":null},{"line":732,"address":[804741,804649],"length":1,"stats":{"Line":2},"fn_name":null},{"line":735,"address":[805453],"length":1,"stats":{"Line":1},"fn_name":null},{"line":736,"address":[805647,805587,805532],"length":1,"stats":{"Line":2},"fn_name":null},{"line":740,"address":[553541,553536],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":748,"address":[805776],"length":1,"stats":{"Line":1},"fn_name":null},{"line":749,"address":[806512,810102,805855,806002,806859],"length":1,"stats":{"Line":2},"fn_name":null},{"line":750,"address":[806289],"length":1,"stats":{"Line":1},"fn_name":null},{"line":751,"address":[806039],"length":1,"stats":{"Line":1},"fn_name":null},{"line":753,"address":[805967],"length":1,"stats":{"Line":1},"fn_name":null},{"line":754,"address":[806031],"length":1,"stats":{"Line":1},"fn_name":null},{"line":757,"address":[806133],"length":1,"stats":{"Line":1},"fn_name":null},{"line":759,"address":[809956],"length":1,"stats":{"Line":1},"fn_name":null},{"line":760,"address":[807332],"length":1,"stats":{"Line":1},"fn_name":null},{"line":761,"address":[806939,806552],"length":1,"stats":{"Line":2},"fn_name":null},{"line":763,"address":[806477],"length":1,"stats":{"Line":1},"fn_name":null},{"line":764,"address":[806544],"length":1,"stats":{"Line":1},"fn_name":null},{"line":767,"address":[806990],"length":1,"stats":{"Line":1},"fn_name":null},{"line":768,"address":[806947],"length":1,"stats":{"Line":1},"fn_name":null},{"line":769,"address":[806955],"length":1,"stats":{"Line":1},"fn_name":null},{"line":770,"address":[806982],"length":1,"stats":{"Line":1},"fn_name":null},{"line":773,"address":[807090],"length":1,"stats":{"Line":1},"fn_name":null},{"line":775,"address":[808335,807458,809711,807709],"length":1,"stats":{"Line":2},"fn_name":null},{"line":776,"address":[807571,807757],"length":1,"stats":{"Line":2},"fn_name":null},{"line":778,"address":[807674],"length":1,"stats":{"Line":1},"fn_name":null},{"line":779,"address":[807749],"length":1,"stats":{"Line":1},"fn_name":null},{"line":782,"address":[809473],"length":1,"stats":{"Line":1},"fn_name":null},{"line":783,"address":[808218],"length":1,"stats":{"Line":1},"fn_name":null},{"line":784,"address":[808175],"length":1,"stats":{"Line":1},"fn_name":null},{"line":785,"address":[808183],"length":1,"stats":{"Line":1},"fn_name":null},{"line":786,"address":[808210],"length":1,"stats":{"Line":1},"fn_name":null},{"line":789,"address":[809165],"length":1,"stats":{"Line":1},"fn_name":null},{"line":790,"address":[808383,808790],"length":1,"stats":{"Line":2},"fn_name":null},{"line":792,"address":[808308],"length":1,"stats":{"Line":1},"fn_name":null},{"line":793,"address":[808375],"length":1,"stats":{"Line":1},"fn_name":null},{"line":796,"address":[808841],"length":1,"stats":{"Line":1},"fn_name":null},{"line":797,"address":[808798],"length":1,"stats":{"Line":1},"fn_name":null},{"line":798,"address":[808806],"length":1,"stats":{"Line":1},"fn_name":null},{"line":799,"address":[808833],"length":1,"stats":{"Line":1},"fn_name":null},{"line":802,"address":[808941],"length":1,"stats":{"Line":1},"fn_name":null},{"line":808,"address":[810330,810408],"length":1,"stats":{"Line":1},"fn_name":null},{"line":812,"address":[553568,553573],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":821,"address":[810512],"length":1,"stats":{"Line":1},"fn_name":null},{"line":822,"address":[814225,810591,811206,811553],"length":1,"stats":{"Line":2},"fn_name":null},{"line":823,"address":[810941],"length":1,"stats":{"Line":1},"fn_name":null},{"line":824,"address":[810697],"length":1,"stats":{"Line":1},"fn_name":null},{"line":826,"address":[810622],"length":1,"stats":{"Line":1},"fn_name":null},{"line":827,"address":[810689],"length":1,"stats":{"Line":1},"fn_name":null},{"line":830,"address":[810781],"length":1,"stats":{"Line":1},"fn_name":null},{"line":832,"address":[814031],"length":1,"stats":{"Line":1},"fn_name":null},{"line":833,"address":[812026],"length":1,"stats":{"Line":1},"fn_name":null},{"line":834,"address":[811246,811633],"length":1,"stats":{"Line":2},"fn_name":null},{"line":836,"address":[811171],"length":1,"stats":{"Line":1},"fn_name":null},{"line":837,"address":[811238],"length":1,"stats":{"Line":1},"fn_name":null},{"line":840,"address":[811684],"length":1,"stats":{"Line":1},"fn_name":null},{"line":841,"address":[811641],"length":1,"stats":{"Line":1},"fn_name":null},{"line":842,"address":[811649],"length":1,"stats":{"Line":1},"fn_name":null},{"line":843,"address":[811676],"length":1,"stats":{"Line":1},"fn_name":null},{"line":846,"address":[811784],"length":1,"stats":{"Line":1},"fn_name":null},{"line":848,"address":[813601,812495,812152],"length":1,"stats":{"Line":2},"fn_name":null},{"line":849,"address":[812370],"length":1,"stats":{"Line":1},"fn_name":null},{"line":850,"address":[812255],"length":1,"stats":{"Line":1},"fn_name":null},{"line":851,"address":[812263],"length":1,"stats":{"Line":1},"fn_name":null},{"line":852,"address":[812362],"length":1,"stats":{"Line":1},"fn_name":null},{"line":855,"address":[813293],"length":1,"stats":{"Line":1},"fn_name":null},{"line":856,"address":[812535,812918],"length":1,"stats":{"Line":2},"fn_name":null},{"line":858,"address":[812460],"length":1,"stats":{"Line":1},"fn_name":null},{"line":859,"address":[812527],"length":1,"stats":{"Line":1},"fn_name":null},{"line":862,"address":[812969],"length":1,"stats":{"Line":1},"fn_name":null},{"line":863,"address":[812926],"length":1,"stats":{"Line":1},"fn_name":null},{"line":864,"address":[812934],"length":1,"stats":{"Line":1},"fn_name":null},{"line":865,"address":[812961],"length":1,"stats":{"Line":1},"fn_name":null},{"line":868,"address":[813069],"length":1,"stats":{"Line":1},"fn_name":null},{"line":873,"address":[814384,814306],"length":1,"stats":{"Line":1},"fn_name":null},{"line":877,"address":[553605,553600],"length":1,"stats":{"Line":3},"fn_name":"{closure#0}"},{"line":878,"address":[814471],"length":1,"stats":{"Line":1},"fn_name":null},{"line":879,"address":[814496],"length":1,"stats":{"Line":1},"fn_name":null},{"line":880,"address":[814575,814899,815239],"length":1,"stats":{"Line":2},"fn_name":null},{"line":881,"address":[814848,814606],"length":1,"stats":{"Line":2},"fn_name":null},{"line":882,"address":[814856,814960],"length":1,"stats":{"Line":2},"fn_name":null},{"line":883,"address":[815053],"length":1,"stats":{"Line":1},"fn_name":null},{"line":885,"address":[815744,815654],"length":1,"stats":{"Line":1},"fn_name":null},{"line":887,"address":[815717],"length":1,"stats":{"Line":1},"fn_name":null},{"line":888,"address":[815776],"length":1,"stats":{"Line":1},"fn_name":null},{"line":890,"address":[815841,816448,816135],"length":1,"stats":{"Line":2},"fn_name":null},{"line":891,"address":[815863,816087],"length":1,"stats":{"Line":2},"fn_name":null},{"line":892,"address":[816095,816184],"length":1,"stats":{"Line":2},"fn_name":null},{"line":893,"address":[816274],"length":1,"stats":{"Line":1},"fn_name":null},{"line":895,"address":[816845,816923],"length":1,"stats":{"Line":1},"fn_name":null},{"line":898,"address":[788832],"length":1,"stats":{"Line":1},"fn_name":"process"},{"line":899,"address":[788845],"length":1,"stats":{"Line":1},"fn_name":null},{"line":900,"address":[788890],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":421,"coverable":432},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","scanner.rs"],"content":"use std::collections::HashMap;\n\nuse substring::Substring;\n\nuse lazy_static::*;\n\nuse crate::literals::Literal;\nuse crate::token::Token;\nuse crate::tokentype::TokenType;\n\n/// Given raw source code, this struct provides tools to lex/tokenize it.\npub struct Scanner {\n    /// Input raw source code\n    src: String,\n    /// List of tokens that have been lexed so far.\n    tokens: Vec\u003cToken\u003e,\n    /// Starting position of the current token\n    start: usize,\n    /// Index of the current character under the cursor.\n    current: usize,\n    /// Line counter for better error reporting.\n    line: usize,\n}\n\n/// Represent error conditions in the lexer.\nenum ScanError {\n    UknownCharacter((usize, char)),\n    UnterminatedBlockComment(usize),\n    UnterminatedString(usize),\n    NumParseError((usize, String)),\n}\n\nlazy_static! {\n    /// This is a list of all reserved keywords in daemonica.\n    ///\n    /// We use lazy-static so we only need to initialize this once, and then we\n    /// can access it throughout the code base as a safe global.\n    static ref KEYWORDS: HashMap\u003cString, TokenType\u003e = {\n        let mut m = HashMap::new();\n        m.insert(\"et\".to_string(), TokenType::And);\n        m.insert(\"vel\".to_string(), TokenType::Or);\n        m.insert(\"si\".to_string(), TokenType::If);\n        m.insert(\"aliter\".to_string(), TokenType::Else);\n        m.insert(\"verum\".to_string(), TokenType::True);\n        m.insert(\"mendacium\".to_string(), TokenType::False);\n        m.insert(\"incantatio\".to_string(), TokenType::Fn);\n        m.insert(\"beneficium\".to_string(), TokenType::Return);\n        m.insert(\"enim\".to_string(), TokenType::For);\n        m.insert(\"dum\".to_string(), TokenType::While);\n        m.insert(\"nihil\".to_string(), TokenType::None);\n        m.insert(\"anima\".to_string(), TokenType::Self_);\n        m.insert(\"ligamen\".to_string(), TokenType::Var);\n        m.insert(\"daemonium\".to_string(), TokenType::Class);\n        m.insert(\"cognatio\".to_string(), TokenType::Super);\n        m.insert(\"invocabo\".to_string(), TokenType::Call);\n        m.insert(\"scribo\".to_string(), TokenType::Print);\n        return m;\n    };\n}\n\nimpl Scanner {\n    /// Given some source, produce a new Scanner instance.\n    pub fn new(src: String) -\u003e Scanner {\n        Scanner {\n            src,\n            tokens: Vec::new(),\n            start: 0,\n            current: 0,\n            line: 1,\n        }\n    }\n\n    /// Convinience function. Provides a way to just do execution without needing\n    /// a sepperate instantiation of the lexer.\n    pub fn scan(src: String) -\u003e Vec\u003cToken\u003e {\n        let mut s = self::Scanner::new(src);\n        s.scan_tokens()\n    }\n\n    /// Main loop. This contains the flow control for the lexing process.\n    ///\n    /// Continue lexing until we either hit EOF, or until we encounter some error.\n    pub fn scan_tokens(\u0026mut self) -\u003e Vec\u003cToken\u003e {\n        // This allows us for some flow control wherein if we do find an invalid\n        // section, then we keep on going until we reach the end, and only THEN\n        // panic. This lets us catch all the lexing errors at once.\n        let mut had_error: bool = false;\n        while !self.at_end() {\n            self.start = self.current;\n            // Scan a token and add it to the vec of tokens\n            match self.scan_token() {\n                // If no errors keep on going\n                Ok(_) =\u003e {}\n                // Error reporting\n                Err(x) =\u003e match x {\n                    ScanError::UknownCharacter(x) =\u003e {\n                        eprintln!(\"Scanned invald token {} on line {}\", x.1, x.0);\n                        had_error = true;\n                    }\n                    ScanError::UnterminatedBlockComment(x) =\u003e {\n                        eprintln!(\n                            \"Lexer encountered unterminated block comment ('/* */') at line {}\",\n                            x\n                        );\n                        had_error = true;\n                    }\n                    ScanError::UnterminatedString(x) =\u003e {\n                        eprintln!(\"Lexer encountered unterminated String at line {}\", x);\n                        had_error = true;\n                    }\n                    ScanError::NumParseError(x) =\u003e {\n                        eprintln!(\"Lexer encountered invalid number {} at line {}\", x.1, x.0);\n                        had_error = true;\n                    }\n                },\n            }\n        }\n        // Push our EOF token when we break the loop.\n        self.tokens.push(Token::new(\n            TokenType::EOF,\n            \"\".to_string(),\n            Literal::Empty,\n            self.line,\n        ));\n        // if we produced an error, we need to report it, as well as terminate.\n        // panic does both.\n        match had_error {\n            true =\u003e {\n                panic!(\"Invalid tokens. Terminating.\");\n            }\n            false =\u003e {\n                return self.tokens.clone();\n            }\n        }\n    }\n\n    /// Lex tokens. Implemented as a big match statement.\n    ///\n    /// If we see known tokens, we add them to the list of tokens we have lexed.\n    /// For certain values such as \\\"\\\" which represent strings or for numeric values\n    /// we branch out to helper functions to lex them.\n    ///\n    /// Most of the time this lexer operates as 1 lookahead, in order to match\n    /// 2-char long statements such as != and ==.\n    ///\n    /// Join the One Big ~~Union~~ Match Statement.\n    fn scan_token(\u0026mut self) -\u003e Result\u003c(), ScanError\u003e {\n        let c: char = self.next();\n        match c {\n            '(' =\u003e {\n                self.add_token(TokenType::LeftParen);\n            }\n            ')' =\u003e {\n                self.add_token(TokenType::RightParen);\n            }\n            '{' =\u003e {\n                self.add_token(TokenType::LeftBrace);\n            }\n            '}' =\u003e {\n                self.add_token(TokenType::RightBrace);\n            }\n            ';' =\u003e {\n                self.add_token(TokenType::Semicolon);\n            }\n            ',' =\u003e {\n                self.add_token(TokenType::Comma);\n            }\n            '.' =\u003e {\n                self.add_token(TokenType::Dot);\n            }\n            '*' =\u003e {\n                self.add_token(TokenType::Star);\n            }\n            '-' =\u003e {\n                self.add_token(TokenType::Minus);\n            }\n            '+' =\u003e {\n                self.add_token(TokenType::Plus);\n            }\n            // We need lookahead on these, so we look 1c ahead for thse pesky\n            // compoud operations.\n            '!' =\u003e {\n                if self.match_next('=') {\n                    self.add_token(TokenType::BangEqual)\n                } else {\n                    self.add_token(TokenType::Bang)\n                }\n            }\n            '=' =\u003e {\n                if self.match_next('=') {\n                    self.add_token(TokenType::EqualEqual);\n                } else {\n                    self.add_token(TokenType::Equal);\n                }\n            }\n            '\u003e' =\u003e {\n                if self.match_next('=') {\n                    self.add_token(TokenType::GreaterEqual);\n                } else {\n                    self.add_token(TokenType::Greater);\n                }\n            }\n            '\u003c' =\u003e {\n                if self.match_next('=') {\n                    self.add_token(TokenType::LessEqual);\n                } else {\n                    self.add_token(TokenType::Less);\n                }\n            }\n            '/' =\u003e {\n                // Check for divide or line comment\n                if self.match_next('/') {\n                    while self.peek() != '\\n' \u0026\u0026 !self.at_end() {\n                        self.next();\n                    }\n                }\n                // Check for block comment\n                else if self.match_next('*') {\n                    while self.peek() != '*' \u0026\u0026 self.peek_n(2) != '/' {\n                        self.next();\n                        // if the next token is \\n then we need to increment\n                        // the line counter for error reporting\n                        if self.peek() == '\\n' {\n                            self.line += 1;\n                        }\n                        // Error out if the user forgot to terminate their block\n                        // comment\n                        if self.at_end() {\n                            return Err(ScanError::UnterminatedBlockComment(self.line));\n                        }\n                    }\n                    self.next();\n                    self.next();\n                    self.next();\n                } else {\n                    self.add_token(TokenType::Slash);\n                }\n            }\n            '\"' =\u003e {\n                self.lex_string()?;\n            }\n            '0' | '1' | '2' | '3' | '4' | '5' | '6' | '7' | '8' | '9' =\u003e {\n                self.lex_number()?;\n            }\n\n            ' ' =\u003e {}\n            '\\r' =\u003e {}\n            '\\t' =\u003e {}\n            '\\n' =\u003e self.line += 1,\n            _ =\u003e {\n                // Base case, anything else that falls through here is treated\n                // as an identifier.\n                if c.is_ascii_alphanumeric() {\n                    self.lex_identifier();\n                } else {\n                    return Err(ScanError::UknownCharacter((self.line, c)));\n                }\n            }\n        }\n        Ok(())\n    }\n\n    /// Keep peeking until our next token is a closing \", adding each char to a string.\n    /// If the \"\" is unterminated, we report an error. Otherwise we return\n    /// the lexed string.\n    fn lex_string(\u0026mut self) -\u003e Result\u003c(), ScanError\u003e {\n        while self.peek() != '\"' \u0026\u0026 self.at_end() == false {\n            if self.peek() == '\\n' {\n                self.line += 1;\n            }\n\n            self.next();\n        }\n\n        if self.at_end() {\n            return Err(ScanError::UnterminatedString(self.line));\n        }\n\n        // Consume the closing \"\n        self.next();\n\n        // Slice off the \"\"\n        let text = self\n            .src\n            .substring(self.start + 1, self.current - 1)\n            .to_string();\n        self.add_token_with_literal(TokenType::String, Literal::StrLit(text.clone()));\n\n        Ok(())\n    }\n\n    /// Simmialr to our string function, keep peeking while we have numeric parts.\n    ///\n    /// We need some special handling since we allow floats. As such we look 2-ahead\n    /// after we break out of our first loop. If we have a number after it, we know that\n    /// everything after is the fractional part.\n    /// Another annoying edge case where we need to be 2-lookahead.\n    fn lex_number(\u0026mut self) -\u003e Result\u003c(), ScanError\u003e {\n        while self.peek().is_numeric() {\n            self.next();\n        }\n\n        // Do we have a decimal point?\n        if self.peek() == '.' \u0026\u0026 self.peek_n(1).is_numeric() {\n            // Consume the .\n            self.next();\n            while self.peek().is_numeric() {\n                self.next();\n            }\n        }\n\n        let text = self.src.substring(self.start, self.current);\n\n        match text.parse::\u003cf64\u003e() {\n            Ok(x) =\u003e {\n                self.add_token_with_literal(TokenType::Number, Literal::Number(x));\n                Ok(())\n            }\n            Err(v) =\u003e {\n                eprintln!(\"{}\", v);\n                return Err(ScanError::NumParseError((self.line, text.to_string())));\n            }\n        }\n    }\n\n    /// Lexes identifiers for fns/vars/keywords etc.\n    ///\n    /// If we get a keyword we grab it's raw value from our keywords list\n    /// if we dont, then we just put the lexed value as a Identifier token.\n    fn lex_identifier(\u0026mut self) {\n        while self.peek().is_ascii_alphanumeric() {\n            self.next();\n        }\n\n        let text = self.src.substring(self.start, self.current).to_string();\n        match KEYWORDS.deref().get(\u0026text) {\n            Some(x) =\u003e {\n                self.add_token(x.clone());\n            }\n            None =\u003e {\n                self.add_token(TokenType::Identifier);\n            }\n        }\n    }\n\n    /// Look current+n ahead, without consuming the token.\n    fn peek_n(\u0026self, n: usize) -\u003e char {\n        if self.at_end() || self.current + n \u003e= self.src.len() {\n            return '\\0';\n        } else {\n            return self.src.chars().nth(self.current + n).unwrap();\n        }\n    }\n\n    /// Lookahead 1-char without peeking.\n    fn peek(\u0026self) -\u003e char {\n        if self.at_end() {\n            return '\\0';\n        } else {\n            return self.src.chars().nth(self.current).unwrap();\n        }\n    }\n\n    // Probably wont need this, but having n char lookahead for debugging\n    // can be pretty useful.\n    /// Used for debugging. Allows for n-lookahead lexing. Not designed for\n    /// actual consumption but is good for fixing bugs.\n    fn match_n_ahead(\u0026mut self, expect: char, n: usize) -\u003e bool {\n        if self.at_end() || self.current + n \u003e= self.src.len() {\n            return false;\n        }\n\n        if self.src.chars().nth(self.current + n).unwrap() != expect {\n            return false;\n        }\n\n        self.current += n;\n        return true;\n    }\n\n    /// Predicate function. If expect is the next char true, else false.\n    fn match_next(\u0026mut self, expect: char) -\u003e bool {\n        if self.at_end() {\n            return false;\n        }\n\n        if self.src.chars().nth(self.current).unwrap() != expect {\n            return false;\n        }\n\n        self.current += 1;\n        return true;\n    }\n\n    /// Add a processed token to our token vec\n    /// we grab the text of the current lexeme, and create a token for it.\n    fn add_token(\u0026mut self, ttype: TokenType) {\n        let text = self.src.substring(self.start, self.current).to_string();\n        self.tokens\n            .push(Token::new(ttype, text, Literal::Empty, self.line))\n    }\n\n    /// Add a procesesd token, that has a literal value to our vec.\n    fn add_token_with_literal(\u0026mut self, ttype: TokenType, lit: Literal) {\n        let text = self.src.substring(self.start, self.current).to_string();\n        self.tokens.push(Token::new(ttype, text, lit, self.line))\n    }\n\n    /// Consume the next character in the source file and return it.\n    fn next(\u0026mut self) -\u003e char {\n        let rv = self.src.chars().nth(self.current).unwrap();\n        self.current += 1;\n        rv\n    }\n\n    fn at_end(\u0026self) -\u003e bool {\n        self.current \u003e= self.src.len()\n    }\n}\n\n#[cfg(test)]\nmod tests {\n    use crate::scanner::*;\n    use crate::token::*;\n    #[test]\n    fn number_literal() {\n        let test: String = \"5;\".to_string();\n        let mut s: Scanner = Scanner::new(test);\n        let tokens = s.scan_tokens();\n        let five = Token::new(TokenType::Number, \"5\".to_string(), Literal::Number(5.0), 1);\n        let semicolon = Token::new(TokenType::Semicolon, \";\".to_string(), Literal::Empty, 1);\n        let eof = Token::new(TokenType::EOF, \"\".to_string(), Literal::Empty, 1);\n        let expected = vec![five, semicolon, eof];\n        assert!(expected == tokens);\n    }\n\n    #[test]\n    fn parenthesized_exprs() {\n        let test: String = \"5 + (3 * (8));\".to_string();\n        let expected = vec![\n            Token::new(TokenType::Number, \"5\".to_string(), Literal::Number(5.0), 1),\n            Token::new(TokenType::Plus, \"+\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::LeftParen, \"(\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::Number, \"3\".to_string(), Literal::Number(3.0), 1),\n            Token::new(TokenType::Star, \"*\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::LeftParen, \"(\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::Number, \"8\".to_string(), Literal::Number(8.0), 1),\n            Token::new(TokenType::RightParen, \")\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::RightParen, \")\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::Semicolon, \";\".to_string(), Literal::Empty, 1),\n            Token::new(TokenType::EOF, \"\".to_string(), Literal::Empty, 1),\n        ];\n        let mut s: Scanner = Scanner::new(test);\n        let tokens = s.scan_tokens();\n        assert!(expected == tokens);\n    }\n\n    #[test]\n    fn and_test() {\n        let test: String = \"et;\".to_string();\n        let expected = vec![\n            Token::new(TokenType::And, \"et\".to_string(), Literal::Empty, 1),\n            get_semicolon(1),\n            get_eof(1),\n        ];\n        let mut s: Scanner = Scanner::new(test);\n        let tokens = s.scan_tokens();\n        assert!(expected == tokens);\n    }\n\n    #[test]\n    fn maximal_munch() {\n        let velocity: String = \"velocity;\".to_string();\n        let expected = vec![\n            Token::new(\n                TokenType::Identifier,\n                \"velocity\".to_string(),\n                Literal::Empty,\n                1,\n            ),\n            get_semicolon(1),\n            get_eof(1),\n        ];\n        let mut s: Scanner = Scanner::new(velocity);\n        let tokens = s.scan_tokens();\n        assert!(expected == tokens);\n    }\n\n    #[test]\n    fn scan_direct() {\n        let test = String::from(\"ligamen a = 5;\");\n        let results = crate::scanner::Scanner::scan(test);\n        let expected = vec![\n            Token {\n                ttype: TokenType::Var,\n                lexeme: \"ligamen\".to_string(),\n                literal: Literal::Empty,\n                line: 1,\n            },\n            Token {\n                ttype: TokenType::Identifier,\n                lexeme: \"a\".to_string(),\n                literal: Literal::Empty,\n                line: 1,\n            },\n            Token {\n                ttype: TokenType::Equal,\n                lexeme: \"=\".to_string(),\n                literal: Literal::Empty,\n                line: 1,\n            },\n            Token {\n                ttype: TokenType::Number,\n                lexeme: \"5\".to_string(),\n                literal: Literal::Number(5.0),\n                line: 1,\n            },\n            get_semicolon(1),\n            get_eof(1),\n        ];\n        assert!(expected == results);\n    }\n\n    #[test]\n    fn comments() {\n        let linecomment = String::from(\"// This is a line comment.\");\n        let expected = vec![get_eof(1)];\n        let res = crate::scanner::Scanner::scan(linecomment);\n        assert!(res == expected);\n        let expected = vec![get_eof(2)];\n        let blockcomment = String::from(\"/*Block comments\\nCan Span multiple lines.*/\");\n        let res = crate::scanner::Scanner::scan(blockcomment);\n        assert!(res == expected);\n    }\n\n    #[test]\n    fn non_fractional_num() {\n        let test = String::from(\"3.0;\");\n        let result = crate::scanner::Scanner::scan(test);\n        let expected = vec![\n            Token::new(\n                TokenType::Number,\n                String::from(\"3.0\"),\n                Literal::Number(3.0),\n                1,\n            ),\n            get_semicolon(1),\n            get_eof(1),\n        ];\n        assert!(result == expected);\n    }\n\n    #[test]\n    fn fractional_numbers() {\n        let test = String::from(\"3.14159;\");\n        let result = crate::scanner::Scanner::scan(test);\n        let expected = [\n            vec![Token::new(\n                TokenType::Number,\n                String::from(\"3.14159\"),\n                Literal::Number(3.14159),\n                1,\n            )],\n            get_end(1),\n        ]\n        .concat();\n        assert!(result == expected);\n    }\n\n    #[test]\n    #[should_panic]\n    /// We only support ASCII-alphanumeric because whilst it's acceptable in rust\n    /// having to discriminate between identifiers and such is kind of a mess.\n    /// This is also what most people expect, for better or for worse.\n    fn scan_invalid_chars() {\n        let test = String::from(\"\");\n        crate::scanner::Scanner::scan(test);\n    }\n\n    #[test]\n    #[should_panic]\n    fn unterminated_string() {\n        let test = String::from(\"\\\"This is not terminated.\");\n        crate::scanner::Scanner::scan(test);\n    }\n\n    #[test]\n    #[should_panic]\n    fn unterminated_block_comment() {\n        let test = String::from(\"/*ligamen a = \\\"test\\\";\");\n        crate::scanner::Scanner::scan(test);\n    }\n\n    fn get_end(line: usize) -\u003e Vec\u003cToken\u003e {\n        vec![get_semicolon(line), get_eof(line)]\n    }\n\n    fn get_eof(line: usize) -\u003e Token {\n        Token::new(TokenType::EOF, \"\".to_string(), Literal::Empty, line)\n    }\n\n    fn get_semicolon(line: usize) -\u003e Token {\n        Token {\n            ttype: TokenType::Semicolon,\n            lexeme: \";\".to_string(),\n            literal: Literal::Empty,\n            line,\n        }\n    }\n}\n","traces":[{"line":39,"address":[821044],"length":1,"stats":{"Line":1},"fn_name":null},{"line":40,"address":[821049],"length":1,"stats":{"Line":1},"fn_name":null},{"line":41,"address":[821145],"length":1,"stats":{"Line":1},"fn_name":null},{"line":42,"address":[821196],"length":1,"stats":{"Line":1},"fn_name":null},{"line":43,"address":[821253],"length":1,"stats":{"Line":1},"fn_name":null},{"line":44,"address":[821316],"length":1,"stats":{"Line":1},"fn_name":null},{"line":45,"address":[821379],"length":1,"stats":{"Line":1},"fn_name":null},{"line":46,"address":[821442],"length":1,"stats":{"Line":1},"fn_name":null},{"line":47,"address":[821505],"length":1,"stats":{"Line":1},"fn_name":null},{"line":48,"address":[821568],"length":1,"stats":{"Line":1},"fn_name":null},{"line":49,"address":[821631],"length":1,"stats":{"Line":1},"fn_name":null},{"line":50,"address":[821694],"length":1,"stats":{"Line":1},"fn_name":null},{"line":51,"address":[821757],"length":1,"stats":{"Line":1},"fn_name":null},{"line":52,"address":[821820],"length":1,"stats":{"Line":1},"fn_name":null},{"line":53,"address":[821883],"length":1,"stats":{"Line":1},"fn_name":null},{"line":54,"address":[821946],"length":1,"stats":{"Line":1},"fn_name":null},{"line":55,"address":[822009],"length":1,"stats":{"Line":1},"fn_name":null},{"line":56,"address":[822072],"length":1,"stats":{"Line":1},"fn_name":null},{"line":63,"address":[557106,556944],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":66,"address":[556979],"length":1,"stats":{"Line":1},"fn_name":null},{"line":75,"address":[557120,557238],"length":1,"stats":{"Line":2},"fn_name":"scan"},{"line":76,"address":[557137],"length":1,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[557188],"length":1,"stats":{"Line":1},"fn_name":null},{"line":83,"address":[558191,557264],"length":1,"stats":{"Line":1},"fn_name":"scan_tokens"},{"line":87,"address":[557303],"length":1,"stats":{"Line":1},"fn_name":null},{"line":88,"address":[557456,557319],"length":1,"stats":{"Line":2},"fn_name":null},{"line":89,"address":[557409],"length":1,"stats":{"Line":1},"fn_name":null},{"line":91,"address":[557417],"length":1,"stats":{"Line":1},"fn_name":null},{"line":95,"address":[557461],"length":1,"stats":{"Line":1},"fn_name":null},{"line":96,"address":[557551],"length":1,"stats":{"Line":1},"fn_name":null},{"line":97,"address":[558397,557581],"length":1,"stats":{"Line":2},"fn_name":null},{"line":98,"address":[558523],"length":1,"stats":{"Line":1},"fn_name":null},{"line":100,"address":[557682],"length":1,"stats":{"Line":1},"fn_name":null},{"line":101,"address":[558310,557698],"length":1,"stats":{"Line":2},"fn_name":null},{"line":105,"address":[558379],"length":1,"stats":{"Line":1},"fn_name":null},{"line":107,"address":[557758],"length":1,"stats":{"Line":1},"fn_name":null},{"line":108,"address":[558221,557774],"length":1,"stats":{"Line":2},"fn_name":null},{"line":109,"address":[558290],"length":1,"stats":{"Line":1},"fn_name":null},{"line":111,"address":[557834],"length":1,"stats":{"Line":0},"fn_name":null},{"line":112,"address":[557866,558076],"length":1,"stats":{"Line":0},"fn_name":null},{"line":113,"address":[558168],"length":1,"stats":{"Line":0},"fn_name":null},{"line":119,"address":[557352,558556],"length":1,"stats":{"Line":2},"fn_name":null},{"line":120,"address":[557364],"length":1,"stats":{"Line":1},"fn_name":null},{"line":121,"address":[557372],"length":1,"stats":{"Line":1},"fn_name":null},{"line":122,"address":[558544],"length":1,"stats":{"Line":1},"fn_name":null},{"line":123,"address":[558552],"length":1,"stats":{"Line":1},"fn_name":null},{"line":127,"address":[558614],"length":1,"stats":{"Line":1},"fn_name":null},{"line":129,"address":[558651],"length":1,"stats":{"Line":1},"fn_name":null},{"line":132,"address":[558640],"length":1,"stats":{"Line":1},"fn_name":null},{"line":147,"address":[558736],"length":1,"stats":{"Line":1},"fn_name":"scan_token"},{"line":148,"address":[558774],"length":1,"stats":{"Line":1},"fn_name":null},{"line":149,"address":[558783],"length":1,"stats":{"Line":1},"fn_name":null},{"line":151,"address":[558847],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[558872],"length":1,"stats":{"Line":1},"fn_name":null},{"line":157,"address":[558897],"length":1,"stats":{"Line":1},"fn_name":null},{"line":160,"address":[558922],"length":1,"stats":{"Line":1},"fn_name":null},{"line":163,"address":[558947],"length":1,"stats":{"Line":1},"fn_name":null},{"line":166,"address":[558972],"length":1,"stats":{"Line":0},"fn_name":null},{"line":169,"address":[558997],"length":1,"stats":{"Line":0},"fn_name":null},{"line":172,"address":[559022],"length":1,"stats":{"Line":1},"fn_name":null},{"line":175,"address":[559047],"length":1,"stats":{"Line":1},"fn_name":null},{"line":178,"address":[559072],"length":1,"stats":{"Line":1},"fn_name":null},{"line":183,"address":[560378,559097],"length":1,"stats":{"Line":2},"fn_name":null},{"line":184,"address":[560414],"length":1,"stats":{"Line":1},"fn_name":null},{"line":186,"address":[560389],"length":1,"stats":{"Line":1},"fn_name":null},{"line":190,"address":[560318,559121],"length":1,"stats":{"Line":2},"fn_name":null},{"line":191,"address":[560354],"length":1,"stats":{"Line":1},"fn_name":null},{"line":193,"address":[560329],"length":1,"stats":{"Line":1},"fn_name":null},{"line":197,"address":[559145,560258],"length":1,"stats":{"Line":2},"fn_name":null},{"line":198,"address":[560294],"length":1,"stats":{"Line":1},"fn_name":null},{"line":200,"address":[560269],"length":1,"stats":{"Line":1},"fn_name":null},{"line":204,"address":[559169,560198],"length":1,"stats":{"Line":2},"fn_name":null},{"line":205,"address":[560234],"length":1,"stats":{"Line":1},"fn_name":null},{"line":207,"address":[560209],"length":1,"stats":{"Line":1},"fn_name":null},{"line":212,"address":[559749,559193],"length":1,"stats":{"Line":2},"fn_name":null},{"line":213,"address":[559781],"length":1,"stats":{"Line":1},"fn_name":null},{"line":214,"address":[559848],"length":1,"stats":{"Line":1},"fn_name":null},{"line":218,"address":[559859,559760],"length":1,"stats":{"Line":2},"fn_name":null},{"line":219,"address":[559901],"length":1,"stats":{"Line":1},"fn_name":null},{"line":220,"address":[559988],"length":1,"stats":{"Line":1},"fn_name":null},{"line":223,"address":[559998,560073],"length":1,"stats":{"Line":2},"fn_name":null},{"line":224,"address":[560069,560075,560021],"length":1,"stats":{"Line":2},"fn_name":null},{"line":228,"address":[560048,560109],"length":1,"stats":{"Line":2},"fn_name":null},{"line":229,"address":[560128],"length":1,"stats":{"Line":1},"fn_name":null},{"line":232,"address":[559973],"length":1,"stats":{"Line":1},"fn_name":null},{"line":233,"address":[560174],"length":1,"stats":{"Line":1},"fn_name":null},{"line":234,"address":[560184],"length":1,"stats":{"Line":1},"fn_name":null},{"line":236,"address":[559870],"length":1,"stats":{"Line":1},"fn_name":null},{"line":239,"address":[559665],"length":1,"stats":{"Line":1},"fn_name":null},{"line":240,"address":[559217,559670,559618],"length":1,"stats":{"Line":3},"fn_name":null},{"line":242,"address":[559538],"length":1,"stats":{"Line":1},"fn_name":null},{"line":243,"address":[559240,559491,559543],"length":1,"stats":{"Line":2},"fn_name":null},{"line":249,"address":[559280,559452],"length":1,"stats":{"Line":2},"fn_name":null},{"line":253,"address":[558823,559313],"length":1,"stats":{"Line":2},"fn_name":null},{"line":254,"address":[559419],"length":1,"stats":{"Line":1},"fn_name":null},{"line":256,"address":[559329],"length":1,"stats":{"Line":1},"fn_name":null},{"line":260,"address":[559263],"length":1,"stats":{"Line":1},"fn_name":null},{"line":266,"address":[560448,561111],"length":1,"stats":{"Line":1},"fn_name":"lex_string"},{"line":267,"address":[560483],"length":1,"stats":{"Line":1},"fn_name":null},{"line":268,"address":[560636,560562],"length":1,"stats":{"Line":1},"fn_name":null},{"line":269,"address":[560585,560638,560632],"length":1,"stats":{"Line":0},"fn_name":null},{"line":272,"address":[560612],"length":1,"stats":{"Line":1},"fn_name":null},{"line":275,"address":[560546,560672],"length":1,"stats":{"Line":2},"fn_name":null},{"line":276,"address":[560700],"length":1,"stats":{"Line":1},"fn_name":null},{"line":280,"address":[560683],"length":1,"stats":{"Line":1},"fn_name":null},{"line":283,"address":[560868,560926,560751],"length":1,"stats":{"Line":3},"fn_name":null},{"line":285,"address":[560771,560886],"length":1,"stats":{"Line":1},"fn_name":null},{"line":287,"address":[560939],"length":1,"stats":{"Line":1},"fn_name":null},{"line":289,"address":[561085],"length":1,"stats":{"Line":1},"fn_name":null},{"line":298,"address":[561136],"length":1,"stats":{"Line":1},"fn_name":"lex_number"},{"line":299,"address":[561171],"length":1,"stats":{"Line":1},"fn_name":null},{"line":300,"address":[561224],"length":1,"stats":{"Line":1},"fn_name":null},{"line":304,"address":[561235,561208],"length":1,"stats":{"Line":2},"fn_name":null},{"line":306,"address":[561327],"length":1,"stats":{"Line":1},"fn_name":null},{"line":307,"address":[561337],"length":1,"stats":{"Line":1},"fn_name":null},{"line":308,"address":[561374],"length":1,"stats":{"Line":1},"fn_name":null},{"line":312,"address":[561305,561396],"length":1,"stats":{"Line":2},"fn_name":null},{"line":314,"address":[561446],"length":1,"stats":{"Line":1},"fn_name":null},{"line":315,"address":[561520],"length":1,"stats":{"Line":1},"fn_name":null},{"line":316,"address":[561538],"length":1,"stats":{"Line":1},"fn_name":null},{"line":317,"address":[561948],"length":1,"stats":{"Line":1},"fn_name":null},{"line":319,"address":[561589],"length":1,"stats":{"Line":0},"fn_name":null},{"line":320,"address":[561602],"length":1,"stats":{"Line":0},"fn_name":null},{"line":321,"address":[561750],"length":1,"stats":{"Line":0},"fn_name":null},{"line":330,"address":[561968,562309],"length":1,"stats":{"Line":1},"fn_name":"lex_identifier"},{"line":331,"address":[561990],"length":1,"stats":{"Line":1},"fn_name":null},{"line":332,"address":[562050],"length":1,"stats":{"Line":1},"fn_name":null},{"line":335,"address":[562072,562028],"length":1,"stats":{"Line":2},"fn_name":null},{"line":336,"address":[562116,562200],"length":1,"stats":{"Line":2},"fn_name":null},{"line":337,"address":[562249],"length":1,"stats":{"Line":1},"fn_name":null},{"line":338,"address":[562262],"length":1,"stats":{"Line":1},"fn_name":null},{"line":341,"address":[562232,562307],"length":1,"stats":{"Line":2},"fn_name":null},{"line":347,"address":[562336],"length":1,"stats":{"Line":1},"fn_name":"peek_n"},{"line":348,"address":[562360],"length":1,"stats":{"Line":1},"fn_name":null},{"line":349,"address":[562514],"length":1,"stats":{"Line":1},"fn_name":null},{"line":351,"address":[562497,562541],"length":1,"stats":{"Line":2},"fn_name":null},{"line":356,"address":[562672],"length":1,"stats":{"Line":1},"fn_name":"peek"},{"line":357,"address":[562686],"length":1,"stats":{"Line":1},"fn_name":null},{"line":358,"address":[562727],"length":1,"stats":{"Line":1},"fn_name":null},{"line":360,"address":[562710,562754],"length":1,"stats":{"Line":2},"fn_name":null},{"line":368,"address":[562816],"length":1,"stats":{"Line":0},"fn_name":"match_n_ahead"},{"line":369,"address":[562854],"length":1,"stats":{"Line":0},"fn_name":null},{"line":370,"address":[563008],"length":1,"stats":{"Line":0},"fn_name":null},{"line":373,"address":[562991,563040],"length":1,"stats":{"Line":0},"fn_name":null},{"line":374,"address":[563194],"length":1,"stats":{"Line":0},"fn_name":null},{"line":377,"address":[563228,563176,563214],"length":1,"stats":{"Line":0},"fn_name":null},{"line":378,"address":[563218],"length":1,"stats":{"Line":0},"fn_name":null},{"line":382,"address":[563264],"length":1,"stats":{"Line":1},"fn_name":"match_next"},{"line":383,"address":[563286],"length":1,"stats":{"Line":1},"fn_name":null},{"line":384,"address":[563327],"length":1,"stats":{"Line":0},"fn_name":null},{"line":387,"address":[563356,563310],"length":1,"stats":{"Line":2},"fn_name":null},{"line":388,"address":[563455],"length":1,"stats":{"Line":1},"fn_name":null},{"line":391,"address":[563475,563433,563489],"length":1,"stats":{"Line":2},"fn_name":null},{"line":392,"address":[563479],"length":1,"stats":{"Line":1},"fn_name":null},{"line":397,"address":[563520],"length":1,"stats":{"Line":1},"fn_name":"add_token"},{"line":398,"address":[563554],"length":1,"stats":{"Line":1},"fn_name":null},{"line":399,"address":[563734,563637],"length":1,"stats":{"Line":2},"fn_name":null},{"line":400,"address":[563649],"length":1,"stats":{"Line":1},"fn_name":null},{"line":404,"address":[563760,564080],"length":1,"stats":{"Line":1},"fn_name":"add_token_with_literal"},{"line":405,"address":[563799,563932],"length":1,"stats":{"Line":2},"fn_name":null},{"line":406,"address":[563953],"length":1,"stats":{"Line":1},"fn_name":null},{"line":410,"address":[564112],"length":1,"stats":{"Line":1},"fn_name":"next"},{"line":411,"address":[564126],"length":1,"stats":{"Line":1},"fn_name":null},{"line":412,"address":[564220,564261],"length":1,"stats":{"Line":1},"fn_name":null},{"line":416,"address":[564304],"length":1,"stats":{"Line":1},"fn_name":"at_end"},{"line":417,"address":[564313],"length":1,"stats":{"Line":1},"fn_name":null},{"line":426,"address":[569935,568576],"length":1,"stats":{"Line":3},"fn_name":"number_literal"},{"line":427,"address":[568583],"length":1,"stats":{"Line":1},"fn_name":null},{"line":428,"address":[568629],"length":1,"stats":{"Line":1},"fn_name":null},{"line":429,"address":[568690],"length":1,"stats":{"Line":1},"fn_name":null},{"line":430,"address":[568779,568877,568697],"length":1,"stats":{"Line":3},"fn_name":null},{"line":431,"address":[569014,568885],"length":1,"stats":{"Line":2},"fn_name":null},{"line":432,"address":[569150,569022],"length":1,"stats":{"Line":2},"fn_name":null},{"line":433,"address":[569168],"length":1,"stats":{"Line":1},"fn_name":null},{"line":434,"address":[569723,569798],"length":1,"stats":{"Line":1},"fn_name":null},{"line":438,"address":[569968,572662],"length":1,"stats":{"Line":3},"fn_name":"parenthesized_exprs"},{"line":439,"address":[569975],"length":1,"stats":{"Line":1},"fn_name":null},{"line":440,"address":[571368,571495,570710,570984,571112,570311,570582,570194,570838,570436,570023,571240],"length":1,"stats":{"Line":1},"fn_name":null},{"line":441,"address":[570131,570045],"length":1,"stats":{"Line":2},"fn_name":null},{"line":442,"address":[570223],"length":1,"stats":{"Line":1},"fn_name":null},{"line":443,"address":[570348],"length":1,"stats":{"Line":1},"fn_name":null},{"line":444,"address":[570476],"length":1,"stats":{"Line":1},"fn_name":null},{"line":445,"address":[570622],"length":1,"stats":{"Line":1},"fn_name":null},{"line":446,"address":[570750],"length":1,"stats":{"Line":1},"fn_name":null},{"line":447,"address":[570878],"length":1,"stats":{"Line":1},"fn_name":null},{"line":448,"address":[571024],"length":1,"stats":{"Line":1},"fn_name":null},{"line":449,"address":[571152],"length":1,"stats":{"Line":1},"fn_name":null},{"line":450,"address":[571280],"length":1,"stats":{"Line":1},"fn_name":null},{"line":451,"address":[571408],"length":1,"stats":{"Line":1},"fn_name":null},{"line":453,"address":[572345],"length":1,"stats":{"Line":1},"fn_name":null},{"line":454,"address":[572418],"length":1,"stats":{"Line":1},"fn_name":null},{"line":455,"address":[572475,572527,572587],"length":1,"stats":{"Line":2},"fn_name":null},{"line":459,"address":[573582,572704],"length":1,"stats":{"Line":3},"fn_name":"and_test"},{"line":460,"address":[572711],"length":1,"stats":{"Line":1},"fn_name":null},{"line":461,"address":[572981,572912,572759],"length":1,"stats":{"Line":1},"fn_name":null},{"line":462,"address":[572781,572857],"length":1,"stats":{"Line":2},"fn_name":null},{"line":463,"address":[572954],"length":1,"stats":{"Line":1},"fn_name":null},{"line":464,"address":[572974],"length":1,"stats":{"Line":1},"fn_name":null},{"line":466,"address":[573265],"length":1,"stats":{"Line":1},"fn_name":null},{"line":467,"address":[573338],"length":1,"stats":{"Line":1},"fn_name":null},{"line":468,"address":[573507,573447,573395],"length":1,"stats":{"Line":2},"fn_name":null},{"line":472,"address":[573616,574494],"length":1,"stats":{"Line":3},"fn_name":"maximal_munch"},{"line":473,"address":[573623],"length":1,"stats":{"Line":1},"fn_name":null},{"line":474,"address":[573824,573893,573671],"length":1,"stats":{"Line":1},"fn_name":null},{"line":475,"address":[573777],"length":1,"stats":{"Line":1},"fn_name":null},{"line":476,"address":[573693],"length":1,"stats":{"Line":1},"fn_name":null},{"line":477,"address":[573701],"length":1,"stats":{"Line":1},"fn_name":null},{"line":478,"address":[573769],"length":1,"stats":{"Line":1},"fn_name":null},{"line":481,"address":[573866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":482,"address":[573886],"length":1,"stats":{"Line":1},"fn_name":null},{"line":484,"address":[574177],"length":1,"stats":{"Line":1},"fn_name":null},{"line":485,"address":[574250],"length":1,"stats":{"Line":1},"fn_name":null},{"line":486,"address":[574307,574419,574359],"length":1,"stats":{"Line":2},"fn_name":null},{"line":490,"address":[574528,576065],"length":1,"stats":{"Line":3},"fn_name":"scan_direct"},{"line":491,"address":[574535],"length":1,"stats":{"Line":1},"fn_name":null},{"line":492,"address":[574557],"length":1,"stats":{"Line":1},"fn_name":null},{"line":493,"address":[575182,574844,575009,574612,575418,575358],"length":1,"stats":{"Line":1},"fn_name":null},{"line":494,"address":[574714],"length":1,"stats":{"Line":1},"fn_name":null},{"line":495,"address":[574634],"length":1,"stats":{"Line":1},"fn_name":null},{"line":496,"address":[574642],"length":1,"stats":{"Line":1},"fn_name":null},{"line":497,"address":[574706],"length":1,"stats":{"Line":1},"fn_name":null},{"line":500,"address":[574884],"length":1,"stats":{"Line":1},"fn_name":null},{"line":501,"address":[574804],"length":1,"stats":{"Line":1},"fn_name":null},{"line":502,"address":[574812],"length":1,"stats":{"Line":1},"fn_name":null},{"line":503,"address":[574876],"length":1,"stats":{"Line":1},"fn_name":null},{"line":506,"address":[575057],"length":1,"stats":{"Line":1},"fn_name":null},{"line":507,"address":[574974],"length":1,"stats":{"Line":1},"fn_name":null},{"line":508,"address":[574982],"length":1,"stats":{"Line":1},"fn_name":null},{"line":509,"address":[575049],"length":1,"stats":{"Line":1},"fn_name":null},{"line":512,"address":[575248],"length":1,"stats":{"Line":1},"fn_name":null},{"line":513,"address":[575147],"length":1,"stats":{"Line":1},"fn_name":null},{"line":514,"address":[575155],"length":1,"stats":{"Line":1},"fn_name":null},{"line":515,"address":[575232],"length":1,"stats":{"Line":1},"fn_name":null},{"line":518,"address":[575351],"length":1,"stats":{"Line":1},"fn_name":null},{"line":519,"address":[575411],"length":1,"stats":{"Line":1},"fn_name":null},{"line":521,"address":[575949,576021],"length":1,"stats":{"Line":1},"fn_name":null},{"line":525,"address":[576096,577016],"length":1,"stats":{"Line":3},"fn_name":"comments"},{"line":526,"address":[576103],"length":1,"stats":{"Line":1},"fn_name":null},{"line":527,"address":[576151,576236],"length":1,"stats":{"Line":2},"fn_name":null},{"line":528,"address":[576340],"length":1,"stats":{"Line":1},"fn_name":null},{"line":529,"address":[576462,576410,576529],"length":1,"stats":{"Line":2},"fn_name":null},{"line":530,"address":[576584,576517],"length":1,"stats":{"Line":2},"fn_name":null},{"line":531,"address":[576712],"length":1,"stats":{"Line":1},"fn_name":null},{"line":532,"address":[576739],"length":1,"stats":{"Line":1},"fn_name":null},{"line":533,"address":[576850,576925],"length":1,"stats":{"Line":1},"fn_name":null},{"line":537,"address":[577801,577056],"length":1,"stats":{"Line":3},"fn_name":"non_fractional_num"},{"line":538,"address":[577063],"length":1,"stats":{"Line":1},"fn_name":null},{"line":539,"address":[577085],"length":1,"stats":{"Line":1},"fn_name":null},{"line":540,"address":[577379,577310,577140],"length":1,"stats":{"Line":1},"fn_name":null},{"line":541,"address":[577260],"length":1,"stats":{"Line":1},"fn_name":null},{"line":542,"address":[577162],"length":1,"stats":{"Line":1},"fn_name":null},{"line":543,"address":[577170],"length":1,"stats":{"Line":1},"fn_name":null},{"line":544,"address":[577244],"length":1,"stats":{"Line":1},"fn_name":null},{"line":547,"address":[577352],"length":1,"stats":{"Line":1},"fn_name":null},{"line":548,"address":[577372],"length":1,"stats":{"Line":1},"fn_name":null},{"line":550,"address":[577757,577685],"length":1,"stats":{"Line":1},"fn_name":null},{"line":554,"address":[578519,577824],"length":1,"stats":{"Line":3},"fn_name":"fractional_numbers"},{"line":555,"address":[577831],"length":1,"stats":{"Line":1},"fn_name":null},{"line":556,"address":[577853],"length":1,"stats":{"Line":1},"fn_name":null},{"line":557,"address":[578211],"length":1,"stats":{"Line":1},"fn_name":null},{"line":558,"address":[577908,578028],"length":1,"stats":{"Line":2},"fn_name":null},{"line":559,"address":[577930],"length":1,"stats":{"Line":1},"fn_name":null},{"line":560,"address":[577938],"length":1,"stats":{"Line":1},"fn_name":null},{"line":561,"address":[578012],"length":1,"stats":{"Line":1},"fn_name":null},{"line":564,"address":[578204],"length":1,"stats":{"Line":1},"fn_name":null},{"line":567,"address":[578457,578475,578405],"length":1,"stats":{"Line":2},"fn_name":null},{"line":575,"address":[578544],"length":1,"stats":{"Line":3},"fn_name":"scan_invalid_chars"},{"line":576,"address":[578548],"length":1,"stats":{"Line":1},"fn_name":null},{"line":577,"address":[578568],"length":1,"stats":{"Line":1},"fn_name":null},{"line":582,"address":[578640],"length":1,"stats":{"Line":3},"fn_name":"unterminated_string"},{"line":583,"address":[578644],"length":1,"stats":{"Line":1},"fn_name":null},{"line":584,"address":[578664],"length":1,"stats":{"Line":1},"fn_name":null},{"line":589,"address":[578736],"length":1,"stats":{"Line":3},"fn_name":"unterminated_block_comment"},{"line":590,"address":[578740],"length":1,"stats":{"Line":1},"fn_name":null},{"line":591,"address":[578760],"length":1,"stats":{"Line":1},"fn_name":null},{"line":594,"address":[568080,568308],"length":1,"stats":{"Line":1},"fn_name":"get_end"},{"line":595,"address":[568110],"length":1,"stats":{"Line":1},"fn_name":null},{"line":598,"address":[568336],"length":1,"stats":{"Line":1},"fn_name":"get_eof"},{"line":599,"address":[568360],"length":1,"stats":{"Line":1},"fn_name":null},{"line":602,"address":[568432],"length":1,"stats":{"Line":1},"fn_name":"get_semicolon"},{"line":605,"address":[568455],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":264,"coverable":281},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","token.rs"],"content":"//! Token and AST-Level Symbol information\nuse std::fmt;\nuse std::fmt::Display;\n\nuse crate::literals::Literal;\nuse crate::tokentype::TokenType;\n\n/// Our Token type represents the parsed Tokens that we got from our scanner.\n///\n/// More generally, they are usefull as they store their internal type values, and their\n/// names. As such, we use these as Symbols as well.\n#[derive(Debug, Clone, PartialEq, PartialOrd)]\npub struct Token {\n    pub ttype: TokenType,\n    pub lexeme: String,\n    pub literal: Literal,\n    pub line: usize,\n}\n\nimpl Token {\n    pub fn new(ttype: TokenType, lexeme: String, literal: Literal, line: usize) -\u003e Token {\n        Token {\n            ttype,\n            lexeme,\n            literal,\n            line,\n        }\n    }\n}\n\nimpl Display for Token {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        write!(\n            f,\n            \"TOKEN( Type: {}, Lexeme: {}, Literal: {}, line: {} )\",\n            self.ttype, self.lexeme, self.literal, self.line\n        )\n    }\n}\n","traces":[{"line":21,"address":[689904],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":32,"address":[690080],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":33,"address":[690108],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":1,"coverable":3},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","tokentype.rs"],"content":"//! A big old enum that contains every variant of allowable tokens in the grammar.\n\nuse std::fmt::{self, Display};\n\n#[derive(Debug, Clone, PartialEq, PartialOrd)]\npub enum TokenType {\n    // 1char tokens\n    LeftParen,\n    RightParen,\n    LeftBrace,\n    RightBrace,\n    Comma,\n    Dot,\n    Minus,\n    Plus,\n    Semicolon,\n    Slash,\n    Star,\n\n    // 1 / 2 char tokens\n    Bang,\n    BangEqual,\n    Equal,\n    EqualEqual,\n    GreaterEqual,\n    Greater,\n    Less,\n    LessEqual,\n\n    // Literals.\n    Identifier,\n    String,\n    Number,\n\n    // Keywords / logic ops etc\n    And,\n    Class,\n    Else,\n    False,\n    Fn,\n    For,\n    If,\n    None,\n    Or,\n    Return,\n    Super,\n    Self_,\n    True,\n    Var,\n    While,\n    Call,\n\n    // Reserved\n    Print,\n\n    EOF,\n}\n\nimpl Display for TokenType {\n    fn fmt(\u0026self, f: \u0026mut fmt::Formatter) -\u003e fmt::Result {\n        write!(f, \"{:?}\", self)\n    }\n}\n","traces":[{"line":60,"address":[666224],"length":1,"stats":{"Line":0},"fn_name":"fmt"},{"line":61,"address":[666246],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":2},{"path":["/","home","patchouli","doc","uni","masters","advanced_programming","daemonium","altars","src","userfunction.rs"],"content":"//! Type of all functions defined in Daemonica.\nuse crate::{\n    ast::{Expr, Stmt, Value},\n    environment::Environment,\n    interpreter::Interpreter,\n    token::Token,\n};\n\n#[derive(PartialEq, Debug, Clone)]\npub struct UserFunction {\n    symbol: Token,\n    body: Vec\u003cStmt\u003e,\n    paramlist: Vec\u003cToken\u003e,\n}\n\nimpl UserFunction {\n    pub fn new(symbol: Token, body: Vec\u003cStmt\u003e, paramlist: Vec\u003cToken\u003e) -\u003e UserFunction {\n        UserFunction {\n            symbol,\n            body,\n            paramlist,\n        }\n    }\n\n    pub fn call(\n        \u0026self,\n        interpreter: \u0026mut Interpreter,\n        args: Vec\u003cValue\u003e,\n    ) -\u003e Result\u003c(Environment, Option\u003cValue\u003e), (Environment, String)\u003e {\n        //dbg!(args.clone());\n        let scope_copy = interpreter.environment.clone();\n        let scope_copy = self.parse_arguments(scope_copy.clone(), args.clone());\n        match interpreter.interpret_block(self.body.clone(), scope_copy.clone()) {\n            Ok(_) =\u003e {\n                // Execution successful, return the modified scope.\n                return Ok((interpreter.environment.clone(), interpreter.retval.clone()));\n            }\n            Err(x) =\u003e {\n                // Execution went wrong, return error message, and the old scope.\n                return Err((scope_copy, x));\n            }\n        }\n    }\n\n    fn parse_arguments(\u0026self, mut scope: Environment, args: Vec\u003cValue\u003e) -\u003e Environment {\n        for (arg, name) in args.iter().zip(self.paramlist.iter()) {\n            scope.define(name.lexeme.clone(), Some(arg.clone()));\n        }\n        scope\n    }\n}\n","traces":[{"line":16,"address":[775920],"length":1,"stats":{"Line":1},"fn_name":"new"},{"line":20,"address":[776340,776048],"length":1,"stats":{"Line":1},"fn_name":"call"},{"line":24,"address":[776099],"length":1,"stats":{"Line":1},"fn_name":null},{"line":25,"address":[776138,776227,776355],"length":1,"stats":{"Line":2},"fn_name":null},{"line":26,"address":[776362],"length":1,"stats":{"Line":1},"fn_name":null},{"line":28,"address":[776741,776476],"length":1,"stats":{"Line":2},"fn_name":null},{"line":30,"address":[776486],"length":1,"stats":{"Line":0},"fn_name":null},{"line":32,"address":[776525],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":6,"coverable":8}]};
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      }
    };
  });

  return [
    ...folders,
    ...files.filter(file => file.path.length === 1),
  ];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener("hashchange", () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.substr(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(({current}) => {
      return {current: [...current, file.path[0]]};
    }, () => this.updateHash());
  }

  back(file) {
    this.setState(({current}) => {
      return {current: current.slice(0, current.length - 1)};
    }, () => this.updateHash());
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e('div', {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e('table', {className: 'files-list'},
      e('thead', {className: 'files-list__head'},
        e('tr', null,
          e('th', null, "Path"),
          e('th', null, "Coverage")
        )
      ),
      e('tbody', {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile}))
      )
    )
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? file.covered / file.coverable * 100 : -1;
  const coverageDelta = file.prevRun &&
    (file.covered / file.coverable * 100 - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('tr', {
      className: 'files-list__file'
        + (coverage >= 0 && coverage < 50 ? ' files-list__file_low': '')
        + (coverage >= 50 && coverage < 80 ? ' files-list__file_medium': '')
        + (coverage >= 80 ? ' files-list__file_high': '')
        + (file.is_folder ? ' files-list__file_folder': ''),
      onClick: () => onClick(file),
    },
    e('td', null, pathToString(file.path)),
    e('td', null,
      file.covered + ' / ' + file.coverable +
      (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'},
    e(FileHeader, {file, onBack}),
    e(FileContent, {file})
  );
}

function FileHeader({file, onBack}) {
  const coverage = file.covered / file.coverable * 100;
  const coverageDelta = file.prevRun && (coverage - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('div', {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e('div', {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable +
      (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function FileContent({file}) {
  return e('div', {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      return e('pre', {
          className: 'code-line'
            + (covered ? ' code-line_covered' : '')
            + (uncovered ? ' code-line_uncovered' : ''),
          title: trace ? JSON.stringify(trace.stats, null, 2) : null,
        }, line);
    })
  );
}

(function(){
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData && previousData.files.forEach((file) => {
    const path = file.path.slice(commonPath.length).join('/');
    prevFilesMap.set(path, file);
  });

  const files = data.files.map((file) => {
    const path = file.path.slice(commonPath.length);
    const { covered = 0, coverable = 0 } = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: { covered, coverable },
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    }
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));
}());
</script>
</body>
</html>